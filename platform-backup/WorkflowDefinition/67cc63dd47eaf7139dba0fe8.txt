{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1741550596171,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296164080,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfce40c3d19149a9e343d",
		"status":"DEPLOYED",
		"version":65,
		"workflowVersion":96
	},
	"edges":[
		{
			"fromNodeId":"V10Fj",
			"priority":0,
			"skip":false,
			"toNodeId":"n_tHbP8",
			"type":"next"
		},
		{
			"fromNodeId":"n_tHbP8",
			"priority":0,
			"skip":false,
			"toNodeId":"n_nDAeF",
			"type":"next"
		},
		{
			"fromNodeId":"n_nDAeF",
			"priority":0,
			"skip":false,
			"toNodeId":"q4RaM",
			"type":"next"
		},
		{
			"fromNodeId":"q4RaM",
			"priority":0,
			"skip":false,
			"toNodeId":"qNOEi",
			"type":"next"
		},
		{
			"fromNodeId":"qNOEi",
			"priority":0,
			"skip":false,
			"toNodeId":"FRrQ7",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"67cc63dd47eaf7139dba0fe8",
	"lastModifiedBy":0,
	"lcName":"actionlookup tool",
	"modifiedTime":1761722675476,
	"name":"ActionLookup Tool",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":117,
				"resourceName":"callables_from_interface"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"U3iPd-1",
			"id":"V10Fj",
			"index":1,
			"inputs":{
				"result":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"toolOutput":{
							"type":"string",
							"title":"toolOutput"
						},
						"success":{
							"type":"boolean",
							"title":"Success"
						},
						"error":{
							"type":"string",
							"title":"Error"
						}
					},
					"required":[]
				},
				"callableInterfaceId":"679484ef9c8ab5620dca9609",
				"setup":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"toolId":{
							"type":"string",
							"title":"toolId"
						},
						"toolInputs":{
							"type":"object",
							"title":"toolInputs"
						},
						"triggeredByAgentId":{
							"type":"string",
							"title":"Triggered By Agent Id"
						},
						"agentResponseMessageId":{
							"type":"string",
							"title":"Agent Response Message Id"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"executeUsingModel":{
							"type":"string",
							"title":"Execute Using Model"
						},
						"toolName":{
							"type":"string",
							"title":"Tool Name"
						},
						"actionId":{
							"type":"string",
							"title":"Action Id"
						},
						"toolAdditional":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Tool Additional"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger interface",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":527,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"U3iPd-1",
			"id":"n_tHbP8",
			"index":2,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_aiAgentId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ V10Fj.outputs.triggeredByAgentId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"e_action_ai_agent",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"page":{
					"paginateBy":"OFFSET",
					"limit":2000
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"fetch all agent tools",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.toolList.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"U3iPd-1",
			"id":"n_nDAeF",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"toolNameVsConnectionMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Tool Name Vs Connection Map"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"toolList":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Tool List"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"return [\n    \"toolNameVsConnectionMap\" : toolList.collectEntries{ tool ->\n            [(getSanitizedName(tool.name)) : tool?.context?.connectionId ]\n        }\n]\n\n\n\ndef getSanitizedName(String header) {\n    String sanitized = header.trim().replaceAll(\"[^a-zA-Z0-9]\", \"_\")\n    if (sanitized.length() > 64) {\n        sanitized = sanitized.substring(0, 63)\n    }\n    return sanitized\n}\n",
				"parameters":{
					"toolList":{
						"source":"{{ n_tHbP8.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ n_tHbP8.outputs.objects[0].properties }}"
					}
				}
			},
			"skip":false,
			"subTitle":"get tool-connection map",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":120,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"U3iPd-1",
			"id":"q4RaM",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"page":{
							"type":"integer",
							"title":"Page"
						},
						"options":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Options"
						},
						"query":{
							"type":"string",
							"title":"Query"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"inputs":{
							"type":"string",
							"title":"Inputs"
						},
						"toolId":{
							"type":"string",
							"title":"Tool Id"
						},
						"toolNameVsConnectionMap":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Tool Name Vs Connection Map"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"if (!binding.hasVariable('inputs') || !binding.hasVariable('toolId')){\n  return [:]\n}\nint page = 1;\nString query = null\nif (inputs.lookup_page != null){\n  page = inputs.remove(\"lookup_page\")\n}\nif (inputs.lookup_query != null){\n  query = inputs.remove(\"lookup_query\")\n}\nString targetToolName = inputs.remove(\"targetToolName\")\nString connectionId = toolNameVsConnectionMap.get(targetToolName)\n\nreturn [\n  \"page\": page,\n  \"query\": query,\n  \"options\": [\n    \"inputs\":inputs.inputs,\n    \"source_resource_name\": toolId.substring(7),\n    \"connectionId\": connectionId\n  ]\n]",
				"parameters":{
					"inputs":"{{ V10Fj.outputs.toolInputs }}",
					"toolId":"{{ V10Fj.outputs.toolName }}",
					"toolNameVsConnectionMap":"{{ n_nDAeF.outputs.result.toolNameVsConnectionMap }}"
				}
			},
			"skip":false,
			"subTitle":"Get lookup options",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"standard_entities",
				"resourceVersion":120,
				"resourceName":"standard_entities_lookup_entities",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"U3iPd-1",
			"id":"qNOEi",
			"index":5,
			"inputs":{
				"query":"{{ q4RaM.outputs.result.query }}",
				"options":"{{ q4RaM.outputs.result.options }}",
				"lookupType":"CONNECTOR_OBJECT_NAME",
				"page":{
					"limit":40,
					"offset":"=({{ q4RaM.outputs.result.page }}-1)*40"
				},
				"fields":[],
				"type":"ByQuery"
			},
			"skip":false,
			"subTitle":"Lookup",
			"title":"Lookup Request",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":122,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"U3iPd-1",
			"id":"FRrQ7",
			"index":6,
			"inputs":{
				"result":{
					"success":true,
					"toolOutput":"{{ qNOEi.outputs.response }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":635,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent",
		"Internal"
	],
	"version":98
}