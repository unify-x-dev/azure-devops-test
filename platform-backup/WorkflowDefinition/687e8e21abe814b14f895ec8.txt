{
	"appsUsed":[
		"gong"
	],
	"createdTime":1756991720079,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1759371950584,
		"deployedBy":-1,
		"deployedDefinitionId":"68dde2aed3636c7f14535ecc",
		"status":"DEPLOYED",
		"version":15,
		"workflowVersion":95
	},
	"edges":[
		{
			"fromNodeId":"n_0yHNy",
			"priority":0,
			"skip":false,
			"toNodeId":"Mj4vZ",
			"type":"next"
		},
		{
			"fromNodeId":"Mj4vZ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oEvYI",
			"type":"next"
		},
		{
			"fromNodeId":"n_oEvYI",
			"priority":0,
			"skip":false,
			"toNodeId":"FXLAi",
			"type":"next"
		},
		{
			"fromNodeId":"FXLAi",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_WZXBB",
			"type":"error"
		},
		{
			"fromNodeId":"n_WZXBB",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_WZXBB@1",
			"type":"branch"
		},
		{
			"fromNodeId":"n_WZXBB@1",
			"priority":0,
			"skip":false,
			"toNodeId":"_wW4o3",
			"type":"next"
		},
		{
			"fromNodeId":"_wW4o3",
			"priority":0,
			"skip":false,
			"toNodeId":"_UKCfF",
			"type":"next"
		},
		{
			"fromNodeId":"n_WZXBB",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_WZXBB@2",
			"type":"branch"
		},
		{
			"fromNodeId":"n_WZXBB@2",
			"priority":0,
			"skip":false,
			"toNodeId":"_308Mr",
			"type":"next"
		},
		{
			"fromNodeId":"n_WZXBB",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"n_IRKSH",
			"type":"branch"
		},
		{
			"fromNodeId":"FXLAi",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wJcZd",
			"type":"next"
		},
		{
			"fromNodeId":"_UKCfF",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wJcZd",
			"type":"next"
		},
		{
			"fromNodeId":"n_BT6QH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wJcZd",
			"type":"next"
		},
		{
			"fromNodeId":"_308Mr",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wJcZd",
			"type":"next"
		},
		{
			"fromNodeId":"n_IRKSH",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wJcZd",
			"type":"next"
		},
		{
			"fromNodeId":"n_wJcZd",
			"priority":0,
			"skip":false,
			"toNodeId":"n_0tZlG",
			"type":"loop"
		},
		{
			"fromNodeId":"n_0tZlG",
			"priority":0,
			"skip":false,
			"toNodeId":"n_BT6QH",
			"type":"next"
		},
		{
			"fromNodeId":"n_wJcZd",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ozehB",
			"type":"next"
		},
		{
			"fromNodeId":"n_ozehB",
			"priority":0,
			"skip":false,
			"toNodeId":"n_TYgbT",
			"type":"loop"
		},
		{
			"fromNodeId":"n_TYgbT",
			"priority":0,
			"skip":false,
			"toNodeId":"n_3JWWe",
			"type":"next"
		},
		{
			"fromNodeId":"n_3JWWe",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dKKcA",
			"type":"if"
		},
		{
			"fromNodeId":"n_dKKcA",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ozehB",
			"type":"next"
		},
		{
			"fromNodeId":"n_3JWWe",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ozehB",
			"type":"next"
		},
		{
			"fromNodeId":"n_ozehB",
			"priority":0,
			"skip":false,
			"toNodeId":"n_UH4sB",
			"type":"next"
		},
		{
			"fromNodeId":"n_UH4sB",
			"priority":0,
			"skip":false,
			"toNodeId":"n_8mAT4",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"687e8e21abe814b14f895ec8",
	"lastModifiedBy":0,
	"lcName":"knowledge downloader | gong | all calls",
	"modifiedTime":1761722823414,
	"name":"Knowledge Downloader | Gong | All Calls",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":436,
				"resourceName":"callables_from_interface"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"n_0yHNy",
			"index":1,
			"inputs":{
				"result":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"Has More"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"downloadedEntitiesCount":{
							"type":"integer",
							"title":"Downloaded Entities Count"
						},
						"knowledgeDownloadFinished":{
							"type":"boolean",
							"title":"Knowledge Download Finished"
						}
					},
					"required":[]
				},
				"callableInterfaceId":"6854484ac68462013926b9cf",
				"setup":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"knowledgeId":{
							"type":"string",
							"title":"knowledgeId"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"knowledge":{
							"type":"object",
							"properties":{
								"readVersion":{
									"type":"integer",
									"title":"readVersion"
								},
								"lastSyncTime":{
									"type":"integer",
									"title":"lastSyncTime"
								},
								"cursorObject":{
									"type":"object",
									"title":"cursorObject"
								},
								"applicationInfo":{
									"type":"object",
									"properties":{
										"context":{
											"type":"object",
											"properties":{
												"connectionId":{
													"type":"string",
													"title":"Connection Id"
												}
											},
											"additionalProperties":false,
											"title":"Context",
											"required":[]
										}
									},
									"additionalProperties":false,
									"title":"Application Info",
									"required":[]
								},
								"indexingVersion":{
									"type":"integer",
									"title":"Indexing Version"
								}
							},
							"title":"knowledge",
							"additionalProperties":false,
							"required":[]
						},
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"importerConnections":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Importer Connections"
						},
						"downloaderConfig":{
							"type":"object",
							"properties":{
								"grabberType":{
									"type":"string",
									"title":"Grabber Type"
								},
								"currentTimeEpoch":{
									"type":"integer",
									"title":"Current Time Epoch"
								},
								"startTimeEpoch":{
									"type":"integer",
									"title":"Start Time Epoch"
								}
							},
							"additionalProperties":false,
							"title":"Downloader Config",
							"required":[]
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger interface",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"additional":{
				"xsdSchemaConfig":{},
				"visibleOptionalFields":[
					"root.parameters.downloadDuration.startTimeEpoch",
					"root.parameters.downloadDuration.currentTimeEpoch"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":115,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"Mj4vZ",
			"index":2,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"newFilter":{
							"type":"object",
							"properties":{
								"fromDateTime":{
									"type":"string",
									"title":"fromDateTime"
								},
								"toDateTime":{
									"type":"string",
									"title":"toDateTime"
								},
								"workspaceId":{
									"type":"string",
									"title":"workspaceId"
								},
								"callIds":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"callIds"
								},
								"primaryUserIds":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"primaryUserIds"
								},
								"callTranscripts":{
									"type":"boolean",
									"title":"Call Transcripts"
								},
								"sharedWithIds":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"Shared With Ids"
								}
							},
							"additionalProperties":false,
							"title":"New Filter",
							"required":[]
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						},
						"downloaderConfig":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Downloader Config"
						}
					}
				},
				"compile_static":false,
				"code":"import java.time.*\n\ndef newFilter = [:]\nif(binding.hasVariable('inputs')) {\n    newFilter[\"workspaceId\"] = inputs.workspaceId\n    newFilter[\"callIds\"] = inputs.callIds\n    newFilter[\"primaryUserIds\"] = inputs.primaryUserIds\n    newFilter[\"callTranscripts\"] = inputs.callTranscripts\n    newFilter[\"sharedWithIds\"] = inputs.sharedWithIds\n\n    def startTimeEpoch = downloaderConfig?.startTimeEpoch ?: 0\n\n    def startTimeEpochInSeconds = (startTimeEpoch / 1000).longValue()\n    def userSpecifiedStartDate = inputs?.scheduledTime?.fromDateTime ?: 0\n\n    newFilter[\"fromDateTime\"] = Math.max(userSpecifiedStartDate, startTimeEpochInSeconds).longValue()\n\n    if(inputs.scheduledTime.toDateTime) {\n        newFilter[\"toDateTime\"] = inputs?.scheduledTime?.toDateTime\n    }\n} else {\n    newFilter[\"fromDateTime\"] = 0\n}\n\nif (binding.hasVariable(\"cursor\") && cursor?.lastCallScheduledTime != null ) {\n    newFilter.fromDateTime = cursor.lastCallScheduledTime.longValue()\n}\n\n\nreturn ['newFilter': newFilter];",
				"parameters":{
					"inputs":"{{ n_0yHNy.outputs.inputs }}",
					"cursor":"{{ n_0yHNy.outputs.cursor }}",
					"downloaderConfig":"{{ n_0yHNy.outputs.downloaderConfig }}"
				}
			},
			"skip":false,
			"subTitle":"Input Parsing",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":450,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"n_oEvYI",
			"index":3,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"sharedWithIds",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"sharedWithIds",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"sharedWithIds",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.filter.callIds.items",
					"root.filter.primaryUserIds.items",
					"root.contentSelector.contextTiming.items",
					"root.contentSelector.exposedFields.parties",
					"root.contentSelector.exposedFields.content.structure",
					"root.contentSelector.exposedFields.content.topics",
					"root.contentSelector.exposedFields.content.trackers",
					"root.contentSelector.exposedFields.content.trackerOccurrences",
					"root.contentSelector.exposedFields.content.pointsOfInterest",
					"root.contentSelector.exposedFields.content.brief",
					"root.contentSelector.exposedFields.content.outline",
					"root.contentSelector.exposedFields.content.highlights",
					"root.contentSelector.exposedFields.content.callOutcome",
					"root.contentSelector.exposedFields.content.keyPoints",
					"root.contentSelector.exposedFields.interaction.speakers",
					"root.contentSelector.exposedFields.interaction.video",
					"root.contentSelector.exposedFields.interaction.personInteractionStats",
					"root.contentSelector.exposedFields.interaction.questions",
					"root.contentSelector.exposedFields.collaboration.publicComments",
					"root.contentSelector.exposedFields.media"
				]
			},
			"context":{
				"appName":"gong",
				"resourceVersion":57,
				"connectionId":"68508e1ffd1ef71018a7bcad",
				"resourceName":"gong_retrieve_detailed_call_data_using_filters",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"_NrjNd-1",
			"id":"FXLAi",
			"index":4,
			"inputs":{
				"filter":{
					"fromDateTime":"{{ Mj4vZ.outputs.result.newFilter.fromDateTime }}",
					"toDateTime":"{{ Mj4vZ.outputs.result.newFilter.toDateTime }}",
					"callIds":{
						"source":"{{ Mj4vZ.outputs.result.newFilter.callIds }}",
						"ua:type":"mappedArray",
						"items":"{{ Mj4vZ.outputs.result.newFilter.callIds[0] }}"
					},
					"primaryUserIds":{
						"source":"{{ Mj4vZ.outputs.result.newFilter.primaryUserIds }}",
						"ua:type":"mappedArray",
						"items":"{{ Mj4vZ.outputs.result.newFilter.primaryUserIds[0] }}"
					},
					"workspaceId":"{{ Mj4vZ.outputs.result.newFilter.workspaceId }}"
				},
				"contentSelector":{
					"exposedFields":{
						"content":{
							"brief":true,
							"keyPoints":true
						},
						"parties":true
					},
					"context":"Basic"
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"duration":"1",
					"enabled":true,
					"threshold":"150",
					"unit":"MINUTES",
					"waitForNextWindow":true
				},
				"retryConfig":{
					"backOffFactor":2.0,
					"captureRetries":false,
					"count":3,
					"enabled":false,
					"initialDelay":3000
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Gong",
			"title":"Retrieve detailed call data using filters",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"FXLAi@_NrjNd-1@error",
			"id":"n_WZXBB",
			"index":5,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Branch 1",
							"conditions":{
								"filters":[
									{
										"property":"{{ FXLAi.outputs.status_code }}",
										"filter":{
											"operator":"EQUAL",
											"value":"404"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"Branch 2",
							"conditions":{
								"filters":[
									{
										"property":"{{ FXLAi.outputs.status_code }}",
										"filter":{
											"operator":"EQUAL",
											"value":"400"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_WZXBB@FXLAi@_NrjNd-1@error@1",
			"id":"n_WZXBB@1",
			"index":6,
			"inputs":{
				"name":"Branch 1",
				"conditions":{
					"filters":[
						{
							"property":"{{ FXLAi.outputs.status_code }}",
							"filter":{
								"operator":"EQUAL",
								"value":"404"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.calls.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_WZXBB@FXLAi@_NrjNd-1@error@1",
			"id":"_wW4o3",
			"index":7,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"Has More"
						},
						"knowledgeDownloadFinished":{
							"type":"boolean",
							"title":"Knowledge Download Finished"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"downloaderConfig":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Downloader Config"
						},
						"userSpecifiedEndTime":{
							"type":"integer",
							"title":"User Specified End Time"
						},
						"cursor":{
							"type":"string",
							"title":"Cursor"
						},
						"calls":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Calls"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"import java.time.*\n\ndef convertToUnixTimestamp = { isoTimestamp ->\n    isoTimestamp ? Instant.parse(isoTimestamp).toEpochMilli() : null\n}\n\nboolean hasMore = false\nboolean channelApiHasMore = false\ndef lastCallScheduledTime\n\nif(binding.hasVariable('cursor') && cursor.length() > 0){\n    channelApiHasMore = true\n}\n\n\ndef currentTimeEpoch = binding.hasVariable('downloaderConfig') ? downloaderConfig.currentTimeEpoch : 0\ndef currentTimeEpochInSeconds = (currentTimeEpoch/1000).longValue()\n\nboolean userSpecifiedTimeReached = binding.hasVariable(\"userSpecifiedEndTime\") ? ((lastCallScheduledTime != null && lastCallScheduledTime > userSpecifiedEndTime) || currentTimeEpochInSeconds > userSpecifiedEndTime ) : false \n\nreturn [\n    \"cursor\": [\"lastCallScheduledTime\": currentTimeEpochInSeconds],\n    \"hasMore\" : false,\n    \"knowledgeDownloadFinished\" : !channelApiHasMore && userSpecifiedTimeReached\n]\n",
				"parameters":{
					"downloaderConfig":"{{ n_0yHNy.outputs.downloaderConfig }}",
					"userSpecifiedEndTime":"{{ Mj4vZ.outputs.result.newFilter.toDateTime }}",
					"cursor":"{{ FXLAi.outputs.records.cursor }}",
					"calls":{
						"source":"{{ FXLAi.outputs.calls }}",
						"ua:type":"mappedArray",
						"items":"{{ FXLAi.outputs.calls[0].metaData.scheduled }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Extract Cursor ",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_WZXBB@FXLAi@_NrjNd-1@error@1",
			"id":"_UKCfF",
			"index":8,
			"inputs":{
				"result":{
					"downloadedEntitiesCount":"{{ FXLAi.outputs.records.currentPageSize }}",
					"knowledgeDownloadFinished":"{{ _wW4o3.outputs.result.knowledgeDownloadFinished }}",
					"cursor":"{{ _wW4o3.outputs.result.cursor }}",
					"hasMore":"{{ _wW4o3.outputs.result.hasMore }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_WZXBB@FXLAi@_NrjNd-1@error@2",
			"id":"n_WZXBB@2",
			"index":9,
			"inputs":{
				"name":"Branch 2",
				"conditions":{
					"filters":[
						{
							"property":"{{ FXLAi.outputs.status_code }}",
							"filter":{
								"operator":"EQUAL",
								"value":"400"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_WZXBB@FXLAi@_NrjNd-1@error@2",
			"id":"_308Mr",
			"index":10,
			"inputs":{
				"result":{
					"hasMore":false,
					"downloadedEntitiesCount":0,
					"knowledgeDownloadFinished":true
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_WZXBB@FXLAi@_NrjNd-1@error@default",
			"id":"n_IRKSH",
			"index":11,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"errorMessage":{
							"type":"string",
							"title":"Error Message"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"jsonString":"Error in API"
			},
			"skip":false,
			"subTitle":"Utility by UnifyApps",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":456,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"n_wJcZd",
			"index":12,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ FXLAi.outputs.calls }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"loop over calls",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.parties.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_wJcZd@_NrjNd-1@l",
			"id":"n_0tZlG",
			"index":13,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"finalString":{
							"type":"string",
							"title":"Final String"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"callId":{
							"type":"string",
							"title":"Call Id"
						},
						"parties":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Parties"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def finalString = \"\"\n\nif (binding.hasVariable('callId') && binding.hasVariable('parties')) {\n    finalString = ([callId] + parties).join(\",\")\n}\n\nreturn [\"finalString\": finalString]\n",
				"parameters":{
					"callId":"{{ n_wJcZd.outputs.item.metaData.id }}",
					"parties":{
						"source":"{{ n_wJcZd.outputs.item.parties }}",
						"ua:type":"mappedArray",
						"items":"{{ n_wJcZd.outputs.item.parties[0].emailAddress }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Combine callId with participantes ",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_wJcZd@_NrjNd-1@l",
			"id":"n_BT6QH",
			"index":14,
			"inputs":{
				"itemToAdd":"{{ n_0tZlG.outputs.result.finalString }}",
				"insertLocation":"END",
				"listName":"{{ n_oEvYI.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"add into sharedWithIds",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":455,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"n_ozehB",
			"index":15,
			"inputs":{
				"repeatMode":"BATCH",
				"listSource":"{{ FXLAi.outputs.calls }}",
				"captureIterations":false,
				"batchSize":30
			},
			"skip":false,
			"subTitle":"Loop Batch (30)",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":450,
				"resourceName":"callables_call_automation_batch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ozehB@_NrjNd-1@l",
			"id":"n_TYgbT",
			"index":16,
			"inputs":{
				"automationId":"687d38e619ec661bd5bafb7a",
				"runtimeConnections":{},
				"synchronous":true,
				"distributeWorkflowLoad":false,
				"parametersList":{
					"source":"{{ n_ozehB.outputs.item }}",
					"ua:type":"mappedArray",
					"items":{
						"content":{
							"brief":"{{ n_ozehB.outputs.item[0].content.brief }}",
							"keyPoints":{
								"source":"{{ n_ozehB.outputs.item[0].content.keyPoints }}",
								"ua:type":"mappedArray",
								"items":{
									"text":"{{ n_ozehB.outputs.item[0].content.keyPoints[0].text }}"
								}
							}
						},
						"context":{
							"source":"{{ n_ozehB.outputs.item[0].context }}",
							"ua:type":"mappedArray",
							"items":{
								"objects":{
									"source":"{{ n_ozehB.outputs.item[0].context[0].objects }}",
									"ua:type":"mappedArray",
									"items":{
										"objectId":"{{ n_ozehB.outputs.item[0].context[0].objects[0].objectId }}",
										"objectType":"{{ n_ozehB.outputs.item[0].context[0].objects[0].objectType }}"
									}
								},
								"system":"{{ n_ozehB.outputs.item[0].context[0].system }}"
							}
						},
						"metaData":{
							"clientUniqueId":"{{ n_ozehB.outputs.item[0].metaData.clientUniqueId }}",
							"direction":"{{ n_ozehB.outputs.item[0].metaData.direction }}",
							"duration":"{{ n_ozehB.outputs.item[0].metaData.duration }}",
							"id":"{{ n_ozehB.outputs.item[0].metaData.id }}",
							"isPrivate":"{{ n_ozehB.outputs.item[0].metaData.isPrivate }}",
							"language":"{{ n_ozehB.outputs.item[0].metaData.language }}",
							"media":"{{ n_ozehB.outputs.item[0].metaData.media }}",
							"meetingUrl":"{{ n_ozehB.outputs.item[0].metaData.meetingUrl }}",
							"primaryUserId":"{{ n_ozehB.outputs.item[0].metaData.primaryUserId }}",
							"scheduled":"{{ n_ozehB.outputs.item[0].metaData.scheduled }}",
							"scope":"{{ n_ozehB.outputs.item[0].metaData.scope }}",
							"sdrDisposition":"{{ n_ozehB.outputs.item[0].metaData.sdrDisposition }}",
							"started":"{{ n_ozehB.outputs.item[0].metaData.started }}",
							"system":"{{ n_ozehB.outputs.item[0].metaData.system }}",
							"title":"{{ n_ozehB.outputs.item[0].metaData.title }}",
							"url":"{{ n_ozehB.outputs.item[0].metaData.url }}",
							"workspaceId":"{{ n_ozehB.outputs.item[0].metaData.workspaceId }}"
						},
						"parties":{
							"source":"{{ n_ozehB.outputs.item[0].parties }}",
							"ua:type":"mappedArray",
							"items":{
								"affiliation":"{{ n_ozehB.outputs.item[0].parties[0].affiliation }}",
								"context":{
									"source":"{{ n_ozehB.outputs.item[0].parties[0].context }}",
									"ua:type":"mappedArray",
									"items":{
										"objects":{
											"source":"{{ n_ozehB.outputs.item[0].parties[0].context[0].objects }}",
											"ua:type":"mappedArray",
											"items":{
												"objectId":"{{ n_ozehB.outputs.item[0].parties[0].context[0].objects[0].objectId }}",
												"objectType":"{{ n_ozehB.outputs.item[0].parties[0].context[0].objects[0].objectType }}"
											}
										},
										"system":"{{ n_ozehB.outputs.item[0].parties[0].context[0].system }}"
									}
								},
								"emailAddress":"{{ n_ozehB.outputs.item[0].parties[0].emailAddress }}",
								"id":"{{ n_ozehB.outputs.item[0].parties[0].id }}",
								"methods":{
									"source":"{{ n_ozehB.outputs.item[0].parties[0].methods }}",
									"ua:type":"mappedArray",
									"items":"{{ n_ozehB.outputs.item[0].parties[0].methods[0] }}"
								},
								"name":"{{ n_ozehB.outputs.item[0].parties[0].name }}",
								"phoneNumber":"{{ n_ozehB.outputs.item[0].parties[0].phoneNumber }}",
								"speakerId":"{{ n_ozehB.outputs.item[0].parties[0].speakerId }}",
								"title":"{{ n_ozehB.outputs.item[0].parties[0].title }}",
								"userId":"{{ n_ozehB.outputs.item[0].parties[0].userId }}"
							}
						},
						"knoledge":{
							"aiAgentId":"{{ n_0yHNy.outputs.aiAgentId }}",
							"applicationInfo":{
								"context":{
									"connectionId":"{{ n_0yHNy.outputs.knowledge.applicationInfo.context.connectionId }}"
								}
							},
							"indexingVersion":"{{ n_0yHNy.outputs.knowledge.indexingVersion }}",
							"readVersion":"{{ n_0yHNy.outputs.knowledge.readVersion }}",
							"lastSyncTime":"{{ n_0yHNy.outputs.knowledge.lastSyncTime }}",
							"cursorObject":"{{ n_0yHNy.outputs.knowledge.cursorObject }}"
						},
						"knowledgeId":"{{ n_0yHNy.outputs.knowledgeId }}",
						"sharedWithIds":{
							"source":"{{ n_oEvYI.outputs.items }}",
							"ua:type":"mappedArray",
							"items":"{{ n_oEvYI.outputs.items[0] }}"
						}
					}
				},
				"version":"-1"
			},
			"skip":false,
			"subTitle":"Single Call Automation",
			"title":"Call automation (batch)",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ozehB@_NrjNd-1@l",
			"id":"n_3JWWe",
			"index":17,
			"inputs":{
				"filters":[
					{
						"property":"{{ Mj4vZ.outputs.result.newFilter.callTranscripts }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":464,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_3JWWe@n_ozehB@_NrjNd-1@l@y",
			"id":"n_dKKcA",
			"index":18,
			"inputs":{
				"automationId":"688f6b4d13532e088370a029",
				"runtimeConnections":{
					"gong":"{{ n_0yHNy.outputs.knowledge.applicationInfo.context.connectionId }}"
				},
				"synchronous":false,
				"version":"-1",
				"parameters":{
					"knowledge":{
						"aiAgentId":"{{ n_0yHNy.outputs.aiAgentId }}",
						"applicationInfo":{
							"context":{
								"connectionId":"{{ n_0yHNy.outputs.knowledge.applicationInfo.context.connectionId }}"
							}
						},
						"indexingVersion":"{{ n_0yHNy.outputs.knowledge.indexingVersion }}",
						"readVersion":"{{ n_0yHNy.outputs.knowledge.readVersion }}",
						"lastSyncTime":"{{ n_0yHNy.outputs.knowledge.lastSyncTime }}"
					},
					"knowledgeId":"{{ n_0yHNy.outputs.knowledgeId }}",
					"sharedWithIds":{
						"ua:type":"mappedArray",
						"source":"{{ n_oEvYI.outputs.items }}",
						"items":"{{ n_oEvYI.outputs.items[0] }}"
					},
					"callIds":{
						"source":"{{ n_ozehB.outputs.item }}",
						"ua:type":"mappedArray",
						"items":"{{ n_ozehB.outputs.item[0].metaData.id }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.calls.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"n_UH4sB",
			"index":19,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"hasMore":{
							"type":"boolean",
							"title":"Has More"
						},
						"knowledgeDownloadFinished":{
							"type":"boolean",
							"title":"Knowledge Download Finished"
						},
						"cursor":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Cursor"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"downloaderConfig":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Downloader Config"
						},
						"userSpecifiedEndTime":{
							"type":"integer",
							"title":"User Specified End Time"
						},
						"cursor":{
							"type":"string",
							"title":"Cursor"
						},
						"calls":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Calls"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"import java.time.*\n\ndef convertToUnixTimestamp = { isoTimestamp ->\n    isoTimestamp ? Instant.parse(isoTimestamp).toEpochMilli() : null\n}\n\nboolean hasMore = false\nboolean channelApiHasMore = false\ndef lastCallScheduledTime\n\nif(binding.hasVariable('cursor') && cursor.length() > 0){\n    channelApiHasMore = true\n}\n\nif (binding.hasVariable('calls') && calls.size() != 0) {\n    def stringTime = calls[-1]\n    lastCallScheduledTime = (convertToUnixTimestamp(stringTime) / 1000).longValue()\n    lastCallScheduledTime = lastCallScheduledTime + 1\n}\n\n\ndef currentTimeEpoch = binding.hasVariable('downloaderConfig') ? downloaderConfig.currentTimeEpoch : 0\ndef currentTimeEpochInSeconds = (currentTimeEpoch/1000).longValue()\n\nhasMore = channelApiHasMore && (currentTimeEpochInSeconds >= lastCallScheduledTime)   \nboolean userSpecifiedTimeReached = binding.hasVariable(\"userSpecifiedEndTime\") ? ((lastCallScheduledTime != null && lastCallScheduledTime > userSpecifiedEndTime) || currentTimeEpochInSeconds > userSpecifiedEndTime ) : false \n\nreturn [\n    \"cursor\": [\"lastCallScheduledTime\": lastCallScheduledTime],\n    \"hasMore\" : hasMore,\n    \"knowledgeDownloadFinished\" : !channelApiHasMore && userSpecifiedTimeReached\n]\n",
				"parameters":{
					"downloaderConfig":"{{ n_0yHNy.outputs.downloaderConfig }}",
					"userSpecifiedEndTime":"{{ Mj4vZ.outputs.result.newFilter.toDateTime }}",
					"cursor":"{{ FXLAi.outputs.records.cursor }}",
					"calls":{
						"source":"{{ FXLAi.outputs.calls }}",
						"ua:type":"mappedArray",
						"items":"{{ FXLAi.outputs.calls[0].metaData.scheduled }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Extract Cursor ",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_NrjNd-1",
			"id":"n_8mAT4",
			"index":20,
			"inputs":{
				"result":{
					"downloadedEntitiesCount":"{{ FXLAi.outputs.records.currentPageSize }}",
					"knowledgeDownloadFinished":"{{ n_UH4sB.outputs.result.knowledgeDownloadFinished }}",
					"cursor":"{{ n_UH4sB.outputs.result.cursor }}",
					"hasMore":"{{ n_UH4sB.outputs.result.hasMore }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":0,
	"runtimeConnectionAppNames":[
		"gong"
	],
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":false,
		"enableRunLogging":true,
		"enableVariableLogging":false,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"knowledge_v2"
	],
	"version":97
}