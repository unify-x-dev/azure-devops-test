{
	"appsUsed":[
		
	],
	"createdTime":1729080226808,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296269680,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfd4d672fcc41fb70f2e6",
		"status":"DEPLOYED",
		"version":76,
		"workflowVersion":107
	},
	"description":"",
	"edges":[
		{
			"fromNodeId":"Cs8W8",
			"priority":0,
			"skip":false,
			"toNodeId":"Tj7Fm",
			"type":"next"
		},
		{
			"fromNodeId":"Tj7Fm",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"Mpawx",
			"type":"if"
		},
		{
			"fromNodeId":"Mpawx",
			"priority":0,
			"skip":false,
			"toNodeId":"_4XK6R",
			"type":"next"
		},
		{
			"fromNodeId":"Tj7Fm",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_4XK6R",
			"type":"next"
		},
		{
			"fromNodeId":"_4XK6R",
			"priority":0,
			"skip":false,
			"toNodeId":"arxw4",
			"type":"next"
		},
		{
			"fromNodeId":"arxw4",
			"priority":0,
			"skip":false,
			"toNodeId":"BluMq",
			"type":"next"
		},
		{
			"fromNodeId":"BluMq",
			"priority":0,
			"skip":false,
			"toNodeId":"BNU3a",
			"type":"next"
		},
		{
			"fromNodeId":"BNU3a",
			"priority":0,
			"skip":false,
			"toNodeId":"aLMrC",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"670faba2ed06293383433d38",
	"lastModifiedBy":0,
	"lcName":"data rag - search records ",
	"modifiedTime":1761722819877,
	"name":"DATA RAG - Search Records ",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":37,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"Cs8W8",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"data":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"platform_name":{
										"type":"string",
										"title":"platform_name"
									},
									"column_name":{
										"type":"string",
										"title":"column_name"
									},
									"table_name":{
										"type":"string",
										"title":"table_name"
									},
									"column_description":{
										"type":"string",
										"title":"column_description"
									},
									"column_datatype":{
										"type":"string",
										"title":"column_datatype"
									},
									"metadata":{
										"type":"string",
										"title":"metadata"
									},
									"column_label":{
										"type":"string",
										"title":"column_label"
									},
									"knowledgeId":{
										"type":"string",
										"title":"Knowledge Id"
									},
									"tableDescription":{
										"type":"string",
										"title":"tableDescription"
									},
									"tablePrimaryKey":{
										"type":"string",
										"title":"tablePrimaryKey"
									},
									"tableNameUI":{
										"type":"string",
										"title":"Table Name UI"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"data",
							"required":[]
						},
						"success":{
							"type":"string",
							"title":"Success"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"query":{
							"type":"string",
							"title":"query"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						},
						"knowledges":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Knowledges"
						},
						"tableIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Table Ids"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":11,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"Tj7Fm",
			"index":2,
			"inputs":{
				"filters":[
					{
						"property":"=LEN({{ Cs8W8.outputs.knowledges }})",
						"filter":{
							"operator":"EQUAL",
							"value":"0"
						}
					},
					{
						"property":"{{ Cs8W8.outputs.knowledges[0].id }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":11,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Tj7Fm@Cs8W8-1@y",
			"id":"Mpawx",
			"index":3,
			"inputs":{
				"result":{
					"success":"true"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.knowledgeIds.items",
					"root.parameters.tableIds.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":78,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"_4XK6R",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"filter":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Filter"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"knowledgeIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Knowledge Ids"
						},
						"tableIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Table Ids"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def combinedFilter = [\n    op: 'AND',\n    values: []\n]\n\nif(binding.hasVariable('knowledgeIds')) {\ndef knowledgeFilter = null\n    knowledgeFilter = [\n        field: 'properties.knowledgeId',\n        op: 'IN',\n        values: knowledgeIds\n    ]    \n    combinedFilter['values'].add(knowledgeFilter)\n}\n\nif(binding.hasVariable(\"tableIds\")) {\n    def tableFilter = null\n    tableFilter = [\n        field: 'properties.tableId',\n        op: 'IN',\n        values: tableIds\n    ]\n    combinedFilter['values'].add(tableFilter)\n}\n\nreturn ['filter': combinedFilter['values'].size() > 0 ? combinedFilter : null]\n",
				"isAsync":false,
				"parameters":{
					"knowledgeIds":{
						"ua:type":"mappedArray",
						"source":"{{ Cs8W8.outputs.knowledges }}",
						"items":"{{ Cs8W8.outputs.knowledges[0].id }}"
					},
					"tableIds":{
						"source":"{{ Cs8W8.outputs.tableIds }}",
						"ua:type":"mappedArray",
						"items":"{{ Cs8W8.outputs.tableIds[0] }}"
					}
				}
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"fetch filter",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":359,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"arxw4",
			"index":5,
			"inputs":{
				"automationId":"67d5af775c39266befb87be3",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"aiAgentId":"{{ Cs8W8.outputs.aiAgentId }}",
					"purpose":"AGENTS_embedModel"
				}
			},
			"skip":false,
			"subTitle":"getModelId",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":13,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"BluMq",
			"index":6,
			"inputs":{
				"automationId":"6784b9216fb83f0972c5625d",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"userQuery":"{{ Cs8W8.outputs.query }}",
					"modelId":"{{ arxw4.outputs.modelId }}"
				}
			},
			"skip":false,
			"subTitle":"fetchEmbeddings",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":359,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"BNU3a",
			"index":7,
			"inputs":{
				"automationId":"682389ac4ac3830d083e2c7d",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"embeddings":{
						"source":"{{ BluMq.outputs.embeddings }}",
						"ua:type":"mappedArray",
						"items":"{{ BluMq.outputs.embeddings[0] }}"
					},
					"filter":"{{ _4XK6R.outputs.result.filter }}"
				}
			},
			"skip":false,
			"subTitle":"FetchMetadata",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.result.data.source",
					"root.result.data.ua:type",
					"root.result.data.items.platform_name",
					"root.result.data.items.column_name",
					"root.result.data.items.table_name",
					"root.result.data.items.column_datatype",
					"root.result.data.items.metadata",
					"root.result.data.items.column_label",
					"root.result.data.items.knowledgeId",
					"root.result.data.items.tablePrimaryKey"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":33,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Cs8W8-1",
			"id":"aLMrC",
			"index":8,
			"inputs":{
				"result":{
					"data":{
						"ua:type":"mappedArray",
						"items":{
							"column_name":"{{ BNU3a.outputs.records[0].document.properties.columnName }}",
							"table_name":"{{ BNU3a.outputs.records[0].document.properties.tableName }}",
							"column_description":"{{ BNU3a.outputs.records[0].document.properties.description }}",
							"column_datatype":"{{ BNU3a.outputs.records[0].document.properties.type }}",
							"metadata":"{{ BNU3a.outputs.records[0].document.properties.metadata }}",
							"column_label":"{{ BNU3a.outputs.records[0].document.properties.label }}",
							"knowledgeId":"{{ BNU3a.outputs.records[0].document.properties.knowledgeId }}",
							"tableDescription":"{{ BNU3a.outputs.records[0].document.properties.tableDescription }}",
							"tablePrimaryKey":"{{ BNU3a.outputs.records[0].document.properties.tablePrimaryKey }}",
							"tableNameUI":"{{ BNU3a.outputs.records[0].document.properties.tableNameUI }}",
							"platform_name":"{{ BNU3a.outputs.records[0].document.properties.metadataSource }}"
						},
						"source":"{{ BNU3a.outputs.records }}"
					},
					"success":"true"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Return data to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":398,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent"
	],
	"version":109
}