{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1736763610743,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1761424570727,
		"deployedBy":309,
		"deployedDefinitionId":"68fd34babab8db141ba5ff64",
		"status":"DEPLOYED",
		"version":93,
		"workflowVersion":153
	},
	"edges":[
		{
			"fromNodeId":"EIiwt",
			"priority":0,
			"skip":false,
			"toNodeId":"n_cuOAL",
			"type":"next"
		},
		{
			"fromNodeId":"n_cuOAL",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vLLHr",
			"type":"next"
		},
		{
			"fromNodeId":"n_vLLHr",
			"priority":0,
			"skip":false,
			"toNodeId":"Il52k",
			"type":"next"
		},
		{
			"fromNodeId":"Il52k",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ZPdEi",
			"type":"next"
		},
		{
			"fromNodeId":"n_ZPdEi",
			"priority":0,
			"skip":false,
			"toNodeId":"2t2pg",
			"type":"next"
		},
		{
			"fromNodeId":"2t2pg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_stEdU",
			"type":"next"
		},
		{
			"fromNodeId":"n_stEdU",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_yopss",
			"type":"if"
		},
		{
			"fromNodeId":"n_yopss",
			"priority":0,
			"skip":false,
			"toNodeId":"n_oTH0W",
			"type":"next"
		},
		{
			"fromNodeId":"n_stEdU",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_fSAFg",
			"type":"next"
		},
		{
			"fromNodeId":"n_oTH0W",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vLhsV",
			"type":"next"
		},
		{
			"fromNodeId":"_fSAFg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vLhsV",
			"type":"next"
		},
		{
			"fromNodeId":"n_vLhsV",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_FYo6S",
			"type":"next"
		},
		{
			"fromNodeId":"n_vLhsV",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_l5eOd",
			"type":"if"
		},
		{
			"fromNodeId":"_FYo6S",
			"priority":0,
			"skip":false,
			"toNodeId":"n_l5eOd",
			"type":"next"
		},
		{
			"fromNodeId":"n_l5eOd",
			"priority":0,
			"skip":false,
			"toNodeId":"_LDYaq",
			"type":"next"
		},
		{
			"fromNodeId":"_LDYaq",
			"priority":0,
			"skip":false,
			"toNodeId":"IZ4CM",
			"type":"next"
		},
		{
			"fromNodeId":"IZ4CM",
			"priority":0,
			"skip":false,
			"toNodeId":"YS5lb",
			"type":"next"
		},
		{
			"fromNodeId":"YS5lb",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"YS5lb@1",
			"type":"branch"
		},
		{
			"fromNodeId":"YS5lb@1",
			"priority":0,
			"skip":false,
			"toNodeId":"EungR",
			"type":"next"
		},
		{
			"fromNodeId":"EungR",
			"priority":0,
			"skip":false,
			"toNodeId":"RSPhZ",
			"type":"next"
		},
		{
			"fromNodeId":"RSPhZ",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"8LbH2",
			"type":"if"
		},
		{
			"fromNodeId":"YS5lb",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"YS5lb@2",
			"type":"branch"
		},
		{
			"fromNodeId":"YS5lb@2",
			"priority":0,
			"skip":false,
			"toNodeId":"mrAC4",
			"type":"next"
		},
		{
			"fromNodeId":"mrAC4",
			"priority":0,
			"skip":false,
			"toNodeId":"kKbzd",
			"type":"next"
		},
		{
			"fromNodeId":"kKbzd",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"GyeR4",
			"type":"if"
		},
		{
			"fromNodeId":"GyeR4",
			"priority":0,
			"skip":false,
			"toNodeId":"WjCb4",
			"type":"next"
		},
		{
			"fromNodeId":"WjCb4",
			"priority":0,
			"skip":false,
			"toNodeId":"dODk0",
			"type":"next"
		},
		{
			"fromNodeId":"dODk0",
			"priority":0,
			"skip":false,
			"toNodeId":"95uWL",
			"type":"next"
		},
		{
			"fromNodeId":"95uWL",
			"priority":0,
			"skip":false,
			"toNodeId":"y2UIy",
			"type":"next"
		},
		{
			"fromNodeId":"y2UIy",
			"priority":0,
			"skip":false,
			"toNodeId":"AdGNT",
			"type":"next"
		},
		{
			"fromNodeId":"AdGNT",
			"priority":0,
			"skip":false,
			"toNodeId":"O4EeA",
			"type":"next"
		},
		{
			"fromNodeId":"O4EeA",
			"priority":0,
			"skip":false,
			"toNodeId":"vuObq",
			"type":"next"
		},
		{
			"fromNodeId":"kKbzd",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"vuObq",
			"type":"next"
		},
		{
			"fromNodeId":"vuObq",
			"priority":0,
			"skip":false,
			"toNodeId":"V3W0i",
			"type":"next"
		},
		{
			"fromNodeId":"V3W0i",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"V3W0i@1",
			"type":"branch"
		},
		{
			"fromNodeId":"V3W0i@1",
			"priority":0,
			"skip":false,
			"toNodeId":"6dnmo",
			"type":"next"
		},
		{
			"fromNodeId":"V3W0i",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"V3W0i@2",
			"type":"branch"
		},
		{
			"fromNodeId":"V3W0i@2",
			"priority":0,
			"skip":false,
			"toNodeId":"UVUnc",
			"type":"next"
		},
		{
			"fromNodeId":"V3W0i",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ZByHg",
			"type":"branch"
		},
		{
			"fromNodeId":"YS5lb",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gqaCL",
			"type":"branch"
		},
		{
			"fromNodeId":"8LbH2",
			"priority":0,
			"skip":false,
			"toNodeId":"vXqrq",
			"type":"next"
		},
		{
			"fromNodeId":"RSPhZ",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"vXqrq",
			"type":"next"
		},
		{
			"fromNodeId":"6dnmo",
			"priority":0,
			"skip":false,
			"toNodeId":"vXqrq",
			"type":"next"
		},
		{
			"fromNodeId":"UVUnc",
			"priority":0,
			"skip":false,
			"toNodeId":"vXqrq",
			"type":"next"
		},
		{
			"fromNodeId":"n_ZByHg",
			"priority":0,
			"skip":false,
			"toNodeId":"vXqrq",
			"type":"next"
		},
		{
			"fromNodeId":"n_gqaCL",
			"priority":0,
			"skip":false,
			"toNodeId":"vXqrq",
			"type":"next"
		},
		{
			"fromNodeId":"vXqrq",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"bXPoI",
			"type":"if"
		},
		{
			"fromNodeId":"vXqrq",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"15max",
			"type":"next"
		},
		{
			"fromNodeId":"15max",
			"priority":0,
			"skip":false,
			"toNodeId":"VsC2W",
			"type":"loop"
		},
		{
			"fromNodeId":"VsC2W",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"15max",
			"type":"next"
		},
		{
			"fromNodeId":"15max",
			"priority":0,
			"skip":false,
			"toNodeId":"beSYu",
			"type":"next"
		},
		{
			"fromNodeId":"beSYu",
			"priority":0,
			"skip":false,
			"toNodeId":"KG2sk",
			"type":"loop"
		},
		{
			"fromNodeId":"KG2sk",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"beSYu",
			"type":"next"
		},
		{
			"fromNodeId":"beSYu",
			"priority":0,
			"skip":false,
			"toNodeId":"WXzED",
			"type":"next"
		},
		{
			"fromNodeId":"WXzED",
			"priority":0,
			"skip":false,
			"toNodeId":"t4sCQ",
			"type":"next"
		},
		{
			"fromNodeId":"t4sCQ",
			"priority":0,
			"skip":false,
			"toNodeId":"nWEzE",
			"type":"next"
		},
		{
			"fromNodeId":"bXPoI",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7sG9j",
			"type":"next"
		},
		{
			"fromNodeId":"nWEzE",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7sG9j",
			"type":"next"
		},
		{
			"fromNodeId":"n_7sG9j",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DDBp2",
			"type":"if"
		},
		{
			"fromNodeId":"n_DDBp2",
			"priority":0,
			"skip":false,
			"toNodeId":"kdyzQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_7sG9j",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"kdyzQ",
			"type":"next"
		},
		{
			"fromNodeId":"kdyzQ",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"nM9oM",
			"type":"next"
		},
		{
			"fromNodeId":"nM9oM",
			"priority":0,
			"skip":false,
			"toNodeId":"St1Vn",
			"type":"next"
		},
		{
			"fromNodeId":"kdyzQ",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"hmkkt",
			"type":"if"
		},
		{
			"fromNodeId":"St1Vn",
			"priority":0,
			"skip":false,
			"toNodeId":"hmkkt",
			"type":"next"
		},
		{
			"fromNodeId":"hmkkt",
			"priority":0,
			"skip":false,
			"toNodeId":"wqGoc",
			"type":"next"
		},
		{
			"fromNodeId":"wqGoc",
			"priority":0,
			"skip":false,
			"toNodeId":"n_eXp8p",
			"type":"next"
		},
		{
			"fromNodeId":"n_eXp8p",
			"priority":0,
			"skip":false,
			"toNodeId":"JbGgg",
			"type":"next"
		},
		{
			"fromNodeId":"JbGgg",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"ezyvl",
			"type":"next"
		},
		{
			"fromNodeId":"ezyvl",
			"priority":0,
			"skip":false,
			"toNodeId":"sX4HL",
			"type":"next"
		},
		{
			"fromNodeId":"sX4HL",
			"priority":0,
			"skip":false,
			"toNodeId":"n_fYTPB",
			"type":"next"
		},
		{
			"fromNodeId":"JbGgg",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"IRkAI",
			"type":"error"
		},
		{
			"fromNodeId":"IRkAI",
			"priority":0,
			"skip":false,
			"toNodeId":"_QOP3I",
			"type":"next"
		},
		{
			"fromNodeId":"_QOP3I",
			"priority":0,
			"skip":false,
			"toNodeId":"CvguA",
			"type":"next"
		},
		{
			"fromNodeId":"n_fYTPB",
			"priority":0,
			"skip":false,
			"toNodeId":"boutm",
			"type":"next"
		},
		{
			"fromNodeId":"CvguA",
			"priority":0,
			"skip":false,
			"toNodeId":"boutm",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"6784e8da2bf24b00b3975b17",
	"lastModifiedBy":0,
	"lcName":"fetch relevant knowledge chunks",
	"modifiedTime":1761722719775,
	"name":"Fetch Relevant Knowledge Chunks",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":46,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"EIiwt",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"relevantContent":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"string",
										"title":"Content"
									},
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Chunk Metadata"
									},
									"chunkId":{
										"type":"string",
										"title":"Chunk Id"
									},
									"knowledgeType":{
										"type":"string",
										"title":"Knowledge Type"
									},
									"score":{
										"type":"number",
										"title":"Score"
									},
									"knowledgeId":{
										"type":"string",
										"title":"Knowledge Id"
									},
									"knowledgeSetId":{
										"type":"string",
										"title":"Knowledge Set Id"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Relevant Content",
							"required":[]
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"userQuery":{
							"type":"string",
							"title":"User Query"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						},
						"userEmail":{
							"type":"string",
							"title":"User Email"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"filter":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Filter"
						},
						"onlyPeople":{
							"type":"boolean",
							"title":"Only People"
						},
						"knowledgeIds":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"properties":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Properties"
									},
									"id":{
										"type":"string",
										"title":"Id"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Knowledge Ids"
						},
						"knowledgeSetIds":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Knowledge Set Ids"
						},
						"skipSourceRBAC":{
							"type":"boolean",
							"title":"Skip Source RBAC"
						},
						"filterByLLM":{
							"type":"object",
							"properties":{
								"knowledgeTags":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"Knowledge Tags"
								},
								"knowledgeSetTags":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"Knowledge Set Tags"
								}
							},
							"additionalProperties":false,
							"title":"Filter By LLM",
							"required":[]
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_get_session_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_cuOAL",
			"index":2,
			"inputs":{
				"variableSchema":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Fetch currentMessageId",
			"title":"Get Session Variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":93,
				"resourceName":"variable_by_unifyapps_set_session_variable",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_vLLHr",
			"index":3,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"onlyPeople":{
							"type":"boolean",
							"title":"Only People"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"onlyPeople":"{{ EIiwt.outputs.onlyPeople }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"onlyPeople":{
							"type":"boolean",
							"title":"Only People"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Set Session Variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":248,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"Il52k",
			"index":4,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"knowledgeIds",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"knowledgeIds",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"embedding Models",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_ZPdEi",
			"index":5,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"knowledgeIds":{
							"type":"array",
							"items":{
								"type":"object"
							},
							"title":"knowledgeIds"
						}
					}
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"knowledgeIds":{
							"type":"array",
							"items":{
								"type":"object"
							},
							"title":"knowledgeIds"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":20,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"2t2pg",
			"index":6,
			"inputs":{
				"automationId":"679c6123a6583456a71988d2",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ EIiwt.outputs.caseId }}",
					"aiAgentId":"{{ EIiwt.outputs.aiAgentId }}",
					"filter":"{{ EIiwt.outputs.filter }}",
					"fetchKnowledgeSetKnowledges":true,
					"filterByLLM":{
						"knowledgeTags":{
							"source":"{{ EIiwt.outputs.filterByLLM.knowledgeTags }}",
							"ua:type":"mappedArray",
							"items":"{{ EIiwt.outputs.filterByLLM.knowledgeTags[0] }}"
						},
						"knowledgeSetTags":{
							"source":"{{ EIiwt.outputs.filterByLLM.knowledgeSetTags }}",
							"ua:type":"mappedArray",
							"items":"{{ EIiwt.outputs.filterByLLM.knowledgeSetTags[0] }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Fetch applicable knowledges",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_stEdU",
			"index":7,
			"inputs":{
				"filters":[
					{
						"property":"{{ EIiwt.outputs.knowledgeIds }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.knowledgeIdsApplicable1.items",
					"root.parameters.knowledgeIdsApplicable2.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_stEdU@4ZR9C-1@y",
			"id":"n_yopss",
			"index":8,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"knowledgeIdsApplicableFinal":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Knowledge Ids Applicable Final"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"knowledgeIdsApplicable1":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Knowledge Ids Applicable 1"
						},
						"knowledgeIdsApplicable2":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Knowledge Ids Applicable 2"
						}
					}
				},
				"code":"def intersectKnowledge = { List<Map> list1, List<Map> list2, boolean preferSecond = true ->\ndef byId1 = (list1 ?: []).collectEntries { [(it.id): it] }\ndef byId2 = (list2 ?: []).collectEntries { [(it.id): it] }\ndef commonIds = byId1.keySet().intersect(byId2.keySet())\n\ncommonIds.collect { id ->\n    def chosen = preferSecond ? byId2[id] : byId1[id]\n    [id: id, properties: chosen.properties]\n}\n}\n\nif(!binding.hasVariable('knowledgeIdsApplicable1'))return [\"knowledgeIdsApplicableFinal\":knowledgeIdsApplicable2]\ndef intersection = intersectKnowledge(knowledgeIdsApplicable1, knowledgeIdsApplicable2, true)\nreturn [\"knowledgeIdsApplicableFinal\":intersection]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"knowledgeIdsApplicable1":{
						"source":"{{ EIiwt.outputs.knowledgeIds }}",
						"ua:type":"mappedArray",
						"items":"{{ EIiwt.outputs.knowledgeIds[0] }}"
					},
					"knowledgeIdsApplicable2":{
						"source":"{{ 2t2pg.outputs.knowledges }}",
						"ua:type":"mappedArray",
						"items":"{{ 2t2pg.outputs.knowledges[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_stEdU@4ZR9C-1@y",
			"id":"n_oTH0W",
			"index":9,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_ZPdEi.outputs.knowledgeIds }}",
						"value":{
							"source":"{{ n_yopss.outputs.result.knowledgeIdsApplicableFinal }}",
							"ua:type":"mappedArray",
							"items":"{{ n_yopss.outputs.result.knowledgeIdsApplicableFinal[0] }}"
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":447,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_stEdU@4ZR9C-1@n",
			"id":"_fSAFg",
			"index":10,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_ZPdEi.outputs.knowledgeIds }}",
						"value":{
							"ua:type":"mappedArray",
							"source":"{{ 2t2pg.outputs.knowledges }}",
							"items":"{{ 2t2pg.outputs.knowledges[0] }}"
						}
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_vLhsV",
			"index":11,
			"inputs":{
				"filters":[
					{
						"property":"{{ EIiwt.outputs.skipSourceRBAC }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Skip Source RBAC",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":56,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_vLhsV@4ZR9C-1@n",
			"id":"_FYo6S",
			"index":12,
			"inputs":{
				"automationId":"6704f23182227947dd32e79c",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"userEmailAddress":"{{ EIiwt.outputs.userEmail }}",
					"parentType":"Retrieval",
					"knowledgeIds":{
						"ua:type":"mappedArray",
						"items":"=MAPGET({{ n_ZPdEi.outputs.knowledgeIds }},\"id\")",
						"source":"{{ n_ZPdEi.outputs.knowledgeIds }}"
					},
					"knowledgeSetId":{
						"source":"{{ 2t2pg.outputs.knowledgeSets }}",
						"ua:type":"mappedArray",
						"items":"{{ 2t2pg.outputs.knowledgeSets[0].id }}"
					}
				}
			},
			"skip":false,
			"subTitle":"rbac Details",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":840,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_l5eOd",
			"index":13,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"EQUAL",
								"value":"raw_data_archives"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"knowledge_archive_store",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":20
				},
				"numberOfRecordsToFetch":"SINGLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"archived rawDataIds",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":11,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"_LDYaq",
			"index":14,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object",
									"properties":{
										"score":{
											"type":"number",
											"title":"score"
										},
										"document":{
											"type":"object",
											"title":"document"
										}
									},
									"additionalProperties":false
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"relevantContent",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"relevantContent",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"score":{
										"type":"number",
										"title":"score"
									},
									"document":{
										"type":"object",
										"title":"document"
									}
								}
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"relevant chunks",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":17,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"IZ4CM",
			"index":15,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"customMetadataMatched":{
							"type":"boolean",
							"title":"Custom Metadata Matched"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"customMetadataMatched":{
							"type":"boolean",
							"title":"Custom Metadata Matched"
						},
						"_ua_variableDetails":{
							"items":{
								"properties":{
									"dataType":{
										"description":"Data type of the variable",
										"type":"string"
									},
									"description":{
										"description":"Description of the variable",
										"type":"string"
									},
									"name":{
										"description":"Name of the variable",
										"type":"string"
									}
								},
								"type":"object"
							},
							"title":"Variable Details",
							"type":"array"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"customMetaMatched",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"YS5lb",
			"index":16,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"custom metadata filter",
							"conditions":{
								"filters":[
									{
										"property":"1",
										"filter":{
											"operator":"EQUAL",
											"value":"1"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"normal"
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":17,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@1",
			"id":"YS5lb@1",
			"index":17,
			"inputs":{
				"name":"custom metadata filter",
				"conditions":{
					"filters":[
						{
							"property":"1",
							"filter":{
								"operator":"EQUAL",
								"value":"1"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":20,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@1",
			"id":"EungR",
			"index":18,
			"inputs":{
				"automationId":"679b7fdad2256d4d7f3277fe",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"userQuery":"{{ EIiwt.outputs.userQuery }}",
					"includeCustomMetadataFilter":true,
					"filter":"{{ EIiwt.outputs.filter }}",
					"sharedWithIds":{
						"source":"{{ _FYo6S.outputs.sharedWithIds }}",
						"ua:type":"mappedArray",
						"items":"{{ _FYo6S.outputs.sharedWithIds[0] }}"
					},
					"knowledges":{
						"ua:type":"mappedArray",
						"source":"{{ n_ZPdEi.outputs.knowledgeIds }}",
						"items":"{{ n_ZPdEi.outputs.knowledgeIds[0] }}"
					},
					"knowledgeSets":{
						"source":"{{ 2t2pg.outputs.knowledgeSets }}",
						"ua:type":"mappedArray",
						"items":"{{ 2t2pg.outputs.knowledgeSets[0] }}"
					},
					"archivedRawDataIds":{
						"source":"{{ n_l5eOd.outputs.properties.rawDataIds }}",
						"ua:type":"mappedArray",
						"items":"{{ n_l5eOd.outputs.properties.rawDataIds[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"custom metadata",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":16,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@1",
			"id":"RSPhZ",
			"index":19,
			"inputs":{
				"filters":[
					{
						"property":"{{ EungR.outputs.relevantContent[0].score }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":16,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"RSPhZ@YS5lb@4ZR9C-1@1@y",
			"id":"8LbH2",
			"index":20,
			"inputs":{
				"variables":[
					{
						"source":"{{ IZ4CM.outputs.customMetadataMatched }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"customMetadata",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":17,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@2",
			"id":"YS5lb@2",
			"index":21,
			"inputs":{
				"name":"normal"
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@2",
			"id":"mrAC4",
			"index":22,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray",
					"source":"{{ y2UIy.outputs.result.variations }}",
					"items":"{{ y2UIy.outputs.result.variations[0] }}"
				},
				"ua:title":"variations",
				"ua:list_type":"STRING"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"variations",
							"disableActions":true,
							"items":{
								"type":"string"
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":395,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@2",
			"id":"kKbzd",
			"index":23,
			"inputs":{
				"filters":[
					{
						"property":"{{ WTBLy.outputs.properties.preProcessingSettings.disableKnowledgeQueryGeneration }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"GyeR4",
			"index":24,
			"inputs":{
				"input_schema":{
					"user_query":"{{ EIiwt.outputs.userQuery }}"
				},
				"template_id":"e_683bec7871694a4135c448ac"
			},
			"skip":false,
			"subTitle":"Template",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":405,
				"resourceName":"variable_by_unifyapps_get_session_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"WjCb4",
			"index":25,
			"inputs":{
				"variableSchema":{
					"type":"object",
					"properties":{
						"ua_taskExecutionModel":{
							"type":"string",
							"title":"Ua Task Execution Model"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"GetTaskExecutionModel",
			"title":"Get Session Variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":416,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"dODk0",
			"index":26,
			"inputs":{
				"automationId":"66dfd76eb70dad256986b784",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"type":"text",
					"response_format":"json",
					"caseId":"{{ EIiwt.outputs.caseId }}",
					"aiAgentId":"{{ EIiwt.outputs.aiAgentId }}",
					"content":"{{ GyeR4.outputs.output }}",
					"modelId":"{{ WjCb4.outputs.ua_taskExecutionModel }}"
				}
			},
			"skip":false,
			"subTitle":"Simple Call LLM",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"95uWL",
			"index":27,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"jsonInput":{
							"type":"string",
							"title":"Json Input"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"jsonInput":{
							"type":"string",
							"title":"Json Input"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def jsonInput = binding.hasVariable('jsonInput') ? jsonInput : \"\"\n\ndef startIndex = jsonInput.indexOf('{')\ndef endIndex = jsonInput.lastIndexOf('}')\n\nif (startIndex != -1 && endIndex != -1 && endIndex > startIndex) {\n    jsonInput = jsonInput.substring(startIndex, endIndex + 1).trim()\n} else {\n    jsonInput = \"\"\n}\nreturn [\"jsonInput\":jsonInput]",
				"isAsync":false,
				"parameters":{
					"jsonInput":"{{ dODk0.outputs.llmResponse }}"
				}
			},
			"skip":false,
			"subTitle":"clean LLM response",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"utility_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"utility_by_unifyapps_to_json_object",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"y2UIy",
			"index":28,
			"inputs":{
				"jsonSchema":{
					"type":"object",
					"properties":{
						"original_query":{
							"type":"string",
							"title":"original_query"
						},
						"keywords":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"keywords"
						},
						"entities":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"entities"
						},
						"action":{
							"type":"string",
							"title":"action"
						},
						"topic":{
							"type":"string",
							"title":"topic"
						},
						"variations":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"variations"
						},
						"sample_answers":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"sample_answers"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"jsonString":"{{ 95uWL.outputs.result.jsonInput }}"
			},
			"skip":false,
			"subTitle":"Utility",
			"title":"Deserialise string to JSON object",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.keywords.items",
					"root.parameters.entities.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"AdGNT",
			"index":29,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"keywords":{
							"type":"string",
							"title":"Keywords"
						}
					},
					"additionalProperties":false,
					"required":[
						"keywords"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"keywords":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"keywords"
						},
						"entities":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"entities"
						},
						"action":{
							"type":"string",
							"title":"action"
						},
						"topic":{
							"type":"string",
							"title":"topic"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def keywordsStr = '';\nif(binding.hasVariable('keywords')) {\n    keywords.each { keyword ->\n        if (keywordsStr) {\n            keywordsStr += ', ';\n        }\n        keywordsStr += keyword;\n    }\n}\n\nif(binding.hasVariable('entities')) {\n    def entitiesStr = '';\n    entities.each { entity ->\n        if (entitiesStr) {\n            entitiesStr += ', ';\n        }\n        entitiesStr += entity;\n    }\n    keywordsStr += ' ' + entitiesStr;\n}\n\nif(binding.hasVariable('action')) {\n    keywordsStr += ' ' + action;\n}\n\nif(binding.hasVariable('topic')) {\n    keywordsStr += ' ' + topic;\n}\n\nreturn ['keywords': keywordsStr]",
				"parameters":{
					"action":"{{ y2UIy.outputs.result.action }}",
					"topic":"{{ y2UIy.outputs.result.topic }}",
					"keywords":{
						"source":"{{ y2UIy.outputs.result.keywords }}",
						"ua:type":"mappedArray",
						"items":"{{ y2UIy.outputs.result.keywords[0] }}"
					},
					"entities":{
						"source":"{{ y2UIy.outputs.result.entities }}",
						"ua:type":"mappedArray",
						"items":"{{ y2UIy.outputs.result.entities[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":396,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kKbzd@YS5lb@4ZR9C-1@2@y",
			"id":"O4EeA",
			"index":30,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ y2UIy.outputs.result.variations }}",
					"items":"{{ y2UIy.outputs.result.variations[0] }}"
				},
				"listName":"{{ mrAC4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@2",
			"id":"vuObq",
			"index":31,
			"inputs":{
				"itemToAdd":"{{ EIiwt.outputs.userQuery }}",
				"insertLocation":"START",
				"listName":"{{ mrAC4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable",
			"title":"Add item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@2",
			"id":"V3W0i",
			"index":32,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Branch 1",
							"conditions":{
								"filters":[
									{
										"property":"1",
										"filter":{
											"operator":"EQUAL",
											"value":"1"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"Branch 2",
							"conditions":{
								"filters":[
									{
										"property":"{{ WTBLy.outputs.properties.preProcessingSettings.disableKnowledgeQueryGeneration }}",
										"filter":{
											"operator":"EQUAL",
											"value":"true"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V3W0i@YS5lb@4ZR9C-1@2@1",
			"id":"V3W0i@1",
			"index":33,
			"inputs":{
				"name":"Branch 1",
				"conditions":{
					"filters":[
						{
							"property":"1",
							"filter":{
								"operator":"EQUAL",
								"value":"1"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":2,
				"resourceName":"callables_call_automation_batch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V3W0i@YS5lb@4ZR9C-1@2@1",
			"id":"6dnmo",
			"index":34,
			"inputs":{
				"automationId":"679b7fdad2256d4d7f3277fe",
				"runtimeConnections":{},
				"synchronous":true,
				"distributeWorkflowLoad":true,
				"parametersList":{
					"ua:type":"mappedArray",
					"items":{
						"sharedWithIds":{
							"source":"{{ _FYo6S.outputs.sharedWithIds }}",
							"ua:type":"mappedArray",
							"items":"{{ _FYo6S.outputs.sharedWithIds[0] }}"
						},
						"knowledges":{
							"ua:type":"mappedArray",
							"source":"{{ n_ZPdEi.outputs.knowledgeIds }}",
							"items":"{{ n_ZPdEi.outputs.knowledgeIds[0] }}"
						},
						"userQuery":"{{ mrAC4.outputs.items[0] }}",
						"filter":"{{ EIiwt.outputs.filter }}",
						"knowledgeSets":{
							"source":"{{ 2t2pg.outputs.knowledgeSets }}",
							"ua:type":"mappedArray",
							"items":"{{ 2t2pg.outputs.knowledgeSets[0] }}"
						},
						"includeCustomMetadataFilter":false,
						"archivedRawDataIds":{
							"source":"{{ n_l5eOd.outputs.properties.rawDataIds }}",
							"ua:type":"mappedArray",
							"items":"{{ n_l5eOd.outputs.properties.rawDataIds[0] }}"
						},
						"caseId":"{{ EIiwt.outputs.caseId }}"
					},
					"source":"{{ mrAC4.outputs.items }}"
				},
				"version":"-1"
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation (batch)",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V3W0i@YS5lb@4ZR9C-1@2@2",
			"id":"V3W0i@2",
			"index":35,
			"inputs":{
				"name":"Branch 2",
				"conditions":{
					"filters":[
						{
							"property":"{{ WTBLy.outputs.properties.preProcessingSettings.disableKnowledgeQueryGeneration }}",
							"filter":{
								"operator":"EQUAL",
								"value":"true"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":2,
				"resourceName":"callables_call_automation_batch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V3W0i@YS5lb@4ZR9C-1@2@2",
			"id":"UVUnc",
			"index":36,
			"inputs":{
				"automationId":"679b7fdad2256d4d7f3277fe",
				"runtimeConnections":{},
				"synchronous":true,
				"distributeWorkflowLoad":false,
				"parametersList":{
					"ua:type":"mappedArray",
					"items":{
						"sharedWithIds":{
							"source":"{{ _FYo6S.outputs.sharedWithIds }}",
							"ua:type":"mappedArray",
							"items":"{{ _FYo6S.outputs.sharedWithIds[0] }}"
						},
						"knowledges":{
							"ua:type":"mappedArray",
							"source":"{{ n_ZPdEi.outputs.knowledgeIds }}",
							"items":"{{ n_ZPdEi.outputs.knowledgeIds[0] }}"
						},
						"userQuery":"{{ y2UIy.outputs.result.sample_answers[0] }}",
						"filter":"{{ EIiwt.outputs.filter }}",
						"includeCustomMetadataFilter":false,
						"archivedRawDataIds":{
							"source":"{{ n_l5eOd.outputs.properties.rawDataIds }}",
							"ua:type":"mappedArray",
							"items":"{{ n_l5eOd.outputs.properties.rawDataIds[0] }}"
						},
						"caseId":"{{ EIiwt.outputs.caseId }}"
					},
					"source":"{{ y2UIy.outputs.result.sample_answers }}"
				},
				"version":"-1"
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation (batch)",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V3W0i@YS5lb@4ZR9C-1@2@default",
			"id":"n_ZByHg",
			"index":37,
			"inputs":{
				"compile_static":false,
				"code":"return true"
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":451,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"YS5lb@4ZR9C-1@default",
			"id":"n_gqaCL",
			"index":38,
			"inputs":{
				"compile_static":false,
				"code":"return true"
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":16,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"vXqrq",
			"index":39,
			"inputs":{
				"filters":[
					{
						"property":"{{ IZ4CM.outputs.customMetadataMatched }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"customMetaMatched",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.score",
					"root.itemsToAdd.items.document"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":16,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vXqrq@4ZR9C-1@y",
			"id":"bXPoI",
			"index":40,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ EungR.outputs.relevantContent }}",
					"items":{
						"score":"{{ EungR.outputs.relevantContent[0].score }}",
						"document":"{{ EungR.outputs.relevantContent[0].document }}"
					}
				},
				"listName":"{{ _LDYaq.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"chunks",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":2,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vXqrq@4ZR9C-1@n",
			"id":"15max",
			"index":41,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ 6dnmo.outputs.result }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.score",
					"root.itemsToAdd.items.document"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":16,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"15max@vXqrq@4ZR9C-1@n@l",
			"id":"VsC2W",
			"index":42,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ 15max.outputs.item.relevantContent }}",
					"items":{
						"score":"{{ 15max.outputs.item.relevantContent[0].score }}",
						"document":"{{ 15max.outputs.item.relevantContent[0].document }}"
					}
				},
				"listName":"{{ _LDYaq.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"chunks",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":2,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vXqrq@4ZR9C-1@n",
			"id":"beSYu",
			"index":43,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ UVUnc.outputs.result }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.score",
					"root.itemsToAdd.items.document"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":16,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"beSYu@vXqrq@4ZR9C-1@n@l",
			"id":"KG2sk",
			"index":44,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ beSYu.outputs.item.relevantContent }}",
					"items":{
						"score":"{{ beSYu.outputs.item.relevantContent[0].score }}",
						"document":"{{ beSYu.outputs.item.relevantContent[0].document }}"
					}
				},
				"listName":"{{ _LDYaq.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"chunks",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{},
				"visibleOptionalFields":[
					"root.parameters.items.relevantContent.items.score",
					"root.parameters.items.relevantContent.items.document"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vXqrq@4ZR9C-1@n",
			"id":"WXzED",
			"index":45,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"relevantContent":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"score":{
										"type":"number",
										"title":"Score"
									},
									"document":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Document"
									}
								},
								"additionalProperties":false,
								"required":[
									"score",
									"document"
								]
							},
							"title":"Relevant Content"
						}
					},
					"additionalProperties":false,
					"required":[
						"relevantContent"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"relevantContent":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"score":{
										"type":"number",
										"title":"Score"
									},
									"document":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Document"
									}
								},
								"additionalProperties":false,
								"required":[
									"score",
									"document"
								]
							},
							"title":"Relevant Content"
						}
					},
					"additionalProperties":false,
					"required":[
						"relevantContent"
					]
				},
				"compile_static":false,
				"code":"if(!binding.hasVariable('relevantContent') || !relevantContent[0].containsKey('score')){\n return ['relevantcontent' : []]\n}\n\ndef relevantContent = relevantContent.groupBy { it.document.properties.text }.collect { key, value ->\n    value[0] // take the first object for each unique text\n}\nreturn ['relevantContent' : relevantContent]",
				"parameters":{
					"relevantContent":{
						"source":"{{ _LDYaq.outputs.items }}",
						"ua:type":"mappedArray",
						"items":{
							"score":"{{ _LDYaq.outputs.items[0].score }}",
							"document":"{{ _LDYaq.outputs.items[0].document }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Code",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"variable_by_unifyapps_clear_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vXqrq@4ZR9C-1@n",
			"id":"t4sCQ",
			"index":46,
			"inputs":{
				"listName":"{{ _LDYaq.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable",
			"title":"Remove all items from list",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.score",
					"root.itemsToAdd.items.document"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"vXqrq@4ZR9C-1@n",
			"id":"nWEzE",
			"index":47,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"items":{
						"score":"{{ WXzED.outputs.result.relevantContent[0].score }}",
						"document":"{{ WXzED.outputs.result.relevantContent[0].document }}"
					},
					"source":"{{ WXzED.outputs.result.relevantContent }}"
				},
				"listName":"{{ _LDYaq.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":101,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_7sG9j",
			"index":48,
			"inputs":{
				"filters":[
					{
						"property":"{{ EIiwt.outputs.aiAgentId }}",
						"filter":{
							"operator":"EQUAL",
							"value":"enterprise_search_agent"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":107,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"n_7sG9j@4ZR9C-1@y",
			"id":"n_DDBp2",
			"index":49,
			"inputs":{
				"automationId":"689475b798afb57877127c83",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ EIiwt.outputs.caseId }}",
					"agentId":"{{ EIiwt.outputs.aiAgentId }}",
					"content":{
						"source":"{{ 6dnmo.outputs.result[0].relevantContent }}",
						"ua:type":"mappedArray",
						"items":{
							"chunkMetadata":"{{ 6dnmo.outputs.result[0].relevantContent[0].document.properties.chunkMetadata }}"
						}
					}
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"unit":"MINUTES",
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":44,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"kdyzQ",
			"index":50,
			"inputs":{
				"filters":[
					{
						"property":"{{ _LDYaq.outputs.items[0].score }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"empty ?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":52,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kdyzQ@4ZR9C-1@n",
			"id":"nM9oM",
			"index":51,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"relevantContent":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"string",
										"title":"Content"
									},
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Chunk Metadata"
									}
								},
								"additionalProperties":false
							},
							"title":"Relevant Content",
							"required":[]
						}
					}
				},
				"code":"return [\"relevantcontent\" : []];",
				"compile_static":false,
				"isAsync":false,
				"captureStdOutput":false
			},
			"skip":false,
			"subTitle":"relevant content",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":42,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"kdyzQ@4ZR9C-1@n",
			"id":"St1Vn",
			"index":52,
			"inputs":{
				"result":{
					"relevantContent":{
						"source":"{{ nM9oM.outputs.result.relevantContent }}",
						"ua:type":"mappedArray",
						"items":{
							"content":"{{ nM9oM.outputs.result.relevantContent[0].content }}",
							"chunkMetadata":"{{ nM9oM.outputs.result.relevantContent[0].chunkMetadata }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.relevantContent.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":52,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"hmkkt",
			"index":53,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"text":{
										"type":"string",
										"title":"Text"
									},
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Chunk Metadata"
									},
									"chunkId":{
										"type":"string",
										"title":"Chunk Id"
									},
									"knowledgeId":{
										"type":"string",
										"title":"Knowledge Id"
									},
									"knowledgeSetId":{
										"type":"string",
										"title":"Knowledge Set Id"
									}
								},
								"additionalProperties":false,
								"required":[
									"chunkId"
								]
							},
							"title":"Chunks",
							"required":[]
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"relevantContent":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Relevant Content"
						}
					}
				},
				"code":"static Map<String, Object> safeMap(Object obj) {\n    return (obj instanceof Map) ? (Map<String, Object>) obj : Collections.emptyMap()\n}\n\nList<Map<String, Object>> uniqueChunks = []\nSet<Object> seenChunkUUIDs = new HashSet<>()\n\nObject rc = binding.hasVariable(\"relevantContent\") ? binding.getVariable(\"relevantContent\") : null\nList<Object> relevantContent = (rc instanceof List) ? (List<Object>) rc : []\n\nif (!relevantContent.isEmpty()) {\n    for (Object rawText : relevantContent) {\n        Map<String, Object> text = safeMap(rawText)\n        Map<String, Object> chunkMap = [:]\n        Object chunkUUID = null\n\n        Map<String, Object> document = safeMap(text[\"document\"])\n        Map<String, Object> properties = safeMap(document[\"properties\"])\n\n        if (properties[\"text\"] != null) {\n            chunkMap[\"text\"] = properties[\"text\"]\n        }\n\n        if (document[\"chunkId\"] != null) {\n            chunkMap[\"chunkId\"] = document[\"chunkId\"]\n        }\n\n        if (properties[\"knowledgeId\"] != null) {\n            chunkMap[\"knowledgeId\"] = properties[\"knowledgeId\"]\n        }\n\n        if (properties[\"knowledgeSetId\"] != null) {\n            chunkMap[\"knowledgeSetId\"] = properties[\"knowledgeSetId\"]\n        }\n\n        if (properties[\"chunkMetadata\"] != null) {\n            Map<String, Object> chunkMetadata = safeMap(properties[\"chunkMetadata\"])\n            chunkMetadata[\"id\"] = document[\"id\"]\n\n            if (chunkMetadata[\"chunkUUID\"] != null) {\n                chunkUUID = chunkMetadata[\"chunkUUID\"]\n            }\n\n            Object uid = properties[\"uniqueEntityId\"]\n            if (!chunkMetadata.containsKey(\"uniqueEntityId\") && uid != null) {\n                chunkMetadata[\"uniqueEntityId\"] = uid\n            }\n\n            if (chunkMetadata[\"contentForGeneration\"] != null) {\n                chunkMap[\"text\"] = chunkMetadata[\"contentForGeneration\"]\n            }\n\n            if(properties[\"knowledgeType\"] != null)\n            {\n                chunkMetadata[\"knowledgeType\"] = properties[\"knowledgeType\"]\n            }\n            \n            chunkMap[\"chunkMetadata\"] = chunkMetadata\n        }\n\n        if (chunkUUID != null) {\n            if (!seenChunkUUIDs.contains(chunkUUID)) {\n                seenChunkUUIDs.add(chunkUUID)\n                uniqueChunks.add(chunkMap)\n            }\n        } else {\n            uniqueChunks.add(chunkMap)\n        }\n    }\n}\n\nreturn [\n    \"chunks\": uniqueChunks\n]\n",
				"compile_static":true,
				"isAsync":false,
				"captureStdOutput":false,
				"parameters":{
					"relevantContent":{
						"ua:type":"mappedArray",
						"source":"{{ _LDYaq.outputs.items }}",
						"items":"{{ _LDYaq.outputs.items[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"preprocess for citation",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":194,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"wqGoc",
			"index":54,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"Initial list items",
							"ui:description":"Set the initial values of the list (defaults to empty)"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"content":{
											"type":"string",
											"title":"Content"
										},
										"chunkMetadata":{
											"type":"string",
											"title":"Chunk Metadata"
										},
										"chunkId":{
											"type":"string",
											"title":"Chunk Id"
										},
										"knowledgeType":{
											"type":"string",
											"title":"Knowledge Type"
										},
										"score":{
											"type":"number",
											"title":"Score"
										},
										"knowledgeId":{
											"type":"string",
											"title":"Knowledge Id"
										},
										"knowledgeSetId":{
											"type":"string",
											"title":"Knowledge Set Id"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"chunks",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"chunks",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"string",
										"title":"Content"
									},
									"chunkMetadata":{
										"type":"string",
										"title":"Chunk Metadata"
									},
									"chunkId":{
										"type":"string",
										"title":"Chunk Id"
									},
									"knowledgeType":{
										"type":"string",
										"title":"Knowledge Type"
									},
									"score":{
										"type":"number",
										"title":"Score"
									},
									"knowledgeId":{
										"type":"string",
										"title":"Knowledge Id"
									},
									"knowledgeSetId":{
										"type":"string",
										"title":"Knowledge Set Id"
									}
								},
								"required":[]
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Chunks",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":458,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_eXp8p",
			"index":55,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"rerankerStartTime":{
							"type":"integer",
							"title":"Reranker Start Time"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"rerankerStartTime":"=INT((NOW() - DATE(1970,1,1)) * 86400000)"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"rerankerStartTime":{
							"type":"integer",
							"title":"Reranker Start Time"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Reranker Start Time",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":48,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"4ZR9C-1",
			"id":"JbGgg",
			"index":56,
			"inputs":{
				"automationId":"66ae2f6e381d8834cd6742de",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"userQuery":"{{ EIiwt.outputs.userQuery }}",
					"aiAgentId":"{{ EIiwt.outputs.aiAgentId }}",
					"chunks":{
						"ua:type":"mappedArray",
						"items":{
							"text":"{{ hmkkt.outputs.result.chunks[0].text }}",
							"chunkMetadata":"{{ hmkkt.outputs.result.chunks[0].chunkMetadata }}",
							"chunkId":"{{ hmkkt.outputs.result.chunks[0].chunkId }}",
							"knowledgeId":"{{ hmkkt.outputs.result.chunks[0].knowledgeId }}",
							"knowledgeSetId":"{{ hmkkt.outputs.result.chunks[0].knowledgeSetId }}"
						},
						"source":"{{ hmkkt.outputs.result.chunks }}"
					}
				}
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"reranker",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.chunks.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":52,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"JbGgg@4ZR9C-1@success",
			"id":"ezyvl",
			"index":57,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"chunksReversed":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"string",
										"title":"Content"
									},
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Chunk Metadata"
									},
									"chunkId":{
										"type":"string",
										"title":"Chunk Id"
									},
									"knowledgeType":{
										"type":"string",
										"title":"Knowledge Type"
									},
									"score":{
										"type":"number",
										"title":"Score"
									},
									"knowledgeId":{
										"type":"string",
										"title":"Knowledge Id"
									},
									"knowledgeSetId":{
										"type":"string",
										"title":"Knowledge Set Id"
									}
								},
								"additionalProperties":false,
								"required":[
									"chunkId"
								]
							},
							"title":"Chunks Reversed",
							"required":[]
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Chunks"
						}
					}
				},
				"code":"\nif(!binding.hasVariable('chunks')) {\n  return ['chunksReversed': []]\n}\ndef chunksReversed = chunks;\nfor(chunk in chunksReversed) {\n  if(chunk.chunkMetadata) {\n      chunk.chunkMetadata[\"chunkContents\"] = [chunk.content]\n      chunk[\"knowledgeType\"] = chunk.chunkMetadata['knowledgeType']\n  }\n}\nreturn [\"chunksReversed\": chunksReversed]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"chunks":{
						"source":"{{ JbGgg.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":"{{ JbGgg.outputs.chunks[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"content",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.content",
					"root.itemsToAdd.items.chunkMetadata",
					"root.itemsToAdd.items.chunkId",
					"root.itemsToAdd.items.knowledgeType",
					"root.itemsToAdd.items.score",
					"root.itemsToAdd.items.knowledgeId",
					"root.itemsToAdd.items.knowledgeSetId"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":189,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"JbGgg@4ZR9C-1@success",
			"id":"sX4HL",
			"index":58,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ ezyvl.outputs.result.chunksReversed }}",
					"items":{
						"content":"{{ ezyvl.outputs.result.chunksReversed[0].content }}",
						"chunkMetadata":"{{ ezyvl.outputs.result.chunksReversed[0].chunkMetadata }}",
						"chunkId":"{{ ezyvl.outputs.result.chunksReversed[0].chunkId }}",
						"knowledgeType":"{{ ezyvl.outputs.result.chunksReversed[0].knowledgeType }}",
						"score":"{{ ezyvl.outputs.result.chunksReversed[0].score }}",
						"knowledgeId":"{{ ezyvl.outputs.result.chunksReversed[0].knowledgeId }}",
						"knowledgeSetId":"{{ ezyvl.outputs.result.chunksReversed[0].knowledgeSetId }}"
					}
				},
				"listName":"{{ wqGoc.outputs.items[0] }}"
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":467,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"JbGgg@4ZR9C-1@success",
			"id":"n_fYTPB",
			"index":59,
			"inputs":{
				"automationId":"68c51597269ad81cc750a3ca",
				"runtimeConnections":{},
				"synchronous":false,
				"triggerWorkflowWithRuntimeType":"IN_MEMORY",
				"version":"-1",
				"parameters":{
					"caseId":"{{ EIiwt.outputs.caseId }}",
					"aiAgentId":"{{ EIiwt.outputs.aiAgentId }}",
					"executionInstanceId":"{{ JbGgg.outputs.executionInstanceId }}",
					"parent":"Retrieval",
					"messageId":"{{ n_cuOAL.outputs.messageId }}",
					"llmTimeTaken":"=INT((NOW() - DATE(1970,1,1)) * 86400000)-{{ n_eXp8p.outputs.rerankerStartTime }}",
					"input":"{{ JbGgg.outputs }}",
					"currentType":"Reranker",
					"rootExecutionId":"{{ __RUN__.outputs.rootExecutionId }}",
					"parentExecutionId":"{{ __RUN__.outputs.executionId }}",
					"userId":"=IF(ISNUMBER({{ __RUN__.outputs.userId }}), {{ __RUN__.outputs.userId }}, 0)",
					"fromAutomationId":"66ae2f6e381d8834cd6742de",
					"startTime":"{{ n_eXp8p.outputs.rerankerStartTime }}",
					"success":true
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Capture Trace",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.chunks.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":344,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"JbGgg@4ZR9C-1@error",
			"id":"IRkAI",
			"index":60,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"chunksReversed":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"chunkMetadata":{
										"type":"object",
										"properties":{},
										"additionalProperties":false,
										"title":"Chunk Metadata"
									},
									"content":{
										"type":"string",
										"title":"Content"
									},
									"chunkId":{
										"type":"string",
										"title":"Chunk Id"
									},
									"knowledgeType":{
										"type":"string",
										"title":"Knowledge Type"
									},
									"knowledgeId":{
										"type":"string",
										"title":"Knowledge Id"
									},
									"knowledgeSetId":{
										"type":"string",
										"title":"Knowledge Set Id"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Chunks Reversed"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Chunks"
						}
					}
				},
				"code":"def chunksReversed = chunks;\nfor(chunk in chunksReversed) {\n  if(chunk.containsKey('chunkMetadata')){\n     chunk.chunkMetadata['chunkContents'] = [chunk.text]\n     chunk[\"knowledgeType\"] = chunk.chunkMetadata.knowledgeType\n  }\n  chunk.put(\"content\", chunk.text)\n}\nreturn ['chunksReversed': chunksReversed?.take(20)]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"chunks":{
						"source":"{{ hmkkt.outputs.result.chunks }}",
						"ua:type":"mappedArray",
						"items":"{{ hmkkt.outputs.result.chunks[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":467,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"JbGgg@4ZR9C-1@error",
			"id":"_QOP3I",
			"index":61,
			"inputs":{
				"automationId":"68c51597269ad81cc750a3ca",
				"runtimeConnections":{},
				"synchronous":false,
				"triggerWorkflowWithRuntimeType":"IN_MEMORY",
				"version":"-1",
				"parameters":{
					"caseId":"{{ EIiwt.outputs.caseId }}",
					"aiAgentId":"{{ EIiwt.outputs.aiAgentId }}",
					"executionInstanceId":"{{ __RUN__.outputs.executionId }}",
					"parent":"Retrieval",
					"messageId":"{{ n_cuOAL.outputs.messageId }}",
					"llmTimeTaken":"=INT((NOW() - DATE(1970,1,1)) * 86400000)-{{ n_eXp8p.outputs.rerankerStartTime }}",
					"input":"{{ JbGgg.outputs }}",
					"currentType":"Reranker",
					"rootExecutionId":"{{ __RUN__.outputs.rootExecutionId }}",
					"parentExecutionId":"{{ __RUN__.outputs.parentExecutionId }}",
					"userId":"=IF(ISNUMBER({{ __RUN__.outputs.userId }}), {{ __RUN__.outputs.userId }}, 0)",
					"fromAutomationId":"66ae2f6e381d8834cd6742de",
					"startTime":"{{ n_eXp8p.outputs.rerankerStartTime }}",
					"success":false
				}
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Capture Trace",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.itemsToAdd.items.content",
					"root.itemsToAdd.items.chunkMetadata",
					"root.itemsToAdd.items.knowledgeId",
					"root.itemsToAdd.items.knowledgeSetId",
					"root.itemsToAdd.items.chunkId",
					"root.itemsToAdd.items.knowledgeType",
					"root.itemsToAdd.items.score"
				]
			},
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":189,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"JbGgg@4ZR9C-1@error",
			"id":"CvguA",
			"index":62,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ IRkAI.outputs.result.chunksReversed }}",
					"items":{
						"content":"{{ IRkAI.outputs.result.chunksReversed[0].content }}",
						"chunkMetadata":"{{ IRkAI.outputs.result.chunksReversed[0].chunkMetadata }}",
						"chunkId":"{{ IRkAI.outputs.result.chunksReversed[0].chunkId }}",
						"knowledgeType":"{{ IRkAI.outputs.result.chunksReversed[0].knowledgeType }}",
						"knowledgeId":"{{ IRkAI.outputs.result.chunksReversed[0].knowledgeId }}",
						"knowledgeSetId":"{{ IRkAI.outputs.result.chunksReversed[0].knowledgeSetId }}"
					}
				},
				"listName":"{{ wqGoc.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":42,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"boutm",
			"index":63,
			"inputs":{
				"result":{
					"relevantContent":{
						"ua:type":"mappedArray",
						"items":{
							"content":"{{ wqGoc.outputs.items[0].content }}",
							"chunkMetadata":"{{ wqGoc.outputs.items[0].chunkMetadata }}",
							"chunkId":"{{ wqGoc.outputs.items[0].chunkId }}",
							"knowledgeType":"{{ wqGoc.outputs.items[0].knowledgeType }}",
							"score":"{{ wqGoc.outputs.items[0].score }}",
							"knowledgeId":"{{ wqGoc.outputs.items[0].knowledgeId }}",
							"knowledgeSetId":"{{ wqGoc.outputs.items[0].knowledgeSetId }}"
						},
						"source":"{{ wqGoc.outputs.items }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Return data to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":520,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent",
		"Knowledge"
	],
	"version":154
}