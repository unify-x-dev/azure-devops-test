{
	"appsUsed":[
		
	],
	"createdTime":1760296210294,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296210455,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfd12672fcc41fb70f11d",
		"status":"DEPLOYED",
		"version":1,
		"workflowVersion":10
	},
	"edges":[
		{
			"fromNodeId":"_dF9ql",
			"priority":0,
			"skip":false,
			"toNodeId":"n_jHd5G",
			"type":"next"
		},
		{
			"fromNodeId":"n_jHd5G",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ejxnl",
			"type":"next"
		},
		{
			"fromNodeId":"n_ejxnl",
			"priority":0,
			"skip":false,
			"toNodeId":"n_72UTk",
			"type":"next"
		},
		{
			"fromNodeId":"n_72UTk",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qDE27",
			"type":"next"
		},
		{
			"fromNodeId":"n_qDE27",
			"priority":0,
			"skip":false,
			"toNodeId":"n_EJVUB",
			"type":"next"
		},
		{
			"fromNodeId":"n_EJVUB",
			"priority":0,
			"skip":false,
			"toNodeId":"_PwaiT",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68dd12ed75a316566ae409f5",
	"lastModifiedBy":0,
	"lcName":"deep research tool | perplexity sonar deep research",
	"modifiedTime":1761722746148,
	"name":"Deep Research Tool | Perplexity Sonar Deep Research",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"_dF9ql",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"Final_report":{
							"type":"string",
							"title":"Final Report"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"agentId":{
							"type":"string",
							"title":"Agent Id"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"user_query":{
							"type":"string",
							"title":"User Query"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":491,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"n_jHd5G",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"role":{
										"type":"string",
										"title":"Role"
									},
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"type":{
													"type":"string",
													"title":"Type"
												},
												"text":{
													"type":"string",
													"title":"Text"
												}
											},
											"additionalProperties":false,
											"required":[]
										},
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Messages"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"messages":{
					"items":{
						"role":"user",
						"content":{
							"items":{
								"type":"text",
								"text":"{{ _dF9ql.outputs.user_query }}"
							},
							"ua:type":"mappedArray"
						}
					},
					"ua:type":"mappedArray"
				}
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"role":{
										"type":"string",
										"title":"Role"
									},
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"type":{
													"type":"string",
													"title":"Type"
												},
												"text":{
													"type":"string",
													"title":"Text"
												}
											},
											"additionalProperties":false,
											"required":[]
										},
										"title":"Content"
									}
								},
								"additionalProperties":false,
								"required":[]
							},
							"title":"Messages"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":464,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"n_ejxnl",
			"index":3,
			"inputs":{
				"automationId":"68dcd7723374855239dbb1f4",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"aiAgentId":"{{ _dF9ql.outputs.agentId }}",
					"model":"perplexity/sonar-deep-research",
					"modelId":"e_68dcd9a3fefec34eee977390",
					"sessionId":"{{ _dF9ql.outputs.caseId }}",
					"stream":true,
					"messages":{
						"source":"{{ n_jHd5G.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ n_jHd5G.outputs.messages[0].content }}",
								"ua:type":"mappedArray",
								"items":{
									"text":"{{ n_jHd5G.outputs.messages[0].content[0].text }}",
									"type":"{{ n_jHd5G.outputs.messages[0].content[0].type }}"
								}
							},
							"role":"{{ n_jHd5G.outputs.messages[0].role }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Call perplexity sonar deep research",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"n_72UTk",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"polished_final_report":{
							"type":"string",
							"title":"Polished Final Report"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"final_report":{
							"type":"string",
							"title":"Final Report"
						}
					}
				},
				"code":"def final_report = binding.hasVariable(\"final_report\") ? binding.getVariable(\"final_report\") : \"\"\n\n// Regex to match one or more adjacent bracket groups [1][2,3][4]\ndef pattern = /(?:\\[\\s*\\d+(?:\\s*,\\s*\\d+)*\\s*\\]\\s*)+/\n\nfinal_report = final_report.replaceAll(pattern) { match ->\n    // Extract all numbers in order\n    def numbers = (match =~ /\\d+/).collect { it[0] }\n    \n    // Deduplicate while preserving first-seen order\n    def uniq = []\n    numbers.each { n -> if (!uniq.contains(n)) uniq << n }\n\n    // Wrap in $$[...]$$\n    return '$$[' + uniq.join(',') + ']$$'\n}\n\nreturn ['polished_final_report': final_report]\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"final_report":"{{ n_ejxnl.outputs.output }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":524,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"n_qDE27",
			"index":5,
			"inputs":{
				"automationId":"678511ee5384a9541846fcee",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"llmResponse":"{{ n_72UTk.outputs.result.polished_final_report }}",
					"caseId":"{{ _dF9ql.outputs.caseId }}",
					"agentId":"{{ _dF9ql.outputs.agentId }}",
					"modelId":"e_68dcd9a3fefec34eee977390",
					"errorMessage":"Error: Facing Issues in processing the final draft for the deep reasearch."
				}
			},
			"skip":false,
			"subTitle":"Validate LLM response",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":524,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"n_EJVUB",
			"index":6,
			"inputs":{
				"automationId":"67deb8826ff2a8770508424b",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"finalAnswer":"{{ n_qDE27.outputs.finalAnswer }}",
					"caseId":"{{ _dF9ql.outputs.caseId }}",
					"aiAgentId":"{{ _dF9ql.outputs.agentId }}"
				}
			},
			"skip":false,
			"subTitle":"Publish LLM response",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_YKHPt-1",
			"id":"_PwaiT",
			"index":7,
			"inputs":{
				"result":{
					"Final_report":"{{ n_qDE27.outputs.finalAnswer }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":-1,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":12
}