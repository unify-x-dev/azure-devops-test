{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1757441820342,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296170401,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfcea0c3d19149a9e345c",
		"status":"DEPLOYED",
		"version":7,
		"workflowVersion":22
	},
	"edges":[
		{
			"fromNodeId":"n_h6zid",
			"priority":0,
			"skip":false,
			"toNodeId":"n_voOFo",
			"type":"next"
		},
		{
			"fromNodeId":"n_voOFo",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gmX1U",
			"type":"if"
		},
		{
			"fromNodeId":"n_gmX1U",
			"priority":0,
			"skip":false,
			"toNodeId":"n_HL9Vd",
			"type":"next"
		},
		{
			"fromNodeId":"n_HL9Vd",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_8DGe6",
			"type":"next"
		},
		{
			"fromNodeId":"n_HL9Vd",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gARaW",
			"type":"if"
		},
		{
			"fromNodeId":"n_8DGe6",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gARaW",
			"type":"next"
		},
		{
			"fromNodeId":"n_gARaW",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Hbwdt",
			"type":"error"
		},
		{
			"fromNodeId":"n_voOFo",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_1uuGx",
			"type":"next"
		},
		{
			"fromNodeId":"_1uuGx",
			"priority":0,
			"skip":false,
			"toNodeId":"_S8Jnc",
			"type":"next"
		},
		{
			"fromNodeId":"_S8Jnc",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_L32rW",
			"type":"next"
		},
		{
			"fromNodeId":"_S8Jnc",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_Lqj3G",
			"type":"if"
		},
		{
			"fromNodeId":"_L32rW",
			"priority":0,
			"skip":false,
			"toNodeId":"_Lqj3G",
			"type":"next"
		},
		{
			"fromNodeId":"_Lqj3G",
			"name":"success",
			"priority":0,
			"skip":false,
			"toNodeId":"n_KX2VS",
			"type":"next"
		},
		{
			"fromNodeId":"_Lqj3G",
			"name":"error",
			"priority":0,
			"skip":false,
			"toNodeId":"n_usTkg",
			"type":"error"
		},
		{
			"fromNodeId":"n_gARaW",
			"priority":0,
			"skip":false,
			"toNodeId":"n_B7nUo",
			"type":"next"
		},
		{
			"fromNodeId":"n_Hbwdt",
			"priority":0,
			"skip":false,
			"toNodeId":"n_B7nUo",
			"type":"next"
		},
		{
			"fromNodeId":"n_KX2VS",
			"priority":0,
			"skip":false,
			"toNodeId":"n_B7nUo",
			"type":"next"
		},
		{
			"fromNodeId":"n_usTkg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_B7nUo",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"6866230e4995794c4f3fac64",
	"lastModifiedBy":0,
	"lcName":"create/update agent",
	"modifiedTime":1761722684879,
	"name":"Create/Update Agent",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_from_api"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_jbZvp-1",
			"id":"n_h6zid",
			"index":1,
			"inputs":{
				"request":{
					"contentType":"application/json",
					"body":{
						"type":"object",
						"properties":{
							"name":{
								"type":"string",
								"title":"name"
							},
							"role":{
								"type":"string",
								"title":"role"
							},
							"goal":{
								"type":"string",
								"title":"goal"
							},
							"instructions":{
								"type":"string",
								"title":"instructions"
							},
							"id":{
								"type":"string",
								"title":"Id"
							},
							"agentType":{
								"type":"string",
								"title":"Agent Type"
							}
						},
						"additionalProperties":false,
						"required":[]
					},
					"queryParams":{
						"type":"object",
						"properties":{
							"forgerockIdToken":{
								"type":"string",
								"title":"Forgerock Id Token"
							}
						},
						"additionalProperties":false,
						"required":[]
					}
				},
				"endpointType":"REST",
				"response":[
					{
						"status":200,
						"contentType":"application/json",
						"textBody":{
							"type":"string"
						},
						"body":{
							"type":"object",
							"properties":{
								"id":{
									"type":"string",
									"title":"id"
								},
								"name":{
									"type":"string",
									"title":"name"
								},
								"role":{
									"type":"string",
									"title":"role"
								},
								"goal":{
									"type":"string",
									"title":"goal"
								},
								"instructions":{
									"type":"string",
									"title":"instructions"
								}
							},
							"additionalProperties":false
						},
						"namespaces":[]
					},
					{
						"status":500,
						"contentType":"application/json",
						"textBody":{
							"type":"string"
						}
					},
					{
						"status":400,
						"contentType":"application/json",
						"textBody":{
							"type":"string"
						},
						"body":{
							"type":"object",
							"properties":{
								"error":{
									"type":"string",
									"title":"error"
								},
								"parameters":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"parameters"
								}
							},
							"additionalProperties":false,
							"required":[]
						},
						"namespaces":[]
					}
				],
				"streamingResponse":false
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via API",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_jbZvp-1",
			"id":"n_voOFo",
			"index":2,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_h6zid.outputs.body.id }}",
						"filter":{
							"operator":"EXISTS"
						}
					},
					{
						"property":"=LEN({{ n_h6zid.outputs.body.id }})",
						"filter":{
							"operator":"GT",
							"value":"0"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_voOFo@_jbZvp-1@y",
			"id":"n_gmX1U",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"success":{
							"type":"boolean",
							"title":"Success"
						},
						"missing":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Missing"
						},
						"message":{
							"type":"string",
							"title":"Message"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"name":{
							"type":"string",
							"title":"name"
						},
						"role":{
							"type":"string",
							"title":"role"
						},
						"goal":{
							"type":"string",
							"title":"goal"
						},
						"instructions":{
							"type":"string",
							"title":"instructions"
						},
						"agentType":{
							"type":"string",
							"title":"Agent Type"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def requiredVars = ['name', 'role', 'goal', 'instructions', 'agentType']\ndef allowedAgentTypes = ['ai-agent', 'external', 'custom-gpt']\ndef missingVars = requiredVars.findAll { varName ->\n    !binding.hasVariable(varName) ||\n    binding.getVariable(varName) == null ||\n    binding.getVariable(varName).toString().trim().isEmpty()\n}\nif (!missingVars.isEmpty()){\n    return [\n        success: false,\n        missing: missingVars,\n        message: \"Missing Parameters\"\n    ]   \n}\n\ndef agentType = binding.hasVariable('agentType') ? binding.getVariable('agentType')?.toString()?.trim() : null\ndef agentTypeValid = true\nif(agentType == null || agentType.toString().trim().isEmpty()){\n  agentTypeValid = true\n}\nelse{\n  agentTypeValid = agentType && allowedAgentTypes.contains(agentType)\n}\ndef errorMsg = null\nif (!agentTypeValid) {\n    errorMsg = \"Invalid 'agentType'. Must be one of: \" + allowedAgentTypes.join(', ') + \".\"\n    return [\n        success: false,\n        message: errorMsg,\n        agentType : agentType\n    ]\n}\n\nreturn [\n    success: true\n]",
				"parameters":{
					"name":"{{ n_h6zid.outputs.body.name }}",
					"role":"{{ n_h6zid.outputs.body.role }}",
					"goal":"{{ n_h6zid.outputs.body.goal }}",
					"instructions":"{{ n_h6zid.outputs.body.instructions }}",
					"agentType":"{{ n_h6zid.outputs.body.agentType }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_voOFo@_jbZvp-1@y",
			"id":"n_HL9Vd",
			"index":4,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_gmX1U.outputs.result.success }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_HL9Vd@n_voOFo@_jbZvp-1@y@n",
			"id":"n_8DGe6",
			"index":5,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"400_undefined",
				"body":{
					"parameters":{
						"source":"{{ n_gmX1U.outputs.result.missing }}",
						"ua:type":"mappedArray",
						"items":"{{ n_gmX1U.outputs.result.missing[0] }}"
					},
					"message":"{{ n_gmX1U.outputs.result.message }}",
					"error":"{{ n_gmX1U.outputs.result.message }}"
				},
				"status":400
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":438,
				"resourceName":"storage_by_unifyapps_update_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"n_voOFo@_jbZvp-1@y",
			"id":"n_gARaW",
			"index":6,
			"inputs":{
				"recordId":"{{ n_h6zid.outputs.body.id }}",
				"writeThroughSessionVariables":false,
				"object_type":"ai_agent",
				"record":{
					"name":"{{ n_h6zid.outputs.body.name }}",
					"role":"{{ n_h6zid.outputs.body.role }}",
					"goal":"{{ n_h6zid.outputs.body.goal }}",
					"instructions":"{{ n_h6zid.outputs.body.instructions }}",
					"agentType":"{{ n_h6zid.outputs.body.agentType }}"
				},
				"upsert":false
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"unit":"MINUTES",
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update an existing record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_gARaW@n_voOFo@_jbZvp-1@y@error",
			"id":"n_Hbwdt",
			"index":7,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"500_undefined",
				"status":500
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":448,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_voOFo@_jbZvp-1@n",
			"id":"_1uuGx",
			"index":8,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"success":{
							"type":"boolean",
							"title":"Success"
						},
						"missing":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Missing"
						},
						"message":{
							"type":"string",
							"title":"Message"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"name":{
							"type":"string",
							"title":"name"
						},
						"role":{
							"type":"string",
							"title":"role"
						},
						"goal":{
							"type":"string",
							"title":"goal"
						},
						"instructions":{
							"type":"string",
							"title":"instructions"
						},
						"agentType":{
							"type":"string",
							"title":"Agent Type"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"def requiredVars = ['name', 'role', 'goal', 'instructions', 'agentType']\ndef allowedAgentTypes = ['ai-agent', 'external', 'custom-gpt']\ndef missingVars = requiredVars.findAll { varName ->\n    !binding.hasVariable(varName) ||\n    binding.getVariable(varName) == null ||\n    binding.getVariable(varName).toString().trim().isEmpty()\n}\nif (!missingVars.isEmpty()){\n    return [\n        success: false,\n        missing: missingVars,\n        message: \"Missing Parameters\"\n    ]   \n}\n\ndef agentType = binding.hasVariable('agentType') ? binding.getVariable('agentType')?.toString()?.trim() : null\ndef agentTypeValid = true\nif(agentType == null || agentType.toString().trim().isEmpty()){\n  agentTypeValid = true\n}\nelse{\n  agentTypeValid = agentType && allowedAgentTypes.contains(agentType)\n}\ndef errorMsg = null\nif (!agentTypeValid) {\n    errorMsg = \"Invalid 'agentType'. Must be one of: \" + allowedAgentTypes.join(', ') + \".\"\n    return [\n        success: false,\n        message: errorMsg,\n        agentType : agentType\n    ]\n}\n\nreturn [\n    success: true\n]",
				"parameters":{
					"name":"{{ n_h6zid.outputs.body.name }}",
					"role":"{{ n_h6zid.outputs.body.role }}",
					"goal":"{{ n_h6zid.outputs.body.goal }}",
					"instructions":"{{ n_h6zid.outputs.body.instructions }}",
					"agentType":"{{ n_h6zid.outputs.body.agentType }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":437,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_voOFo@_jbZvp-1@n",
			"id":"_S8Jnc",
			"index":9,
			"inputs":{
				"filters":[
					{
						"property":"{{ _1uuGx.outputs.result.success }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S8Jnc@n_voOFo@_jbZvp-1@n@n",
			"id":"_L32rW",
			"index":10,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"400_undefined",
				"body":{
					"parameters":{
						"source":"{{ _1uuGx.outputs.result.missing }}",
						"ua:type":"mappedArray",
						"items":"{{ _1uuGx.outputs.result.missing[0] }}"
					},
					"error":"{{ _1uuGx.outputs.result.message }}"
				},
				"status":400
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"MANUAL",
			"groupId":"n_voOFo@_jbZvp-1@n",
			"id":"_Lqj3G",
			"index":11,
			"inputs":{
				"object_type":"ai_agent",
				"record":{
					"name":"{{ n_h6zid.outputs.body.name }}",
					"role":"{{ n_h6zid.outputs.body.role }}",
					"goal":"{{ n_h6zid.outputs.body.goal }}",
					"instructions":"{{ n_h6zid.outputs.body.instructions }}",
					"agentType":"{{ n_h6zid.outputs.body.agentType }}"
				}
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false,
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false,
					"slidingWindowType":"COUNT_BASED"
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"unit":"MINUTES",
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"MANUAL",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Lqj3G@n_voOFo@_jbZvp-1@n@success",
			"id":"n_KX2VS",
			"index":12,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"200_undefined",
				"body":{
					"id":"{{ _Lqj3G.outputs.id }}",
					"name":"{{ _Lqj3G.outputs.properties.name }}",
					"role":"{{ _Lqj3G.outputs.properties.role }}",
					"goal":"{{ _Lqj3G.outputs.properties.goal }}",
					"instructions":"{{ _Lqj3G.outputs.properties.instructions }}"
				},
				"status":200
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_Lqj3G@n_voOFo@_jbZvp-1@n@error",
			"id":"n_usTkg",
			"index":13,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"500_undefined",
				"status":500
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":459,
				"resourceName":"callables_return_response_to_api",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_jbZvp-1",
			"id":"n_B7nUo",
			"index":14,
			"inputs":{
				"streamingCompleted":true,
				"responseName":"200_undefined",
				"body":{
					"id":"{{ n_gARaW.outputs.object.id }}",
					"name":"{{ n_gARaW.outputs.object.properties.name }}",
					"role":"{{ n_gARaW.outputs.object.properties.role }}",
					"goal":"{{ n_gARaW.outputs.object.properties.goal }}",
					"instructions":"{{ n_gARaW.outputs.object.properties.instructions }}"
				},
				"status":200
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to API request",
			"type":"STOP"
		}
	],
	"ownerUserId":0,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":24
}