{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1732173328683,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296218579,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfd1a0c3d19149a9e353f",
		"status":"DEPLOYED",
		"version":115,
		"workflowVersion":150
	},
	"edges":[
		{
			"fromNodeId":"ysaHW",
			"priority":0,
			"skip":false,
			"toNodeId":"3p5Mz",
			"type":"next"
		},
		{
			"fromNodeId":"3p5Mz",
			"priority":0,
			"skip":false,
			"toNodeId":"bTdY9",
			"type":"next"
		},
		{
			"fromNodeId":"bTdY9",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"czBp1",
			"type":"if"
		},
		{
			"fromNodeId":"czBp1",
			"priority":0,
			"skip":false,
			"toNodeId":"_7P5h5",
			"type":"next"
		},
		{
			"fromNodeId":"bTdY9",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_7P5h5",
			"type":"next"
		},
		{
			"fromNodeId":"_7P5h5",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ZfA3j",
			"type":"next"
		},
		{
			"fromNodeId":"n_ZfA3j",
			"priority":0,
			"skip":false,
			"toNodeId":"_Xr1O6",
			"type":"next"
		},
		{
			"fromNodeId":"_Xr1O6",
			"priority":0,
			"skip":false,
			"toNodeId":"n_FMsQt",
			"type":"next"
		},
		{
			"fromNodeId":"n_FMsQt",
			"priority":0,
			"skip":false,
			"toNodeId":"_aslAx",
			"type":"next"
		},
		{
			"fromNodeId":"_aslAx",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_DYksB",
			"type":"if"
		},
		{
			"fromNodeId":"_DYksB",
			"priority":0,
			"skip":false,
			"toNodeId":"BDB7c",
			"type":"next"
		},
		{
			"fromNodeId":"BDB7c",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"CXrPT",
			"type":"if"
		},
		{
			"fromNodeId":"CXrPT",
			"priority":0,
			"skip":false,
			"toNodeId":"_iPA5U",
			"type":"next"
		},
		{
			"fromNodeId":"BDB7c",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_iPA5U",
			"type":"next"
		},
		{
			"fromNodeId":"_iPA5U",
			"priority":0,
			"skip":false,
			"toNodeId":"_3Ers7",
			"type":"next"
		},
		{
			"fromNodeId":"_3Ers7",
			"priority":0,
			"skip":false,
			"toNodeId":"_E7MpK",
			"type":"next"
		},
		{
			"fromNodeId":"_E7MpK",
			"priority":0,
			"skip":false,
			"toNodeId":"_fr2Xj",
			"type":"next"
		},
		{
			"fromNodeId":"_aslAx",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_fr2Xj",
			"type":"next"
		},
		{
			"fromNodeId":"_fr2Xj",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"jkXe2",
			"type":"if"
		},
		{
			"fromNodeId":"jkXe2",
			"priority":0,
			"skip":false,
			"toNodeId":"e5jSV",
			"type":"next"
		},
		{
			"fromNodeId":"e5jSV",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"fjwFz",
			"type":"if"
		},
		{
			"fromNodeId":"fjwFz",
			"priority":0,
			"skip":false,
			"toNodeId":"_SGRt5",
			"type":"next"
		},
		{
			"fromNodeId":"e5jSV",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_SGRt5",
			"type":"next"
		},
		{
			"fromNodeId":"_SGRt5",
			"priority":0,
			"skip":false,
			"toNodeId":"_XPCZS",
			"type":"next"
		},
		{
			"fromNodeId":"_XPCZS",
			"priority":0,
			"skip":false,
			"toNodeId":"_lTvyU",
			"type":"next"
		},
		{
			"fromNodeId":"_fr2Xj",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_lTvyU",
			"type":"next"
		},
		{
			"fromNodeId":"_lTvyU",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_AjPxN",
			"type":"if"
		},
		{
			"fromNodeId":"n_AjPxN",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"uwUFu",
			"type":"if"
		},
		{
			"fromNodeId":"uwUFu",
			"priority":0,
			"skip":false,
			"toNodeId":"r1Fof",
			"type":"next"
		},
		{
			"fromNodeId":"r1Fof",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"Oqpz0",
			"type":"if"
		},
		{
			"fromNodeId":"Oqpz0",
			"priority":0,
			"skip":false,
			"toNodeId":"_S0Ndk",
			"type":"next"
		},
		{
			"fromNodeId":"r1Fof",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_S0Ndk",
			"type":"next"
		},
		{
			"fromNodeId":"n_AjPxN",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_S0Ndk",
			"type":"next"
		},
		{
			"fromNodeId":"_S0Ndk",
			"priority":0,
			"skip":false,
			"toNodeId":"_cM82P",
			"type":"next"
		},
		{
			"fromNodeId":"_cM82P",
			"priority":0,
			"skip":false,
			"toNodeId":"_iLLS7",
			"type":"next"
		},
		{
			"fromNodeId":"_lTvyU",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_iLLS7",
			"type":"next"
		},
		{
			"fromNodeId":"_iLLS7",
			"priority":0,
			"skip":false,
			"toNodeId":"_oZ3ts",
			"type":"next"
		},
		{
			"fromNodeId":"_oZ3ts",
			"priority":0,
			"skip":false,
			"toNodeId":"_itYc2",
			"type":"next"
		},
		{
			"fromNodeId":"_itYc2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_pKiQX",
			"type":"next"
		},
		{
			"fromNodeId":"n_pKiQX",
			"priority":0,
			"skip":false,
			"toNodeId":"n_5SnNn",
			"type":"next"
		},
		{
			"fromNodeId":"n_5SnNn",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Q7YGQ",
			"type":"next"
		},
		{
			"fromNodeId":"n_Q7YGQ",
			"priority":0,
			"skip":false,
			"toNodeId":"_WmfU5",
			"type":"next"
		},
		{
			"fromNodeId":"n_5SnNn",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"_JOFsY",
			"type":"if"
		},
		{
			"fromNodeId":"_WmfU5",
			"priority":0,
			"skip":false,
			"toNodeId":"_JOFsY",
			"type":"next"
		},
		{
			"fromNodeId":"_JOFsY",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"_UdgDG",
			"type":"next"
		},
		{
			"fromNodeId":"_UdgDG",
			"priority":0,
			"skip":false,
			"toNodeId":"smTcR",
			"type":"next"
		},
		{
			"fromNodeId":"_JOFsY",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"0HqY9",
			"type":"if"
		},
		{
			"fromNodeId":"smTcR",
			"priority":0,
			"skip":false,
			"toNodeId":"0HqY9",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"673ede10befa5e1573509632",
	"lastModifiedBy":0,
	"lcName":"single lang common response publisher",
	"modifiedTime":1761722756850,
	"name":"Single Lang Common Response Publisher",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":53,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"ysaHW",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"success":{
							"type":"boolean",
							"title":"success"
						},
						"messageId":{
							"type":"string",
							"title":"Message Id"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"coPilotBlocks",
						"publishToEndUser",
						"fromCustomerUserId"
					],
					"properties":{
						"attachments":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"name":{
										"type":"string",
										"title":"name"
									},
									"mimeType":{
										"type":"string",
										"title":"mimeType"
									},
									"type":{
										"type":"string",
										"title":"type"
									},
									"url":{
										"type":"string",
										"title":"url"
									}
								},
								"additionalProperties":false
							},
							"title":"attachments"
						},
						"caseId":{
							"type":"string",
							"title":"caseId"
						},
						"endConversation":{
							"type":"boolean",
							"title":"endConversation"
						},
						"choices":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"id"
									},
									"title":{
										"type":"string",
										"title":"title"
									},
									"url":{
										"type":"string",
										"title":"Url"
									}
								},
								"additionalProperties":false
							},
							"title":"choices",
							"required":[]
						},
						"lang":{
							"type":"string",
							"title":"lang"
						},
						"content":{
							"type":"string",
							"title":"content"
						},
						"url":{
							"type":"string",
							"title":"url"
						},
						"coPilotBlocks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Co Pilot Blocks"
						},
						"publishToEndUser":{
							"type":"boolean",
							"title":"Publish To End User"
						},
						"temporaryMessage":{
							"type":"boolean",
							"title":"Temporary Message"
						},
						"fromCustomerUserId":{
							"type":"string",
							"title":"From Customer User Id"
						},
						"references":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"References"
						},
						"internalMessageType":{
							"type":"string",
							"title":"Internal Message Type"
						},
						"deepResearchEnabled":{
							"type":"boolean",
							"title":"Deep Research Enabled"
						},
						"followups":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Followups"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":7,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"3p5Mz",
			"index":2,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"internalMessageType":{
							"type":"string",
							"title":"Internal Message Type"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"internalMessageType":"{{ ysaHW.outputs.internalMessageType }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"internalMessageType":{
							"type":"string",
							"title":"Internal Message Type"
						},
						"_ua_variableDetails":{
							"items":{
								"type":"object",
								"properties":{
									"dataType":{
										"type":"string",
										"description":"Data type of the variable"
									},
									"name":{
										"type":"string",
										"description":"Name of the variable"
									},
									"description":{
										"type":"string",
										"description":"Description of the variable"
									}
								}
							},
							"type":"array",
							"title":"Variable Details"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":188,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"bTdY9",
			"index":3,
			"inputs":{
				"filters":[
					{
						"property":"{{ ysaHW.outputs.temporaryMessage }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					},
					{
						"property":"{{ 3p5Mz.outputs.internalMessageType }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"temporaryMessage",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":200,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"bTdY9@Bg74y-1@y",
			"id":"czBp1",
			"index":4,
			"inputs":{
				"variables":[
					{
						"source":"{{ 3p5Mz.outputs.internalMessageType }}",
						"value":"THOUGHT"
					}
				]
			},
			"skip":false,
			"subTitle":"internalMessageType",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_7P5h5",
			"index":5,
			"inputs":{
				"object_type":"e_ai_agent_conversation_state",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"id":"{{ ysaHW.outputs.caseId }}",
				"readThroughSessionVariables":false
			},
			"skip":false,
			"subTitle":"conversation state",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":458,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"n_ZfA3j",
			"index":6,
			"inputs":{
				"automationId":"6853f632c629c934b666a01d",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"caseId":"{{ ysaHW.outputs.caseId }}"
				}
			},
			"skip":false,
			"subTitle":"Load case",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_Xr1O6",
			"index":7,
			"inputs":{
				"object_type":"customer_profile",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"id":"{{ n_ZfA3j.outputs.properties.fromCustomerUserId }}",
				"readThroughSessionVariables":true
			},
			"skip":false,
			"subTitle":"customerProfile",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":33,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"n_FMsQt",
			"index":8,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"fromCustomerUserId":{
							"type":"string",
							"title":"From Customer User Id"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"fromCustomerUserId":"=IF(ISBLANK({{ ysaHW.outputs.fromCustomerUserId }}),{{ _7P5h5.outputs.properties.currentAIAgentId }},{{ ysaHW.outputs.fromCustomerUserId }})"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"fromCustomerUserId":{
							"type":"string",
							"title":"From Customer User Id"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"From customerUser Id",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":10,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_aslAx",
			"index":9,
			"inputs":{
				"filters":[
					{
						"property":"{{ _7P5h5.outputs.properties.triggerDetails.triggerDeploymentId }}",
						"filter":{
							"operator":"EQUAL",
							"value":"signal_trigger"
						}
					},
					{
						"filters":[
							{
								"property":"{{ n_FMsQt.outputs.fromCustomerUserId }}",
								"filter":{
									"operator":"EQUAL",
									"value":"{{ n_ZfA3j.outputs.properties.toCustomerUserId }}"
								}
							},
							{
								"property":"{{ ysaHW.outputs.internalMessageType }}",
								"filter":{
									"operator":"EQUAL",
									"value":"THOUGHT"
								}
							}
						],
						"operator":"OR"
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":84,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_aslAx@Bg74y-1@y",
			"id":"_DYksB",
			"index":10,
			"inputs":{
				"automationId":"674afe5adefb851816d61959",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"channelName":"{{ n_ZfA3j.outputs.properties.channelName }}",
					"text":"{{ ysaHW.outputs.content }}",
					"caseAssociationType":"PREVIOUS_FAN_MESSAGE",
					"messageType":"BOT",
					"caseId":"{{ ysaHW.outputs.caseId }}",
					"triggeredFromAutomationId":"{{ __RUN__.outputs.workflowId }}",
					"fromCustomerUserId":"{{ n_FMsQt.outputs.fromCustomerUserId }}",
					"toCustomerUserId":"{{ n_ZfA3j.outputs.properties.fromCustomerUserId }}",
					"internalMessageType":"{{ 3p5Mz.outputs.internalMessageType }}",
					"temporaryMessage":"=IF(ISBLANK({{ 3p5Mz.outputs.internalMessageType }}), FALSE(), TRUE())",
					"deepResearchEnabled":"{{ ysaHW.outputs.deepResearchEnabled }}",
					"attachments":{
						"source":"{{ ysaHW.outputs.attachments }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.attachments[0] }}"
					},
					"coPilotBlocks":{
						"source":"{{ ysaHW.outputs.coPilotBlocks }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.coPilotBlocks[0] }}"
					},
					"choiceList":{
						"source":"{{ ysaHW.outputs.choices }}",
						"ua:type":"mappedArray",
						"items":{
							"id":"{{ ysaHW.outputs.choices[0].id }}",
							"title":"{{ ysaHW.outputs.choices[0].title }}",
							"url":"{{ ysaHW.outputs.choices[0].url }}"
						}
					},
					"followups":{
						"source":"{{ ysaHW.outputs.followups }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.followups[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Create Message",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":55,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_aslAx@Bg74y-1@y",
			"id":"BDB7c",
			"index":11,
			"inputs":{
				"filters":[
					{
						"property":"{{ 3p5Mz.outputs.internalMessageType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"THOUGHT"
						}
					},
					{
						"property":"{{ 3p5Mz.outputs.internalMessageType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"CITATIONS"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"thought or citations ?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":57,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"BDB7c@_aslAx@Bg74y-1@y@y",
			"id":"CXrPT",
			"index":12,
			"inputs":{
				"result":{
					"success":true,
					"messageId":"{{ _DYksB.outputs.messageId }}"
				}
			},
			"skip":false,
			"subTitle":"return",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_aslAx@Bg74y-1@y",
			"id":"_iPA5U",
			"index":13,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"triggerInput"
					],
					"properties":{
						"triggerInput":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Trigger Input"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"messageId",
						"caseId",
						"triggerInput"
					],
					"properties":{
						"messageId":{
							"type":"string",
							"title":"Message Id"
						},
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"triggerInput":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Trigger Input"
						}
					}
				},
				"code":"triggerInput.put(\"messageId\", messageId)\nreturn [\"triggerInput\": triggerInput];",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"messageId":"{{ _DYksB.outputs.messageId }}",
					"caseId":"{{ _DYksB.outputs.caseId }}",
					"triggerInput":"{{ _7P5h5.outputs.properties.triggerDetails.triggerInput }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.endConversation",
					"root.parameters.choices.source",
					"root.parameters.choices.ua:type",
					"root.parameters.choices.items.id",
					"root.parameters.choices.items.title",
					"root.parameters.content",
					"root.parameters.url",
					"root.parameters.caseId",
					"root.parameters.lang",
					"root.parameters.attachments.source",
					"root.parameters.attachments.ua:type",
					"root.parameters.attachments.items.name",
					"root.parameters.attachments.items.url",
					"root.parameters.attachments.items.type",
					"root.parameters.attachments.items.mimeType",
					"root.parameters.publishToEndUser"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":11,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_aslAx@Bg74y-1@y",
			"id":"_3Ers7",
			"index":14,
			"inputs":{
				"callableInterfaceId":"66e80063f5ec4205eb06242c",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"callableInterfaces":[],
				"fallbackWorkflowId":"6761573aaaaee539c340ccab",
				"parameters":{
					"endConversation":"{{ ysaHW.outputs.endConversation }}",
					"content":"{{ ysaHW.outputs.content }}",
					"url":"{{ ysaHW.outputs.url }}",
					"caseId":"{{ ysaHW.outputs.caseId }}",
					"lang":"{{ ysaHW.outputs.lang }}",
					"input":{
						"triggerInput":"{{ _iPA5U.outputs.result.triggerInput }}"
					},
					"publishToEndUser":"{{ ysaHW.outputs.publishToEndUser }}",
					"fromCustomerUserId":"{{ n_FMsQt.outputs.fromCustomerUserId }}",
					"internalMessageType":"{{ 3p5Mz.outputs.internalMessageType }}",
					"deepResearchEnabled":"{{ ysaHW.outputs.deepResearchEnabled }}",
					"choices":{
						"source":"{{ ysaHW.outputs.choices }}",
						"ua:type":"mappedArray",
						"items":{
							"id":"{{ ysaHW.outputs.choices[0].id }}",
							"title":"{{ ysaHW.outputs.choices[0].title }}"
						}
					},
					"attachments":{
						"source":"{{ ysaHW.outputs.attachments }}",
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ ysaHW.outputs.attachments[0].name }}",
							"url":"{{ ysaHW.outputs.attachments[0].url }}",
							"type":"{{ ysaHW.outputs.attachments[0].type }}",
							"mimeType":"{{ ysaHW.outputs.attachments[0].mimeType }}"
						}
					},
					"coPilotBlocks":{
						"source":"{{ ysaHW.outputs.coPilotBlocks }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.coPilotBlocks[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":11,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_aslAx@Bg74y-1@y",
			"id":"_E7MpK",
			"index":15,
			"inputs":{
				"result":{
					"success":true,
					"messageId":"{{ _DYksB.outputs.messageId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":9,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_fr2Xj",
			"index":16,
			"inputs":{
				"filters":[
					{
						"property":"{{ ysaHW.outputs.publishToEndUser }}",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"true"
						}
					},
					{
						"property":"{{ _7P5h5.outputs.properties.triggerDetails.triggeredByAgentDetails.waitingInstanceId }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Respond back to caller",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.references.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":82,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_fr2Xj@Bg74y-1@y",
			"id":"jkXe2",
			"index":17,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"response":{
							"type":"string",
							"title":"Response"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"references":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"References"
						},
						"content":{
							"type":"string",
							"title":"Content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"if (!binding.hasVariable('content')){\n  return [:]\n}\nif (binding.hasVariable('references')){\n  content += 'These are the chunk ids of the knowledge refered : ' + references\n}\nreturn ['response': 'Response: ' + content]",
				"parameters":{
					"references":{
						"source":"{{ ysaHW.outputs.references }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.references[0] }}"
					},
					"content":"{{ ysaHW.outputs.content }}"
				}
			},
			"skip":false,
			"subTitle":"Add reference list in response",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":55,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_fr2Xj@Bg74y-1@y",
			"id":"e5jSV",
			"index":18,
			"inputs":{
				"filters":[
					{
						"property":"{{ 3p5Mz.outputs.internalMessageType }}",
						"filter":{
							"operator":"EQUAL",
							"value":"THOUGHT"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"thought Message ?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":57,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"e5jSV@_fr2Xj@Bg74y-1@y@y",
			"id":"fjwFz",
			"index":19,
			"inputs":{
				"result":{
					"success":true
				}
			},
			"skip":false,
			"subTitle":"return",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"signals_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"signals_by_unifyapps_emit_signal",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_fr2Xj@Bg74y-1@y",
			"id":"_SGRt5",
			"index":20,
			"inputs":{
				"automation_id":"675d41706a03ce746de200c5",
				"with_signal_id":false,
				"waitingInstanceRuntimeType":"{{ _7P5h5.outputs.properties.triggerDetails.triggeredByAgentDetails.waitingInstanceRunTimeType }}",
				"waitingInstanceId":"{{ _7P5h5.outputs.properties.triggerDetails.triggeredByAgentDetails.waitingInstanceId }}",
				"signal_payload":{
					"signal_time_out":false,
					"signal_payload":{
						"response":"{{ jkXe2.outputs.result.response }}"
					}
				},
				"nodeId":"_BRrsJ"
			},
			"skip":false,
			"subTitle":"Signals by UnifyApps",
			"title":"Emit signal",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":10,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_fr2Xj@Bg74y-1@y",
			"id":"_XPCZS",
			"index":21,
			"inputs":{
				"result":{
					"success":true
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":2,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_lTvyU",
			"index":22,
			"inputs":{
				"filters":[
					{
						"property":"{{ _7P5h5.outputs.properties.triggerDetails.triggerDeploymentId }}",
						"filter":{
							"operator":"MISSING"
						}
					},
					{
						"property":"{{ _7P5h5.outputs.properties.triggerDetails.triggerDeploymentId }}",
						"filter":{
							"operator":"EQUAL",
							"value":"signal_trigger"
						}
					}
				],
				"operator":"OR"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_lTvyU@Bg74y-1@y",
			"id":"n_AjPxN",
			"index":23,
			"inputs":{
				"filters":[
					{
						"property":"{{ ysaHW.outputs.references[0] }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":72,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_AjPxN@_lTvyU@Bg74y-1@y@y",
			"id":"uwUFu",
			"index":24,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"properties_chunkNumber",
							"filter":{
								"operator":"IN",
								"value":"{{ ysaHW.outputs.references }}"
							}
						},
						{
							"property":"properties_caseId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ ysaHW.outputs.caseId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"citation_store",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"page":{
					"paginateBy":"OFFSET",
					"limit":20
				},
				"numberOfRecordsToFetch":"MULTIPLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Citations",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":81,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_AjPxN@_lTvyU@Bg74y-1@y@y",
			"id":"r1Fof",
			"index":25,
			"inputs":{
				"filters":[
					{
						"property":"{{ uwUFu.outputs.objects[0].properties.columnData[0] }}",
						"filter":{
							"operator":"MISSING"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Citations present",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":11,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"r1Fof@n_AjPxN@_lTvyU@Bg74y-1@y@y@y",
			"id":"Oqpz0",
			"index":26,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"references":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"References"
						}
					},
					"additionalProperties":false,
					"required":[
						"references"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"chunks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Chunks"
						}
					},
					"additionalProperties":false,
					"required":[
						"chunks"
					]
				},
				"compile_static":false,
				"code":"\nMap<String, Object> references = new HashMap<>()\nList<Object> finalReferenceList = new ArrayList<>()\nif (!binding.hasVariable(\"chunks\")){\n    return [:]\n}\nint ctr = 0\nfor (chunk in chunks) {\n    if (chunk == null || chunk.content == null) {\n        continue\n    }\n\n    ctr++\n    def metadata = chunk.metadata ?: [:]\n    def chunkContent = chunk.content\n    def chunkIdentifier = metadata.get(\"name\") ?: \"CHUNK_$ctr\" // Assign identifier\n\n    // Ensure metadata does not contain chunkId\n    metadata.remove(\"chunkId\")\n\n    def chunkContents = []\n    def existingChunkMetadata = references.get(chunkIdentifier)\n\n    if (existingChunkMetadata != null) {\n        chunkContents.addAll(existingChunkMetadata[\"chunkContents\"] ?: [])\n    }\n\n    chunkContents.add(chunkContent ?: \"\")\n    metadata[\"chunkContents\"] = chunkContents\n\n    references.put(chunkIdentifier, metadata)\n}\n\n// Convert map values to final reference list\nfinalReferenceList.addAll(references.values())\n\nreturn [\"references\": finalReferenceList]",
				"parameters":{
					"chunks":{
						"source":"{{ uwUFu.outputs.objects }}",
						"ua:type":"mappedArray",
						"items":"{{ uwUFu.outputs.objects[0].properties }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Get citations",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.endConversation",
					"root.parameters.choices.source",
					"root.parameters.choices.ua:type",
					"root.parameters.choices.items.id",
					"root.parameters.choices.items.title",
					"root.parameters.content",
					"root.parameters.url",
					"root.parameters.caseId",
					"root.parameters.lang",
					"root.parameters.attachments.source",
					"root.parameters.attachments.ua:type",
					"root.parameters.attachments.items.name",
					"root.parameters.attachments.items.url",
					"root.parameters.attachments.items.type",
					"root.parameters.attachments.items.mimeType"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":2,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_lTvyU@Bg74y-1@y",
			"id":"_S0Ndk",
			"index":27,
			"inputs":{
				"callableInterfaceId":"66e80063f5ec4205eb06242c",
				"runtimeConnections":{},
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"67401fb6a28c4a295d14cd30",
				"parameters":{
					"endConversation":"{{ ysaHW.outputs.endConversation }}",
					"content":"{{ ysaHW.outputs.content }}",
					"url":"{{ ysaHW.outputs.url }}",
					"caseId":"{{ ysaHW.outputs.caseId }}",
					"lang":"{{ ysaHW.outputs.lang }}",
					"temporaryMessage":"{{ ysaHW.outputs.temporaryMessage }}",
					"fromCustomerUserId":"{{ n_FMsQt.outputs.fromCustomerUserId }}",
					"internalMessageType":"{{ 3p5Mz.outputs.internalMessageType }}",
					"deepResearchEnabled":"{{ ysaHW.outputs.deepResearchEnabled }}",
					"choices":{
						"source":"{{ ysaHW.outputs.choices }}",
						"ua:type":"mappedArray",
						"items":{
							"id":"{{ ysaHW.outputs.choices[0].id }}",
							"title":"{{ ysaHW.outputs.choices[0].title }}"
						}
					},
					"attachments":{
						"source":"{{ ysaHW.outputs.attachments }}",
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ ysaHW.outputs.attachments[0].name }}",
							"url":"{{ ysaHW.outputs.attachments[0].url }}",
							"type":"{{ ysaHW.outputs.attachments[0].type }}",
							"mimeType":"{{ ysaHW.outputs.attachments[0].mimeType }}"
						}
					},
					"chunkMetadata":{
						"source":"{{ Oqpz0.outputs.result.references }}",
						"ua:type":"mappedArray",
						"items":"{{ Oqpz0.outputs.result.references[0] }}"
					},
					"coPilotBlocks":{
						"source":"{{ ysaHW.outputs.coPilotBlocks }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.coPilotBlocks[0] }}"
					},
					"followups":{
						"source":"{{ ysaHW.outputs.followups }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.followups[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":10,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_lTvyU@Bg74y-1@y",
			"id":"_cM82P",
			"index":28,
			"inputs":{
				"result":{
					"success":true,
					"messageId":"{{ _S0Ndk.outputs.messageId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"CONTINUE",
			"groupId":"Bg74y-1",
			"id":"_iLLS7",
			"index":29,
			"inputs":{
				"object_type":"ai_agent_deployment",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"id":"{{ _7P5h5.outputs.properties.triggerDetails.triggerDeploymentId }}",
				"readThroughSessionVariables":true
			},
			"options":{
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"enabled":false
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false
				},
				"logConfig":{
					"enabled":false
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"CONTINUE",
				"telemetryConfig":{
					"enableTelemetry":false
				}
			},
			"skip":false,
			"subTitle":"deployment",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2,
				"resourceName":"storage_by_unifyapps_get_record_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_oZ3ts",
			"index":30,
			"inputs":{
				"object_type":"e_ai_agent_trigger_template",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"id":"{{ _iLLS7.outputs.properties.trigger.context.resourceName }}",
				"readThroughSessionVariables":true
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch record by ID",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":88,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_itYc2",
			"index":31,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"connectionOverrides",
						"combinedInput"
					],
					"properties":{
						"connectionOverrides":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Connection Overrides"
						},
						"combinedInput":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Combined Input"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"connectionId",
						"appName"
					],
					"properties":{
						"connectionId":{
							"type":"string",
							"title":"Connection Id"
						},
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						},
						"appName":{
							"type":"string",
							"title":"App Name"
						}
					}
				},
				"code":"def toReturn = [:]\nif(binding.hasVariable('connectionId')) {\n  def resp = [:]\n  resp[appName] = connectionId\n  toReturn += [\"connectionOverrides\": resp]\n}\ndef combinedInput = [:]\nif(binding.hasVariable('inputs')){\n   Map inputMap = inputs \n    inputMap.each { String key, value ->\n        if (key != null && value != null) { \n            combinedInput.put(key, value)\n        }\n    }\n}\ntoReturn.put(\"combinedInput\", combinedInput)\nreturn toReturn",
				"compile_static":false,
				"isAsync":false,
				"captureStdOutput":false,
				"parameters":{
					"connectionId":"{{ _iLLS7.outputs.properties.trigger.context.connectionId }}",
					"inputs":"{{ _iLLS7.outputs.properties.trigger.inputs }}",
					"appName":"{{ _iLLS7.outputs.properties.trigger.context.appName }}"
				}
			},
			"skip":false,
			"subTitle":"inputsAndConnections",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":460,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"n_pKiQX",
			"index":32,
			"inputs":{
				"automationId":"67a48d37f8f1744841dabb63",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"aiAgentId":"=IF(ISBLANK({{ _7P5h5.outputs.properties.currentAIAgentId }}),{{ _iLLS7.outputs.properties.aiAgentId }},{{ _7P5h5.outputs.properties.currentAIAgentId }})"
				}
			},
			"skip":false,
			"subTitle":"GetAgentCached",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"n_5SnNn",
			"index":33,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_pKiQX.outputs.properties.responseGenerationSettings.disableThought }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					},
					{
						"filters":[
							{
								"property":"{{ 3p5Mz.outputs.internalMessageType }}",
								"filter":{
									"operator":"EQUAL",
									"value":"THOUGHT"
								}
							},
							{
								"property":"{{ 3p5Mz.outputs.internalMessageType }}",
								"filter":{
									"operator":"EQUAL",
									"value":"AGENT_INTERNAL_RESPONSE"
								}
							}
						],
						"operator":"OR"
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":268,
				"resourceName":"storage_by_unifyapps_update_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_5SnNn@Bg74y-1@n",
			"id":"n_Q7YGQ",
			"index":34,
			"inputs":{
				"numberOfRecordsToUpdate":"SINGLE",
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ ysaHW.outputs.caseId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"service_hub_case",
				"skipIfBlank":false,
				"updateFields":[
					{
						"fieldName":"properties.additional.lastAssociatedMassageType",
						"actionType":"SET",
						"setValue":"BOT"
					}
				],
				"skipIfEmpty":false,
				"page":{
					"offset":0,
					"limit":20
				},
				"unsetIfNull":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Update records by query",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.endConversation",
					"root.parameters.choices.source",
					"root.parameters.choices.ua:type",
					"root.parameters.choices.items.id",
					"root.parameters.choices.items.title",
					"root.parameters.content",
					"root.parameters.url",
					"root.parameters.caseId",
					"root.parameters.lang",
					"root.parameters.attachments.source",
					"root.parameters.attachments.ua:type",
					"root.parameters.attachments.items.name",
					"root.parameters.attachments.items.url",
					"root.parameters.attachments.items.type",
					"root.parameters.attachments.items.mimeType"
				]
			},
			"context":{
				"appName":"callables",
				"resourceVersion":76,
				"resourceName":"callables_call_interface",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_5SnNn@Bg74y-1@n",
			"id":"_WmfU5",
			"index":35,
			"inputs":{
				"callableInterfaceId":"66e80063f5ec4205eb06242c",
				"runtimeConnections":"{{ _itYc2.outputs.result.connectionOverrides }}",
				"synchronous":true,
				"triggerWorkflowWithRuntimeType":"DEFAULT",
				"fallbackWorkflowId":"{{ _oZ3ts.outputs.properties.publishAutomationId }}",
				"parameters":{
					"endConversation":"{{ ysaHW.outputs.endConversation }}",
					"content":"{{ ysaHW.outputs.content }}",
					"url":"{{ ysaHW.outputs.url }}",
					"caseId":"{{ ysaHW.outputs.caseId }}",
					"lang":"{{ ysaHW.outputs.lang }}",
					"input":{
						"triggerInput":"{{ _7P5h5.outputs.properties.triggerDetails.triggerInput }}",
						"userInputsForPublish":"{{ _itYc2.outputs.result.combinedInput }}"
					},
					"caseDetails":{
						"customerUserDetails":{
							"channelUserId":"{{ _Xr1O6.outputs.properties.channelSpecificId }}"
						}
					},
					"fromCustomerUserId":"{{ n_FMsQt.outputs.fromCustomerUserId }}",
					"internalMessageType":"{{ 3p5Mz.outputs.internalMessageType }}",
					"choices":{
						"source":"{{ ysaHW.outputs.choices }}",
						"ua:type":"mappedArray",
						"items":{
							"id":"{{ ysaHW.outputs.choices[0].id }}",
							"title":"{{ ysaHW.outputs.choices[0].title }}"
						}
					},
					"attachments":{
						"source":"{{ ysaHW.outputs.attachments }}",
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ ysaHW.outputs.attachments[0].name }}",
							"url":"{{ ysaHW.outputs.attachments[0].url }}",
							"type":"{{ ysaHW.outputs.attachments[0].type }}",
							"mimeType":"{{ ysaHW.outputs.attachments[0].mimeType }}"
						}
					},
					"coPilotBlocks":{
						"source":"{{ ysaHW.outputs.coPilotBlocks }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.coPilotBlocks[0] }}"
					},
					"followups":{
						"source":"{{ ysaHW.outputs.followups }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.followups[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Channel Response Publisher (AI Agent)",
			"title":"Call interface",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":77,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"_JOFsY",
			"index":36,
			"inputs":{
				"filters":[
					{
						"property":"{{ _iLLS7.outputs.properties.trigger.context.appName }}",
						"filter":{
							"operator":"EQUAL",
							"value":"unify_ai"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"coPilot?",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":84,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_JOFsY@Bg74y-1@n",
			"id":"_UdgDG",
			"index":37,
			"inputs":{
				"automationId":"674afe5adefb851816d61959",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"channelName":"{{ n_ZfA3j.outputs.properties.customProperties.channelName }}",
					"text":"{{ ysaHW.outputs.content }}",
					"caseAssociationType":"PREVIOUS_FAN_MESSAGE",
					"messageType":"BOT",
					"caseId":"{{ ysaHW.outputs.caseId }}",
					"triggeredFromAutomationId":"{{ __RUN__.outputs.workflowId }}",
					"fromCustomerUserId":"{{ n_FMsQt.outputs.fromCustomerUserId }}",
					"toCustomerUserId":"{{ n_ZfA3j.outputs.properties.fromCustomerUserId }}",
					"internalMessageType":"{{ 3p5Mz.outputs.internalMessageType }}",
					"temporaryMessage":"{{ ysaHW.outputs.temporaryMessage }}",
					"channelSpecificMessageId":"{{ _WmfU5.outputs.messageId }}",
					"deepResearchEnabled":"{{ ysaHW.outputs.deepResearchEnabled }}",
					"attachments":{
						"source":"{{ ysaHW.outputs.attachments }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.attachments[0] }}"
					},
					"followups":{
						"source":"{{ ysaHW.outputs.followups }}",
						"ua:type":"mappedArray",
						"items":"{{ ysaHW.outputs.followups[0] }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Create Message",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":7,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_JOFsY@Bg74y-1@n",
			"id":"smTcR",
			"index":38,
			"inputs":{
				"variables":[
					{
						"source":"{{ 3p5Mz.outputs.messageId }}",
						"value":"{{ _UdgDG.outputs.messageId }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":45,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"Bg74y-1",
			"id":"0HqY9",
			"index":39,
			"inputs":{
				"result":{
					"success":"true",
					"messageId":"{{ 3p5Mz.outputs.messageId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":1866,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		"AI Agent"
	],
	"version":152
}