{
	"appsUsed":[
		
	],
	"createdTime":1746727896221,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296166696,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfce60c3d19149a9e3446",
		"status":"DEPLOYED",
		"version":54,
		"workflowVersion":72
	},
	"edges":[
		{
			"fromNodeId":"NVLFE",
			"priority":0,
			"skip":false,
			"toNodeId":"n_DS4VJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_DS4VJ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_S00Jo",
			"type":"next"
		},
		{
			"fromNodeId":"n_S00Jo",
			"priority":0,
			"skip":false,
			"toNodeId":"KP9cp",
			"type":"next"
		},
		{
			"fromNodeId":"KP9cp",
			"priority":0,
			"skip":false,
			"toNodeId":"cKuWx",
			"type":"next"
		},
		{
			"fromNodeId":"cKuWx",
			"priority":0,
			"skip":false,
			"toNodeId":"L2sH0",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"681c81e891321b2f5fc0983c",
	"lastModifiedBy":0,
	"lcName":"publish tool app block",
	"modifiedTime":1761722679789,
	"name":"Publish Tool App Block",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"NVLFE",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"success":{
							"type":"boolean",
							"title":"Success"
						}
					},
					"additionalProperties":false,
					"required":[
						"success"
					]
				},
				"setup":{
					"type":"object",
					"properties":{
						"caseId":{
							"type":"string",
							"title":"Case Id"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						},
						"appName":{
							"type":"string",
							"title":"App Name"
						},
						"toolName":{
							"type":"string",
							"title":"Tool Name"
						}
					},
					"additionalProperties":false,
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"standard_entities",
				"resourceVersion":453,
				"resourceName":"standard_entities_lookup_entities",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_DS4VJ",
			"index":2,
			"inputs":{
				"keys":[
					"Executing"
				],
				"lookupType":"ENTITY_ID:e_translations",
				"type":"ByKeys"
			},
			"options":{
				"bulkheadConfig":{
					"enabled":false,
					"maxLeaseTimeUnit":"SECONDS",
					"maxWaitDurationUnit":"SECONDS"
				},
				"businessHoursConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"cacheConfig":{
					"cacheKey":"Executing_{{ __USER__.outputs.locale }}",
					"enabled":true,
					"timeToLive":"60",
					"usagePolicy":"ALWAYS"
				},
				"circuitBreakerConfig":{
					"enabled":false
				},
				"disableLogging":false,
				"enabledForReExecution":false,
				"hookConfig":{
					"enabled":false,
					"postHooks":[
						
					],
					"preHooks":[
						
					]
				},
				"logConfig":{
					"enabled":false,
					"logPolicies":[
						
					]
				},
				"rateLimitConfig":{
					"enabled":false,
					"waitForNextWindow":false
				},
				"retryConfig":{
					"backOffFactor":null,
					"captureRetries":false,
					"enabled":false
				},
				"stepError":"STOP",
				"telemetryConfig":{
					"enableTelemetry":false,
					"metricConfigs":[
						
					]
				}
			},
			"skip":false,
			"subTitle":"Standard entities by UnifyApps",
			"title":"Lookup Request",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":452,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"n_S00Jo",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"translatedText":{
							"type":"string",
							"title":"Translated Text"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"response":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Response"
						}
					}
				},
				"code":"if (!binding.hasVariable('response')) {\n  response = [:]\n}\n\n\ndef translatedText = response?.objects?.Executing?.properties?.label\n\nif (translatedText == null || translatedText == \"\") {\n    translatedText = \"Executing\"\n}\n\n\nreturn [translatedText : translatedText]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"response":"{{ n_DS4VJ.outputs.response }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.citations.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":119,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"KP9cp",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"coPilotBlocks":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Co Pilot Blocks"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"appName":{
							"type":"string",
							"title":"App Name"
						},
						"toolName":{
							"type":"string",
							"title":"Tool Name"
						},
						"translatedText":{
							"type":"string",
							"title":"Translated Text"
						}
					}
				},
				"code":"// def coPilotBlocks = [ [\n//     \"data\": [\n//       \"1\":  [\n//         \"data\": [\n//           \"text\": \"Executing\"\n//         ],\n//         \"blockType\": \"Typography\",\n//         \"appearance\": [\n//           \"color\": \"text-primary\",\n//           \"variant\": \"text-sm\"\n//         ]\n//       ],\n//       \"toolCitation\":[\n//         \"data\": [\n//           \"citations\": [\n//             [\n//               \"appName\": appName,\n//               \"name\": toolName\n//             ]\n//           ]\n//         ],\n//         \"blockType\": \"Citation\"\n//       ]\n//     ],\n//     \"blockType\": \"Stack\",\n//     \"appearance\": [\n//       \"alignItems\": \"center\",\n//       \"styles\": [\n//         \"gap\": [\n//           \"all\": \"gap-sm\"\n//         ],\n//         \"margin\": [\n//           \"t\": \"-mt-xxs\"\n//         ],\n//         \"width\": \"w-full\"\n//       ],\n//       \"wrapContent\": false,\n//       \"justifyContent\": \"flex-start\",\n//       \"direction\": \"row\"\n//     ]\n//   ]]\ndef coPilotBlocks = []\n\ndef toolBlock = [\n    \"blockType\": \"Typography\",\n    \"data\": [\n        \"text\": translatedText\n    ],\n    \"appearance\": [\n        \"variant\": \"text-xs\",\n        \"color\": \"text-quaternary\",\n        \"styles\": [\n                \"margin\": [\n                    \"t\": \"mt-xs\"\n                ]\n            ]\n    ]\n]\n\ncoPilotBlocks.add(toolBlock)\ncoPilotBlocks.add([\n    \"blockType\": \"Citation\",\n    \"data\": [\n        \"citations\": [\n            [\n                \"appName\": appName,\n                \"name\": toolName\n            ]\n        ]\n    ]\n])\n\n\nreturn [\"coPilotBlocks\": coPilotBlocks]\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"appName":"{{ NVLFE.outputs.appName }}",
					"toolName":"{{ NVLFE.outputs.toolName }}",
					"translatedText":"{{ n_S00Jo.outputs.result.translatedText }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"conv_ai_by_unifyapps",
				"resourceVersion":108,
				"resourceName":"conv_ai_by_unifyapps_publish_response",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"cKuWx",
			"index":5,
			"inputs":{
				"callableInterfaceId":"__ua__publish_response_interface",
				"parameters":{
					"responses":[
						{
							"language":"en"
						}
					],
					"caseId":"{{ NVLFE.outputs.caseId  }}",
					"temporaryMessage":true,
					"coPilotBlocks":{
						"source":"{{ KP9cp.outputs.result.coPilotBlocks }}",
						"ua:type":"mappedArray",
						"items":"{{ KP9cp.outputs.result.coPilotBlocks[0] }}"
					},
					"publishToEndUser":true,
					"fromCustomerUserId":"{{ NVLFE.outputs.aiAgentId  }}"
				}
			},
			"skip":false,
			"subTitle":"Conversation AI by UnifyApps",
			"title":"Publish Response",
			"type":"CALL_INTERFACE_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4ZR9C-1",
			"id":"L2sH0",
			"index":6,
			"inputs":{
				"result":{
					"success":true
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":-1,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"version":74
}