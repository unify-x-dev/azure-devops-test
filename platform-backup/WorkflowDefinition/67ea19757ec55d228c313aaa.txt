{
	"appsUsed":[
		"github"
	],
	"createdTime":1743395189127,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296196810,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfd04672fcc41fb70f0b7",
		"status":"DEPLOYED",
		"version":38,
		"workflowVersion":90
	},
	"edges":[
		{
			"fromNodeId":"1ierk",
			"priority":0,
			"skip":false,
			"toNodeId":"CELiN",
			"type":"next"
		},
		{
			"fromNodeId":"CELiN",
			"priority":0,
			"skip":false,
			"toNodeId":"scIHn",
			"type":"next"
		},
		{
			"fromNodeId":"scIHn",
			"priority":0,
			"skip":false,
			"toNodeId":"3ZRYI",
			"type":"next"
		},
		{
			"fromNodeId":"3ZRYI",
			"priority":0,
			"skip":false,
			"toNodeId":"Wkwe7",
			"type":"next"
		},
		{
			"fromNodeId":"Wkwe7",
			"priority":0,
			"skip":false,
			"toNodeId":"gGCE8",
			"type":"next"
		},
		{
			"fromNodeId":"gGCE8",
			"priority":0,
			"skip":false,
			"toNodeId":"wfiX0",
			"type":"next"
		},
		{
			"fromNodeId":"wfiX0",
			"priority":0,
			"skip":false,
			"toNodeId":"TbxQI",
			"type":"loop"
		},
		{
			"fromNodeId":"TbxQI",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"opQxL",
			"type":"if"
		},
		{
			"fromNodeId":"opQxL",
			"priority":0,
			"skip":false,
			"toNodeId":"5k8Qu",
			"type":"next"
		},
		{
			"fromNodeId":"5k8Qu",
			"priority":0,
			"skip":false,
			"toNodeId":"LXy9k",
			"type":"next"
		},
		{
			"fromNodeId":"TbxQI",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"PSZnV",
			"type":"next"
		},
		{
			"fromNodeId":"LXy9k",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"wfiX0",
			"type":"next"
		},
		{
			"fromNodeId":"PSZnV",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"wfiX0",
			"type":"next"
		},
		{
			"fromNodeId":"wfiX0",
			"priority":0,
			"skip":false,
			"toNodeId":"M7RUV",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"67ea19757ec55d228c313aaa",
	"lastModifiedBy":0,
	"lcName":"knowledge indexer | github commits",
	"modifiedTime":1761722730050,
	"name":"Knowledge Indexer | Github Commits",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":416,
				"resourceName":"callables_from_interface"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"1ierk",
			"index":0,
			"inputs":{
				"result":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"cursorObject":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"cursorObject"
						},
						"success":{
							"type":"boolean",
							"title":"Success"
						},
						"lastSyncTime":{
							"type":"string",
							"title":"Last Sync Time"
						}
					},
					"required":[]
				},
				"callableInterfaceId":"674855d2634d220ea5dd2d71",
				"setup":{
					"additionalProperties":false,
					"ua:modal":{
						"field_type":"STRING",
						"is_optional":true
					},
					"type":"object",
					"properties":{
						"knowledgeId":{
							"type":"string",
							"title":"knowledgeId"
						},
						"aiAgentId":{
							"type":"string",
							"title":"aiAgentId"
						},
						"knowledge":{
							"type":"object",
							"properties":{
								"readVersion":{
									"type":"integer",
									"title":"readVersion"
								},
								"lastSyncTime":{
									"type":"integer",
									"title":"lastSyncTime"
								},
								"cursorObject":{
									"type":"object",
									"title":"cursorObject"
								},
								"applicationInfo":{
									"type":"object",
									"properties":{
										"context":{
											"type":"object",
											"properties":{
												"connectionId":{
													"type":"string",
													"title":"Connection Id"
												}
											},
											"additionalProperties":false,
											"title":"Context",
											"required":[]
										}
									},
									"additionalProperties":false,
									"title":"Application Info",
									"required":[]
								}
							},
							"title":"knowledge",
							"additionalProperties":false,
							"required":[]
						},
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger interface",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":435,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"CELiN",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"owner":{
							"type":"string",
							"title":"Owner"
						},
						"repo":{
							"type":"string",
							"title":"Repo"
						},
						"pr_number":{
							"type":"integer",
							"title":"Pull Number"
						}
					},
					"additionalProperties":false,
					"required":[
						"owner",
						"repo",
						"pr_number"
					]
				},
				"input":{
					"type":"object",
					"properties":{
						"inputs":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Inputs"
						}
					},
					"additionalProperties":false,
					"required":[
						"inputs"
					]
				},
				"compile_static":false,
				"code":"def result = [:]\n\nif (!binding.hasVariable('inputs')) {\n    return result\n}\n\nif (inputs.owner) result << [\"owner\": inputs.owner]\nif (inputs.repo) result << [\"repo\": inputs.repo]\nif (inputs.pr_number) result << [\"pr_number\": inputs.pr_number]\n\n\nreturn result\n",
				"parameters":{
					"inputs":"{{ 1ierk.outputs.inputs }}"
				}
			},
			"skip":false,
			"subTitle":"Parse Input",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"github",
				"resourceVersion":2638,
				"connectionId":"672853b321446a2ac8d12d50",
				"resourceName":"github_get_user",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"scIHn",
			"index":0,
			"skip":false,
			"subTitle":"Github",
			"title":"Get User details",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":450,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"3ZRYI",
			"index":0,
			"inputs":{
				"automationId":"67e390229982b026deebbee1",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"fileId":"{{ scIHn.outputs.email }}",
					"userEmailAddress":"{{ scIHn.outputs.email }}"
				}
			},
			"skip":false,
			"subTitle":"sharedWithIds",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"github",
				"resourceVersion":3750,
				"connectionId":"672853b321446a2ac8d12d50",
				"resourceName":"github_get_pull_request",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"Wkwe7",
			"index":0,
			"inputs":{
				"owner":"{{ CELiN.outputs.result.owner }}",
				"pull_number":"{{ CELiN.outputs.result.pr_number }}",
				"repo":"{{ CELiN.outputs.result.repo }}"
			},
			"skip":false,
			"subTitle":"Github",
			"title":"Get pull request (PR)",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":435,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"gGCE8",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"commits":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"sha":{
										"type":"string",
										"title":"Sha"
									},
									"date":{
										"type":"string",
										"title":"Date"
									},
									"author_name":{
										"type":"string",
										"title":"Author Name"
									},
									"author_email":{
										"type":"string",
										"title":"Author Email"
									},
									"verified_status":{
										"type":"string",
										"title":"Verified Status"
									},
									"comment_count":{
										"type":"string",
										"title":"Comment Count"
									},
									"url":{
										"type":"string",
										"title":"Url"
									},
									"chunks":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"message":{
													"type":"string",
													"title":"Message"
												},
												"sha":{
													"type":"string",
													"title":"Sha"
												},
												"commit_files":{
													"type":"array",
													"items":{
														"type":"object",
														"properties":{
															"file_name":{
																"type":"string",
																"title":"File Name"
															},
															"sha":{
																"type":"string",
																"title":"Sha"
															},
															"status":{
																"type":"string",
																"title":"Status"
															}
														},
														"additionalProperties":false,
														"required":[
															"file_name",
															"sha",
															"status"
														]
													},
													"title":"Files"
												}
											},
											"additionalProperties":false,
											"required":[]
										},
										"title":"Chunks"
									}
								},
								"additionalProperties":false,
								"required":[
									"chunks"
								]
							},
							"title":"Commits"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"commits_url":{
							"type":"string",
							"title":"Commits Url"
						}
					},
					"additionalProperties":false,
					"required":[
						"commits_url"
					]
				},
				"compile_static":false,
				"code":"import com.unifyapps.infra.utils.JsonUtils\nimport java.text.SimpleDateFormat\nimport java.util.TimeZone\n\ndef output = [:]\ndef commits_url_arg = binding.hasVariable('commits_url') && commits_url ? commits_url : null\n\nstatic long convertToMillis(String timestamp) {\n    def format = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssX\")\n    format.setTimeZone(TimeZone.getTimeZone(\"UTC\"))\n    def date = format.parse(timestamp)\n    return date.getTime()\n}\n\ndef getContent(url)\n{\n    return new URL(url).text\n}\n\ndef processUrl(url) {\n    def commits = []\n\n    if (url == null) {\n        return commits\n    }\n\n    def content = getContent(url)\n    def response = JsonUtils.fromJson(content, List.class)\n\n    for (item in response) {\n        def result = [:]\n        def chunksMap = [:]\n        def chunksArr = []\n\n        if (item) {\n            def rawFiles = []\n            def files = []\n\n            def urlContent = getContent(item.get(\"url\"))\n            def urlContentMap = JsonUtils.fromJson(urlContent, Map.class)\n            rawFiles = urlContentMap.get(\"files\") ?: []\n\n        for (file in rawFiles) {\n            def fileMap = [:]\n            fileMap[\"filename\"] = file.get(\"filename\")\n            fileMap[\"status\"] = file.get(\"status\")\n            fileMap[\"sha\"] = file.get(\"sha\")\n            files << fileMap\n        }\n\n            result.put(\"sha\", item.get(\"sha\"))\n            result.put(\"author_name\", item.get(\"commit\")?.get(\"author\")?.get(\"name\"))\n            result.put(\"author_email\", item.get(\"commit\")?.get(\"author\")?.get(\"email\"))\n            result.put(\"date\", convertToMillis(item.get(\"commit\")?.get(\"author\")?.get(\"date\")))\n            result.put(\"comment_count\", item.get(\"commit\")?.get(\"comment_count\"))\n            result.put(\"url\", item.get(\"url\"))\n            result.put(\"verified_status\", item.get(\"commit\")?.get(\"verification\")?.get(\"verified\"))\n\n            chunksMap.put(\"message\", item.get(\"commit\")?.get(\"message\"))\n            chunksMap.put(\"sha\", item.get(\"sha\"))\n            chunksMap.put(\"commit_files\", files)\n            chunksArr << chunksMap\n            result.put(\"chunks\", chunksArr)\n            commits << result\n        }\n    }\n\n    return commits\n}\n\noutput.put(\"commits\", processUrl(commits_url_arg))\n\nreturn output\n",
				"parameters":{
					"commits_url":"{{ Wkwe7.outputs.commits_url }}"
				}
			},
			"skip":false,
			"subTitle":"Parse Output",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":467,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"wfiX0",
			"index":0,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ gGCE8.outputs.result.commits }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":439,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"wfiX0@mmA80-1@l",
			"id":"TbxQI",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ wfiX0.outputs.item.chunks[0].message }}",
						"filter":{
							"operator":"EXISTS"
						}
					},
					{
						"property":"{{ wfiX0.outputs.item.chunks[0].commit_files[0].sha }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":440,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"TbxQI@wfiX0@mmA80-1@l@y",
			"id":"opQxL",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"chunkMetadata":{
							"type":"object",
							"properties":{
								"sha":{
									"type":"string",
									"title":"Sha"
								},
								"url":{
									"type":"string",
									"title":"Url"
								},
								"author_name":{
									"type":"string",
									"title":"Author Name"
								},
								"author_email":{
									"type":"string",
									"title":"Author Email"
								},
								"verified_status":{
									"type":"string",
									"title":"Verified Status"
								},
								"message":{
									"type":"string",
									"title":"Message"
								},
								"date":{
									"type":"string",
									"title":"Date"
								},
								"comment_count":{
									"type":"integer",
									"title":"Comment Count"
								}
							},
							"additionalProperties":false,
							"title":"Chunk Metadata",
							"required":[]
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"sha":{
							"type":"string",
							"title":"Sha"
						},
						"url":{
							"type":"string",
							"title":"Url"
						},
						"verified_status":{
							"type":"boolean",
							"title":"Verified Status"
						},
						"comment_count":{
							"type":"integer",
							"title":"Comment Count"
						},
						"author_name":{
							"type":"string",
							"title":"Author Name"
						},
						"author_email":{
							"type":"string",
							"title":"Author Email"
						},
						"date":{
							"type":"string",
							"title":"Date"
						}
					},
					"additionalProperties":false,
					"required":[
						"sha",
						"url",
						"verified_status",
						"comment_count",
						"author_name",
						"author_email",
						"date"
					]
				},
				"compile_static":false,
				"code":"def chunkMetadata = [:]\n\nchunkMetadata << [\"appName\" : \"github\"]\nchunkMetadata << (binding.hasVariable('sha') && sha ? [\"sha\": sha] : [:])\nchunkMetadata << (binding.hasVariable('verified_status') && verified_status ? [\"verified_status\": verified_status] : [:])\nchunkMetadata << (binding.hasVariable('comment_count') && comment_count ? [\"comment_count\": comment_count] : [:])\nchunkMetadata << (binding.hasVariable('author_name') && author_name ? [\"author_name\": author_name] : [:])\nchunkMetadata << (binding.hasVariable('author_email') && author_email ? [\"author_email\": author_email] : [:])\nchunkMetadata << (binding.hasVariable('date') && date ? [\"date\": date] : [:])\nchunkMetadata << (binding.hasVariable('url') && url ? [\"url\": url] : [:])\n\n\nreturn [\"chunkMetadata\":chunkMetadata]",
				"parameters":{
					"sha":"{{ wfiX0.outputs.item.sha }}",
					"url":"{{ wfiX0.outputs.item.url }}",
					"author_name":"{{ wfiX0.outputs.item.author_name }}",
					"author_email":"{{ wfiX0.outputs.item.author_email }}",
					"date":"{{ wfiX0.outputs.item.date }}",
					"verified_status":"{{ wfiX0.outputs.item.verified_status }}",
					"comment_count":"{{ wfiX0.outputs.item.comment_count }}"
				}
			},
			"skip":false,
			"subTitle":"Chunk Metadata",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"TbxQI@wfiX0@mmA80-1@l@y",
			"id":"5k8Qu",
			"index":0,
			"inputs":{
				"automationId":"67091f09c6db330cf5b08ead",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"knowledgeId":"{{ 1ierk.outputs.knowledgeId }}",
					"text":"{{ wfiX0.outputs.item.chunks }}"
				}
			},
			"skip":false,
			"subTitle":"Text Chunker",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"TbxQI@wfiX0@mmA80-1@l@y",
			"id":"LXy9k",
			"index":0,
			"inputs":{
				"automationId":"66af3ff4cd79b321cb478a37",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"chunks":{
						"source":"{{ 5k8Qu.outputs.chunks }}",
						"ua:type":"mappedArray",
						"items":{
							"data":"{{ 5k8Qu.outputs.chunks[0] }}",
							"sharedWithIds":{
								"source":"{{ 3ZRYI.outputs.sharedWithIds }}",
								"ua:type":"mappedArray",
								"items":"{{ 3ZRYI.outputs.sharedWithIds[0] }}"
							}
						}
					},
					"knowledgeId":"{{ 1ierk.outputs.knowledgeId }}",
					"authorEmail":"{{ scIHn.outputs.email }}",
					"chunkMetadata":"{{ opQxL.outputs.result.chunkMetadata }}",
					"uniqueEntityId":"{{ scIHn.outputs.node_id }}"
				}
			},
			"skip":false,
			"subTitle":"Index Message And File Names",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"continue",
				"resourceVersion":439,
				"resourceName":"continue",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"TbxQI@wfiX0@mmA80-1@l@n",
			"id":"PSZnV",
			"index":0,
			"inputs":{
				"loop":"wfiX0",
				"conditions":{
					"filters":[
						{
							"property":"{{ wfiX0.outputs.item.chunks[0].message }}",
							"filter":{
								"operator":"MISSING"
							}
						},
						{
							"property":"{{ wfiX0.outputs.item.chunks[0].files }}",
							"filter":{
								"operator":"MISSING"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"subTitle":"Continue",
			"title":"Continue",
			"type":"CONTINUE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":432,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mmA80-1",
			"id":"M7RUV",
			"index":0,
			"inputs":{
				"result":{
					"cursorObject":"{{ 1ierk.outputs.knowledge.cursorObject }}",
					"success":true,
					"lastSyncTime":"{{ 1ierk.outputs.knowledge.lastSyncTime }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":411,
	"runtimeConnectionAppNames":[
		"github"
	],
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"headerValueTierMap":{},
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":92
}