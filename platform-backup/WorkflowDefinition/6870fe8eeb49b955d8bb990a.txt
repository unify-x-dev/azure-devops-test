{
	"appsUsed":[
		
	],
	"createdTime":1753185904730,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296319041,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfd7f672fcc41fb70f559",
		"status":"DEPLOYED",
		"version":33,
		"workflowVersion":62
	},
	"edges":[
		{
			"fromNodeId":"n_eAPXg",
			"priority":0,
			"skip":false,
			"toNodeId":"n_LZpAm",
			"type":"next"
		},
		{
			"fromNodeId":"n_LZpAm",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_7oWCk",
			"type":"if"
		},
		{
			"fromNodeId":"n_7oWCk",
			"priority":0,
			"skip":false,
			"toNodeId":"n_shNLz",
			"type":"next"
		},
		{
			"fromNodeId":"n_LZpAm",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_shNLz",
			"type":"next"
		},
		{
			"fromNodeId":"n_shNLz",
			"priority":0,
			"skip":false,
			"toNodeId":"n_xz38h",
			"type":"next"
		},
		{
			"fromNodeId":"n_xz38h",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qsB9H",
			"type":"if"
		},
		{
			"fromNodeId":"n_qsB9H",
			"priority":0,
			"skip":false,
			"toNodeId":"n_muZCz",
			"type":"next"
		},
		{
			"fromNodeId":"n_xz38h",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_muZCz",
			"type":"next"
		},
		{
			"fromNodeId":"n_muZCz",
			"priority":0,
			"skip":false,
			"toNodeId":"n_vQW3x",
			"type":"next"
		},
		{
			"fromNodeId":"n_vQW3x",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_FA117",
			"type":"if"
		},
		{
			"fromNodeId":"n_vQW3x",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dEPXY",
			"type":"next"
		},
		{
			"fromNodeId":"n_FA117",
			"priority":0,
			"skip":false,
			"toNodeId":"n_tHvea",
			"type":"next"
		},
		{
			"fromNodeId":"n_fkn3n",
			"priority":0,
			"skip":false,
			"toNodeId":"n_tHvea",
			"type":"next"
		},
		{
			"fromNodeId":"n_AXHqh",
			"priority":0,
			"skip":false,
			"toNodeId":"n_tHvea",
			"type":"next"
		},
		{
			"fromNodeId":"n_dEPXY",
			"priority":0,
			"skip":false,
			"toNodeId":"n_tHvea",
			"type":"next"
		},
		{
			"fromNodeId":"n_tHvea",
			"priority":0,
			"skip":false,
			"toNodeId":"n_iU5Dn",
			"type":"loop"
		},
		{
			"fromNodeId":"n_iU5Dn",
			"priority":0,
			"skip":false,
			"toNodeId":"n_8s3KK",
			"type":"next"
		},
		{
			"fromNodeId":"n_8s3KK",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Xb4z2",
			"type":"next"
		},
		{
			"fromNodeId":"n_Xb4z2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_ey40r",
			"type":"loop"
		},
		{
			"fromNodeId":"n_ey40r",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Tz9FN",
			"type":"if"
		},
		{
			"fromNodeId":"n_Tz9FN",
			"priority":0,
			"skip":false,
			"toNodeId":"n_MCjAq",
			"type":"next"
		},
		{
			"fromNodeId":"n_ey40r",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_MCjAq",
			"type":"next"
		},
		{
			"fromNodeId":"n_MCjAq",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_MM5TR",
			"type":"if"
		},
		{
			"fromNodeId":"n_MM5TR",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Xb4z2",
			"type":"next"
		},
		{
			"fromNodeId":"n_MCjAq",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Xb4z2",
			"type":"next"
		},
		{
			"fromNodeId":"n_Xb4z2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_6IayW",
			"type":"next"
		},
		{
			"fromNodeId":"n_6IayW",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_b8CIA",
			"type":"if"
		},
		{
			"fromNodeId":"n_6IayW",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_We9Ao",
			"type":"next"
		},
		{
			"fromNodeId":"n_We9Ao",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_W1iMT",
			"type":"if"
		},
		{
			"fromNodeId":"n_W1iMT",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_cKnww",
			"type":"if"
		},
		{
			"fromNodeId":"n_cKnww",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dxLAu",
			"type":"next"
		},
		{
			"fromNodeId":"n_dxLAu",
			"priority":0,
			"skip":false,
			"toNodeId":"n_JtqTl",
			"type":"next"
		},
		{
			"fromNodeId":"n_JtqTl",
			"priority":0,
			"skip":false,
			"toNodeId":"n_yOI5N",
			"type":"loop"
		},
		{
			"fromNodeId":"n_yOI5N",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_anhiZ",
			"type":"if"
		},
		{
			"fromNodeId":"n_anhiZ",
			"priority":0,
			"skip":false,
			"toNodeId":"n_HFdQ9",
			"type":"next"
		},
		{
			"fromNodeId":"n_HFdQ9",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_JtqTl",
			"type":"next"
		},
		{
			"fromNodeId":"n_yOI5N",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_JtqTl",
			"type":"next"
		},
		{
			"fromNodeId":"n_JtqTl",
			"priority":0,
			"skip":false,
			"toNodeId":"n_3luEu",
			"type":"next"
		},
		{
			"fromNodeId":"n_3luEu",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_JvRVk",
			"type":"if"
		},
		{
			"fromNodeId":"n_W1iMT",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4JRRz",
			"type":"next"
		},
		{
			"fromNodeId":"n_b8CIA",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4yKem",
			"type":"next"
		},
		{
			"fromNodeId":"n_JvRVk",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4yKem",
			"type":"next"
		},
		{
			"fromNodeId":"n_3luEu",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4yKem",
			"type":"next"
		},
		{
			"fromNodeId":"n_4JRRz",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4yKem",
			"type":"next"
		},
		{
			"fromNodeId":"n_We9Ao",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_4yKem",
			"type":"next"
		},
		{
			"fromNodeId":"n_4yKem",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_fkn3n",
			"type":"if"
		},
		{
			"fromNodeId":"n_4yKem",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_AXHqh",
			"type":"next"
		},
		{
			"fromNodeId":"n_tHvea",
			"priority":0,
			"skip":false,
			"toNodeId":"n_r5Rg4",
			"type":"next"
		},
		{
			"fromNodeId":"n_r5Rg4",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"n_uUwNm",
			"type":"if"
		},
		{
			"fromNodeId":"n_uUwNm",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zwVfs",
			"type":"next"
		},
		{
			"fromNodeId":"n_r5Rg4",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zwVfs",
			"type":"next"
		},
		{
			"fromNodeId":"n_zwVfs",
			"priority":0,
			"skip":false,
			"toNodeId":"n_eYuvN",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"6870fe8eeb49b955d8bb990a",
	"lastModifiedBy":0,
	"lcName":"slidingwindowconversationmanager (strands agent)",
	"modifiedTime":1761722874275,
	"name":"SlidingWindowConversationManager (Strands Agent)",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":445,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_eAPXg",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"text":{
													"type":"string",
													"title":"text"
												},
												"type":{
													"type":"string",
													"title":"type"
												},
												"thought":{
													"type":"string",
													"title":"thought"
												},
												"id":{
													"type":"string",
													"title":"id"
												},
												"input":{
													"type":"object",
													"properties":{
														"query":{
															"type":"string",
															"title":"query"
														}
													},
													"title":"input",
													"additionalProperties":false
												},
												"name":{
													"type":"string",
													"title":"name"
												},
												"content":{
													"type":"string",
													"title":"content"
												},
												"tool_use_id":{
													"type":"string",
													"title":"tool_use_id"
												}
											},
											"additionalProperties":false
										},
										"title":"content"
									},
									"role":{
										"type":"string",
										"title":"role"
									}
								},
								"additionalProperties":false
							},
							"title":"messages"
						},
						"success":{
							"type":"string",
							"title":"success"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"setup":{
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"text":{
													"type":"string",
													"title":"text"
												},
												"type":{
													"type":"string",
													"title":"type"
												},
												"content":{
													"type":"string",
													"title":"content"
												},
												"tool_use_id":{
													"type":"string",
													"title":"tool_use_id"
												},
												"name":{
													"type":"string",
													"title":"name"
												},
												"id":{
													"type":"string",
													"title":"id"
												},
												"thought":{
													"type":"string",
													"title":"thought"
												},
												"input":{
													"type":"object",
													"properties":{
														"query":{
															"type":"string",
															"title":"query"
														}
													},
													"additionalProperties":false,
													"title":"Input",
													"required":[]
												}
											},
											"additionalProperties":false,
											"required":[]
										},
										"title":"content"
									},
									"role":{
										"type":"string",
										"title":"role"
									}
								},
								"additionalProperties":false
							},
							"title":"messages"
						},
						"windowSize":{
							"type":"number",
							"title":"windowSize"
						},
						"TruncateResults":{
							"type":"boolean",
							"title":"Truncate Results",
							"default":"false"
						}
					},
					"additionalProperties":false,
					"required":[
						"windowSize"
					]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_LZpAm",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"=LEN({{ n_eAPXg.outputs.messages }})",
						"filter":{
							"operator":"LTE",
							"value":"{{ n_eAPXg.outputs.windowSize }}"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_LZpAm@_S4jaa-1@y",
			"id":"n_7oWCk",
			"index":0,
			"inputs":{
				"result":{
					"messages":{
						"source":"{{ n_eAPXg.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ n_eAPXg.outputs.messages[0].content }}",
								"ua:type":"mappedArray",
								"items":{
									"text":"{{ n_eAPXg.outputs.messages[0].content[0].text }}",
									"type":"{{ n_eAPXg.outputs.messages[0].content[0].type }}",
									"thought":"{{ n_eAPXg.outputs.messages[0].content[0].thought }}",
									"id":"{{ n_eAPXg.outputs.messages[0].content[0].id }}",
									"input":{
										"query":"{{ n_eAPXg.outputs.messages[0].content[0].input.query }}"
									},
									"name":"{{ n_eAPXg.outputs.messages[0].content[0].name }}",
									"content":"{{ n_eAPXg.outputs.messages[0].content[0].content }}",
									"tool_use_id":"{{ n_eAPXg.outputs.messages[0].content[0].tool_use_id }}"
								}
							},
							"role":"{{ n_eAPXg.outputs.messages[0].role }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":460,
				"resourceName":"callables_call_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_shNLz",
			"index":0,
			"inputs":{
				"automationId":"6873d5abe8894540c02427e0",
				"runtimeConnections":{},
				"synchronous":true,
				"version":"-1",
				"parameters":{
					"messages":{
						"source":"{{ n_eAPXg.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ n_eAPXg.outputs.messages[0].content }}",
								"ua:type":"mappedArray",
								"items":{
									"text":"{{ n_eAPXg.outputs.messages[0].content[0].text }}",
									"type":"{{ n_eAPXg.outputs.messages[0].content[0].type }}"
								}
							},
							"role":"{{ n_eAPXg.outputs.messages[0].role }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Call automation",
			"type":"CALL_WORKFLOW"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_xz38h",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_shNLz.outputs.index }}",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"-1"
						}
					},
					{
						"property":"{{ n_eAPXg.outputs.TruncateResults }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_xz38h@_S4jaa-1@y",
			"id":"n_qsB9H",
			"index":0,
			"inputs":{
				"result":{
					"success":"NOT IMPLEMENTED"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_muZCz",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"trimIndex":{
							"type":"number",
							"title":"trimIndex"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"trimIndex":{
							"type":"number",
							"title":"trimIndex"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_vQW3x",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"=LEN({{ n_eAPXg.outputs.messages }})",
						"filter":{
							"operator":"LTE",
							"value":"{{ n_eAPXg.outputs.windowSize }}"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_vQW3x@_S4jaa-1@y",
			"id":"n_FA117",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_muZCz.outputs.trimIndex }}",
						"value":2
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_vQW3x@_S4jaa-1@n",
			"id":"n_dEPXY",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_muZCz.outputs.trimIndex }}",
						"value":"=LEN({{ n_eAPXg.outputs.messages }}) - {{ n_eAPXg.outputs.windowSize }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":455,
				"resourceName":"loop_while",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_tHvea",
			"index":0,
			"inputs":{
				"condition":{
					"filters":[
						{
							"property":"{{ n_muZCz.outputs.trimIndex }}",
							"filter":{
								"operator":"LT",
								"value":"=LEN({{ n_eAPXg.outputs.messages }})"
							}
						}
					],
					"operator":"AND"
				},
				"captureIterations":true
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"While loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHvea@_S4jaa-1@l",
			"id":"n_iU5Dn",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"has_tool_result":{
							"type":"boolean",
							"title":"has_tool_result"
						},
						"has_tool_use":{
							"type":"boolean",
							"title":"has_tool_use"
						},
						"should_trim":{
							"type":"boolean",
							"title":"should_trim"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"should_trim":false,
				"has_tool_result":false,
				"has_tool_use":false
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"has_tool_result":{
							"type":"boolean",
							"title":"has_tool_result"
						},
						"has_tool_use":{
							"type":"boolean",
							"title":"has_tool_use"
						},
						"should_trim":{
							"type":"boolean",
							"title":"should_trim"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.message.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHvea@_S4jaa-1@l",
			"id":"n_8s3KK",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"content":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"type":{
										"type":"string",
										"title":"type"
									}
								},
								"additionalProperties":false
							},
							"title":"content"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"message":{
							"type":"array",
							"items":{
								"type":"object"
							},
							"title":"message"
						},
						"trimIndex":{
							"type":"number",
							"title":"trimIndex"
						}
					},
					"additionalProperties":false,
					"required":[
						"trimIndex"
					]
				},
				"compile_static":false,
				"code":"return [\"content\" : message[trimIndex][\"content\"] ]",
				"parameters":{
					"message":{
						"source":"{{ n_eAPXg.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":"{{ n_eAPXg.outputs.messages[0] }}"
					},
					"trimIndex":"{{ n_muZCz.outputs.trimIndex }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":455,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHvea@_S4jaa-1@l",
			"id":"n_Xb4z2",
			"index":0,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_8s3KK.outputs.result.content }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Xb4z2@n_tHvea@_S4jaa-1@l@l",
			"id":"n_ey40r",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_Xb4z2.outputs.item.type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"tool_result"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_ey40r@n_Xb4z2@n_tHvea@_S4jaa-1@l@l@y",
			"id":"n_Tz9FN",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_iU5Dn.outputs.has_tool_result }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Xb4z2@n_tHvea@_S4jaa-1@l@l",
			"id":"n_MCjAq",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_Xb4z2.outputs.item.type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"tool_use"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_MCjAq@n_Xb4z2@n_tHvea@_S4jaa-1@l@l@y",
			"id":"n_MM5TR",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_iU5Dn.outputs.has_tool_use }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHvea@_S4jaa-1@l",
			"id":"n_6IayW",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_iU5Dn.outputs.has_tool_result }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_6IayW@n_tHvea@_S4jaa-1@l@y",
			"id":"n_b8CIA",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_iU5Dn.outputs.should_trim }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_6IayW@n_tHvea@_S4jaa-1@l@n",
			"id":"n_We9Ao",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_iU5Dn.outputs.has_tool_use }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y",
			"id":"n_W1iMT",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"={{ n_muZCz.outputs.trimIndex }}+1",
						"filter":{
							"operator":"LT",
							"value":"=LEN({{ n_eAPXg.outputs.messages }})"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				},
				"visibleOptionalFields":[
					"root.parameters.message.items"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":449,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y",
			"id":"n_cKnww",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"content":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"type":{
										"type":"string",
										"title":"type"
									}
								},
								"additionalProperties":false
							},
							"title":"content"
						}
					},
					"additionalProperties":false
				},
				"input":{
					"type":"object",
					"properties":{
						"message":{
							"type":"array",
							"items":{
								"type":"object"
							},
							"title":"message"
						},
						"trimIndex":{
							"type":"number",
							"title":"trimIndex"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"compile_static":false,
				"code":"return [\"content\" : message[trimIndex + 1][\"content\"] ]",
				"parameters":{
					"message":{
						"source":"{{ n_eAPXg.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":"{{ n_eAPXg.outputs.messages[0] }}"
					},
					"trimIndex":"{{ n_muZCz.outputs.trimIndex }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":453,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y",
			"id":"n_dxLAu",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"next_has_tool_result":{
							"type":"boolean",
							"title":"next_has_tool_result"
						}
					}
				}
			},
			"inputs":{
				"next_has_tool_result":false
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"next_has_tool_result":{
							"type":"boolean",
							"title":"next_has_tool_result"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":455,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y",
			"id":"n_JtqTl",
			"index":0,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ n_cKnww.outputs.result.content }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_JtqTl@n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y@l",
			"id":"n_yOI5N",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_JtqTl.outputs.item.type }}",
						"filter":{
							"operator":"EQUAL",
							"value":"tool_result"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_yOI5N@n_JtqTl@n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y@l@y",
			"id":"n_anhiZ",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_dxLAu.outputs.next_has_tool_result }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"break",
				"resourceVersion":454,
				"resourceName":"break",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_yOI5N@n_JtqTl@n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y@l@y",
			"id":"n_HFdQ9",
			"index":0,
			"inputs":{
				"loop":"n_JtqTl"
			},
			"skip":false,
			"subTitle":"Break",
			"title":"Break",
			"type":"BREAK"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y",
			"id":"n_3luEu",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_dxLAu.outputs.next_has_tool_result }}",
						"filter":{
							"operator":"EQUAL",
							"value":"false"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_3luEu@n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@y@y",
			"id":"n_JvRVk",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_iU5Dn.outputs.should_trim }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_W1iMT@n_We9Ao@n_6IayW@n_tHvea@_S4jaa-1@l@n@y@n",
			"id":"n_4JRRz",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_iU5Dn.outputs.should_trim }}",
						"value":true
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_tHvea@_S4jaa-1@l",
			"id":"n_4yKem",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ n_iU5Dn.outputs.should_trim }}",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":446,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4yKem@n_tHvea@_S4jaa-1@l@y",
			"id":"n_fkn3n",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ n_muZCz.outputs.trimIndex }}",
						"value":"={{ n_muZCz.outputs.trimIndex }}+1"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"break",
				"resourceVersion":454,
				"resourceName":"break",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_4yKem@n_tHvea@_S4jaa-1@l@n",
			"id":"n_AXHqh",
			"index":0,
			"inputs":{
				"loop":"n_tHvea"
			},
			"skip":false,
			"subTitle":"Break",
			"title":"Break",
			"type":"BREAK"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":438,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_r5Rg4",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"={{ n_muZCz.outputs.trimIndex }}",
						"filter":{
							"operator":"EQUAL",
							"value":"=LEN({{ n_eAPXg.outputs.messages }})"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_r5Rg4@_S4jaa-1@y",
			"id":"n_uUwNm",
			"index":0,
			"inputs":{
				"result":{
					"success":"FAILED"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.messages.items.content.items.text",
					"root.parameters.messages.items.content.items.type",
					"root.parameters.messages.items.content.items.thought",
					"root.parameters.messages.items.content.items.id",
					"root.parameters.messages.items.content.items.input.query",
					"root.parameters.messages.items.content.items.name",
					"root.parameters.messages.items.content.items.content",
					"root.parameters.messages.items.content.items.tool_use_id",
					"root.parameters.messages.items.role"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":450,
				"resourceName":"code_by_unifyapps_python",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_zwVfs",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"trimmedmessages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"text":{
													"type":"string",
													"title":"text"
												},
												"type":{
													"type":"string",
													"title":"type"
												},
												"thought":{
													"type":"string",
													"title":"thought"
												},
												"id":{
													"type":"string",
													"title":"id"
												},
												"input":{
													"type":"object",
													"properties":{
														"query":{
															"type":"string",
															"title":"query"
														}
													},
													"title":"input",
													"additionalProperties":false
												},
												"name":{
													"type":"string",
													"title":"name"
												},
												"content":{
													"type":"string",
													"title":"content"
												},
												"tool_use_id":{
													"type":"string",
													"title":"tool_use_id"
												}
											},
											"additionalProperties":false
										},
										"title":"content"
									},
									"role":{
										"type":"string",
										"title":"role"
									}
								},
								"additionalProperties":false
							},
							"title":"trimmedmessages"
						}
					},
					"additionalProperties":false,
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"content":{
										"type":"array",
										"items":{
											"type":"object",
											"properties":{
												"text":{
													"type":"string",
													"title":"text"
												},
												"type":{
													"type":"string",
													"title":"type"
												},
												"thought":{
													"type":"string",
													"title":"thought"
												},
												"id":{
													"type":"string",
													"title":"id"
												},
												"input":{
													"type":"object",
													"properties":{
														"query":{
															"type":"string",
															"title":"query"
														}
													},
													"title":"input",
													"additionalProperties":false
												},
												"name":{
													"type":"string",
													"title":"name"
												},
												"content":{
													"type":"string",
													"title":"content"
												},
												"tool_use_id":{
													"type":"string",
													"title":"tool_use_id"
												}
											},
											"additionalProperties":false
										},
										"title":"content"
									},
									"role":{
										"type":"string",
										"title":"role"
									}
								},
								"additionalProperties":false
							},
							"title":"messages"
						},
						"trimIndex":{
							"type":"number",
							"title":"trimIndex"
						}
					},
					"additionalProperties":false,
					"required":[
						"trimIndex"
					]
				},
				"code":"result = {\"trimmedmessages\" : messages[trimIndex:]}",
				"isAsync":false,
				"parameters":{
					"messages":{
						"source":"{{ n_eAPXg.outputs.messages }}",
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ n_eAPXg.outputs.messages[0].content }}",
								"ua:type":"mappedArray",
								"items":{
									"text":"{{ n_eAPXg.outputs.messages[0].content[0].text }}",
									"type":"{{ n_eAPXg.outputs.messages[0].content[0].type }}",
									"thought":"{{ n_eAPXg.outputs.messages[0].content[0].thought }}",
									"id":"{{ n_eAPXg.outputs.messages[0].content[0].id }}",
									"input":{
										"query":"{{ n_eAPXg.outputs.messages[0].content[0].input.query }}"
									},
									"name":"{{ n_eAPXg.outputs.messages[0].content[0].name }}",
									"content":"{{ n_eAPXg.outputs.messages[0].content[0].content }}",
									"tool_use_id":"{{ n_eAPXg.outputs.messages[0].content[0].tool_use_id }}"
								}
							},
							"role":"{{ n_eAPXg.outputs.messages[0].role }}"
						}
					},
					"trimIndex":"{{ n_muZCz.outputs.trimIndex }}"
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Python script",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":455,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_S4jaa-1",
			"id":"n_eYuvN",
			"index":0,
			"inputs":{
				"result":{
					"messages":{
						"source":"{{ n_zwVfs.outputs.result.trimmedmessages }}",
						"ua:type":"mappedArray",
						"items":{
							"content":{
								"source":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content }}",
								"ua:type":"mappedArray",
								"items":{
									"text":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].text }}",
									"type":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].type }}",
									"thought":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].thought }}",
									"id":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].id }}",
									"input":{
										"query":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].input.query }}"
									},
									"name":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].name }}",
									"content":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].content }}",
									"tool_use_id":"{{ n_zwVfs.outputs.result.trimmedmessages[0].content[0].tool_use_id }}"
								}
							},
							"role":"{{ n_zwVfs.outputs.result.trimmedmessages[0].role }}"
						}
					},
					"success":"SUCCESS"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":0,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":64
}