{
	"appsUsed":[
		
	],
	"createdTime":1761912906500,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1761917641180,
		"deployedBy":44108,
		"deployedDefinitionId":"6904bac9b7d9901293564b58",
		"status":"DEPLOYED",
		"version":2,
		"workflowVersion":3
	},
	"edges":[
		{
			"fromNodeId":"n_9fJx6",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qQQ47",
			"type":"next"
		},
		{
			"fromNodeId":"n_qQQ47",
			"priority":0,
			"skip":false,
			"toNodeId":"n_dnmQQ",
			"type":"loop"
		},
		{
			"fromNodeId":"n_dnmQQ",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"n_qQQ47",
			"type":"next"
		},
		{
			"fromNodeId":"n_qQQ47",
			"priority":0,
			"skip":false,
			"toNodeId":"n_zByDB",
			"type":"next"
		}
	],
	"id":"6904a84af80f564e784ba959",
	"lastModifiedBy":44108,
	"lcName":"starrocks | alert | persistent index ",
	"modifiedTime":1761919319161,
	"name":"STARROCKS | ALERT | Persistent Index ",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1077,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_gEpbz-1",
			"id":"n_9fJx6",
			"index":1,
			"inputs":{
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[
						"baseInternalUrl"
					],
					"properties":{
						"tables":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"PARTITION_KEY":{
										"type":"string",
										"title":"PARTITION_KEY"
									},
									"TABLE_NAME":{
										"type":"string",
										"title":"TABLE_NAME"
									},
									"TABLE_MODEL":{
										"type":"string",
										"title":"TABLE_MODEL"
									},
									"TABLE_SCHEMA":{
										"type":"string",
										"title":"TABLE_SCHEMA"
									},
									"PRIMARY_KEY":{
										"type":"string",
										"title":"PRIMARY_KEY"
									},
									"DISTRIBUTE_KEY":{
										"type":"string",
										"title":"DISTRIBUTE_KEY"
									},
									"TABLE_ENGINE":{
										"type":"string",
										"title":"TABLE_ENGINE"
									},
									"DISTRIBUTE_BUCKET":{
										"type":"integer",
										"title":"DISTRIBUTE_BUCKET"
									},
									"PROPERTIES":{
										"type":"string",
										"title":"PROPERTIES"
									},
									"SORT_KEY":{
										"type":"string",
										"title":"SORT_KEY"
									},
									"DISTRIBUTE_TYPE":{
										"type":"string",
										"title":"DISTRIBUTE_TYPE"
									},
									"TABLE_ID":{
										"type":"integer",
										"title":"TABLE_ID"
									}
								},
								"additionalProperties":false
							},
							"title":"tables"
						},
						"baseInternalUrl":{
							"type":"string",
							"title":"Base Internal Url"
						},
						"env":{
							"type":"string",
							"title":"Env"
						},
						"heartbeatEnvUrl":{
							"type":"string",
							"title":"Heartbeat Env Url"
						},
						"valid_properties":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Valid Properties"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":865,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_gEpbz-1",
			"id":"n_qQQ47",
			"index":2,
			"inputs":{
				"repeatMode":"BATCH",
				"listSource":"{{ n_9fJx6.outputs.tables }}",
				"captureIterations":true,
				"batchSize":100
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.parameters.tables.items.PARTITION_KEY",
					"root.parameters.tables.items.TABLE_NAME",
					"root.parameters.tables.items.TABLE_MODEL",
					"root.parameters.tables.items.TABLE_SCHEMA",
					"root.parameters.tables.items.PRIMARY_KEY",
					"root.parameters.tables.items.DISTRIBUTE_KEY",
					"root.parameters.tables.items.TABLE_ENGINE",
					"root.parameters.tables.items.DISTRIBUTE_BUCKET",
					"root.parameters.tables.items.PROPERTIES",
					"root.parameters.tables.items.SORT_KEY",
					"root.parameters.tables.items.DISTRIBUTE_TYPE",
					"root.parameters.tables.items.TABLE_ID"
				]
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":1049,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"n_qQQ47@_gEpbz-1@l",
			"id":"n_dnmQQ",
			"index":3,
			"inputs":{
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"tables":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"PARTITION_KEY":{
										"type":"string",
										"title":"PARTITION_KEY"
									},
									"TABLE_NAME":{
										"type":"string",
										"title":"TABLE_NAME"
									},
									"TABLE_MODEL":{
										"type":"string",
										"title":"TABLE_MODEL"
									},
									"TABLE_SCHEMA":{
										"type":"string",
										"title":"TABLE_SCHEMA"
									},
									"PRIMARY_KEY":{
										"type":"string",
										"title":"PRIMARY_KEY"
									},
									"DISTRIBUTE_KEY":{
										"type":"string",
										"title":"DISTRIBUTE_KEY"
									},
									"TABLE_ENGINE":{
										"type":"string",
										"title":"TABLE_ENGINE"
									},
									"DISTRIBUTE_BUCKET":{
										"type":"integer",
										"title":"DISTRIBUTE_BUCKET"
									},
									"PROPERTIES":{
										"type":"string",
										"title":"PROPERTIES"
									},
									"SORT_KEY":{
										"type":"string",
										"title":"SORT_KEY"
									},
									"DISTRIBUTE_TYPE":{
										"type":"string",
										"title":"DISTRIBUTE_TYPE"
									},
									"TABLE_ID":{
										"type":"integer",
										"title":"TABLE_ID"
									}
								},
								"additionalProperties":false
							},
							"title":"tables"
						},
						"properties":{
							"type":"string",
							"title":"Properties"
						}
					}
				},
				"code":"if(!binding.hasVariable('tables')) {\n  tables = []\n}\n\ndef invalidTables = tables.collect { table ->\n    def properties = com.unifyapps.infra.utils.JsonUtils.fromJson(table.PROPERTIES, Map)\n\n    def invalidProps = properties.findAll { k, v ->\n        !standard_properties.containsKey(k) || standard_properties[k] != v\n    }\n\n    if (!invalidProps.isEmpty()) {\n        return [\n            TABLE_NAME         : table.TABLE_NAME,\n            TABLE_SCHEMA       : table.TABLE_SCHEMA,\n            INVALID_PROPERTIES : invalidProps\n        ]\n    }\n    return null\n}\n\nreturn invalidTables\n\n// return ",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"tables":{
						"source":"{{ n_qQQ47.outputs.item }}",
						"ua:type":"mappedArray",
						"items":{
							"PARTITION_KEY":"{{ n_qQQ47.outputs.item[0].PARTITION_KEY }}",
							"TABLE_NAME":"{{ n_qQQ47.outputs.item[0].TABLE_NAME }}",
							"TABLE_MODEL":"{{ n_qQQ47.outputs.item[0].TABLE_MODEL }}",
							"TABLE_SCHEMA":"{{ n_qQQ47.outputs.item[0].TABLE_SCHEMA }}",
							"PRIMARY_KEY":"{{ n_qQQ47.outputs.item[0].PRIMARY_KEY }}",
							"DISTRIBUTE_KEY":"{{ n_qQQ47.outputs.item[0].DISTRIBUTE_KEY }}",
							"TABLE_ENGINE":"{{ n_qQQ47.outputs.item[0].TABLE_ENGINE }}",
							"DISTRIBUTE_BUCKET":"{{ n_qQQ47.outputs.item[0].DISTRIBUTE_BUCKET }}",
							"PROPERTIES":"{{ n_qQQ47.outputs.item[0].PROPERTIES }}",
							"SORT_KEY":"{{ n_qQQ47.outputs.item[0].SORT_KEY }}",
							"DISTRIBUTE_TYPE":"{{ n_qQQ47.outputs.item[0].DISTRIBUTE_TYPE }}",
							"TABLE_ID":"{{ n_qQQ47.outputs.item[0].TABLE_ID }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Code by UnifyApps",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":1114,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":true,
			"fallbackMode":"STOP",
			"groupId":"_gEpbz-1",
			"id":"n_zByDB",
			"index":4,
			"inputs":{
				"result":"{{ n_9fJx6.outputs }}"
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":44108,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		
	],
	"version":6
}