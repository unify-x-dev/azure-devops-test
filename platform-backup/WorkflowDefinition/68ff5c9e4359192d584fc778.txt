{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1761587074693,
	"deleted":false,
	"edges":[
		{
			"fromNodeId":"_hamy3",
			"priority":0,
			"skip":false,
			"toNodeId":"n_O4kH2",
			"type":"next"
		},
		{
			"fromNodeId":"n_O4kH2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_wJieO",
			"type":"next"
		},
		{
			"fromNodeId":"n_wJieO",
			"priority":0,
			"skip":false,
			"toNodeId":"n_36Jcm",
			"type":"next"
		},
		{
			"fromNodeId":"n_36Jcm",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ntjci",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ntjci",
			"name":"1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ntjci@1",
			"type":"branch"
		},
		{
			"fromNodeId":"n_Ntjci@1",
			"priority":0,
			"skip":false,
			"toNodeId":"n_gz7JJ",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ntjci",
			"name":"2",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ntjci@2",
			"type":"branch"
		},
		{
			"fromNodeId":"n_Ntjci@2",
			"priority":0,
			"skip":false,
			"toNodeId":"_Ou98f",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ntjci",
			"name":"3",
			"priority":0,
			"skip":false,
			"toNodeId":"n_Ntjci@3",
			"type":"branch"
		},
		{
			"fromNodeId":"n_Ntjci@3",
			"priority":0,
			"skip":false,
			"toNodeId":"_IsKMP",
			"type":"next"
		},
		{
			"fromNodeId":"n_gz7JJ",
			"priority":0,
			"skip":false,
			"toNodeId":"_Oriex",
			"type":"next"
		},
		{
			"fromNodeId":"_Ou98f",
			"priority":0,
			"skip":false,
			"toNodeId":"_Oriex",
			"type":"next"
		},
		{
			"fromNodeId":"_IsKMP",
			"priority":0,
			"skip":false,
			"toNodeId":"_Oriex",
			"type":"next"
		},
		{
			"fromNodeId":"n_Ntjci",
			"name":"default",
			"priority":0,
			"skip":false,
			"toNodeId":"_Oriex",
			"type":"branch"
		}
	],
	"id":"68ff5c9e4359192d584fc778",
	"lastModifiedBy":186893,
	"lcName":"[dt] remove knowledge permissions",
	"modifiedTime":1761587074693,
	"name":"[DT] Remove Knowledge Permissions",
	"nodes":[
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"callables",
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_5NVxH-1",
			"id":"_hamy3",
			"index":1,
			"inputs":{
				"result":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"success":{
							"type":"boolean",
							"title":"Success"
						}
					}
				},
				"setup":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"knowledgeId":{
							"type":"string",
							"title":"Knowledge Id"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":873,
				"resourceName":"storage_by_unifyapps_fetch_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_5NVxH-1",
			"id":"n_O4kH2",
			"index":2,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ _hamy3.outputs.knowledgeId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"knowledge",
				"includeRoleMappings":false,
				"includeCurrentUserPermissions":false,
				"translationsOption":"DEFAULT",
				"page":{
					"paginateBy":"OFFSET",
					"limit":20
				},
				"numberOfRecordsToFetch":"SINGLE",
				"readThroughSessionVariables":false,
				"includeTotalCount":false
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Fetch records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_5NVxH-1",
			"id":"n_wJieO",
			"index":3,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"grants":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Grants"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"knowledge":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Knowledge"
						}
					}
				},
				"code":"return [grants : knowledge.grants]",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"knowledge":"{{ n_O4kH2.outputs }}"
				}
			},
			"skip":false,
			"subTitle":"get Grants",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"additional":{
				"xsdSchemaConfig":{
					"root":{}
				}
			},
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":0,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_5NVxH-1",
			"id":"n_36Jcm",
			"index":4,
			"inputs":{
				"output":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"users":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Users"
						},
						"teams":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"Teams"
						}
					}
				},
				"input":{
					"type":"object",
					"additionalProperties":false,
					"required":[],
					"properties":{
						"grants":{
							"type":"object",
							"properties":{},
							"additionalProperties":false,
							"title":"Grants"
						}
					}
				},
				"code":"if (binding.hasVariable(\"grants\")){\n  def newGrants = com.unifyapps.infra.utils.JsonUtils.toJSON(grants)\n  def users = []\n  def teams = []\n  for(config in newGrants?.configs) {\n    if(config?.principalType.name() == \"USER\") {\n      users.addAll(config.principalIds)\n    }\n\n    if(config?.principalType.name() == \"USER_GROUPS\") {\n      teams.addAll(config.principalIds)\n    }\n  }\n  return [\"users\": users, \n              \"teams\": teams]\n}\n\n",
				"compile_static":false,
				"captureStdOutput":false,
				"parameters":{
					"grants":"{{ n_wJieO.outputs.result.grants }}"
				}
			},
			"skip":false,
			"subTitle":"get lists",
			"title":"Execute Groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_5NVxH-1",
			"id":"n_Ntjci",
			"index":5,
			"inputs":{
				"branches":[
					{
						"id":"1",
						"inputs":{
							"name":"Users",
							"conditions":{
								"filters":[
									{
										"property":"{{ n_36Jcm.outputs.result.users }}",
										"filter":{
											"operator":"EXISTS"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"2",
						"inputs":{
							"name":"Teams",
							"conditions":{
								"filters":[
									{
										"property":"{{ n_36Jcm.outputs.result.teams }}",
										"filter":{
											"operator":"EXISTS"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"3",
						"inputs":{
							"name":"Global",
							"conditions":{
								"filters":[
									{
										"property":"1",
										"filter":{
											"operator":"EQUAL",
											"value":"1"
										}
									}
								],
								"operator":"AND"
							}
						}
					},
					{
						"id":"default"
					}
				]
			},
			"skip":false,
			"subTitle":"Branch",
			"title":"",
			"type":"BRANCH"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ntjci@_5NVxH-1@1",
			"id":"n_Ntjci@1",
			"index":6,
			"inputs":{
				"name":"Users",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_36Jcm.outputs.result.users }}",
							"filter":{
								"operator":"EXISTS"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":776,
				"resourceName":"storage_by_unifyapps_share_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ntjci@_5NVxH-1@1",
			"id":"n_gz7JJ",
			"index":7,
			"inputs":{
				"principal":"USER",
				"filter":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ _hamy3.outputs.knowledgeId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"knowledge",
				"roles":[],
				"operationType":"REMOVE",
				"shareWithUsers":"{{ n_36Jcm.outputs.result.users }}"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Share records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ntjci@_5NVxH-1@2",
			"id":"n_Ntjci@2",
			"index":8,
			"inputs":{
				"name":"Teams",
				"conditions":{
					"filters":[
						{
							"property":"{{ n_36Jcm.outputs.result.teams }}",
							"filter":{
								"operator":"EXISTS"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":776,
				"resourceName":"storage_by_unifyapps_share_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ntjci@_5NVxH-1@2",
			"id":"_Ou98f",
			"index":9,
			"inputs":{
				"principal":"USER_GROUPS",
				"filter":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ _hamy3.outputs.knowledgeId }}"
							}
						}
					],
					"operator":"AND"
				},
				"shareWithUserGroups":"{{ n_36Jcm.outputs.result.teams }}",
				"object_type":"knowledge",
				"roles":[],
				"operationType":"REMOVE"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Share records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"branch_condition",
				"resourceVersion":0,
				"resourceName":"branch_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ntjci@_5NVxH-1@3",
			"id":"n_Ntjci@3",
			"index":10,
			"inputs":{
				"name":"Global",
				"conditions":{
					"filters":[
						{
							"property":"1",
							"filter":{
								"operator":"EQUAL",
								"value":"1"
							}
						}
					],
					"operator":"AND"
				}
			},
			"skip":false,
			"title":"",
			"type":"BRANCH_CONDITION"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":776,
				"resourceName":"storage_by_unifyapps_share_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"n_Ntjci@_5NVxH-1@3",
			"id":"_IsKMP",
			"index":11,
			"inputs":{
				"principal":"GLOBAL",
				"filter":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ _hamy3.outputs.knowledgeId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"knowledge",
				"roles":[],
				"operationType":"REMOVE"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Share records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"_5NVxH-1",
			"id":"_Oriex",
			"index":12,
			"inputs":{
				"result":{
					"success":true
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":186893,
	"schemaReferences":[
		
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":false,
	"tags":[
		"AI Agent"
	],
	"version":31
}