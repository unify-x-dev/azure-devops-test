{
	"appsUsed":[
		"storage_by_unifyapps"
	],
	"createdTime":1745474394004,
	"deleted":false,
	"deploymentState":{
		"deployedAt":1760296328867,
		"deployedBy":-1,
		"deployedDefinitionId":"68ebfd88d60dd816d77991ac",
		"status":"DEPLOYED",
		"version":52,
		"workflowVersion":76
	},
	"edges":[
		{
			"fromNodeId":"xGoqE",
			"priority":0,
			"skip":false,
			"toNodeId":"jgSZH",
			"type":"next"
		},
		{
			"fromNodeId":"jgSZH",
			"priority":0,
			"skip":false,
			"toNodeId":"yIICZ",
			"type":"next"
		},
		{
			"fromNodeId":"yIICZ",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"owN2S",
			"type":"if"
		},
		{
			"fromNodeId":"yIICZ",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"w0WY1",
			"type":"next"
		},
		{
			"fromNodeId":"w0WY1",
			"priority":0,
			"skip":false,
			"toNodeId":"64H4Z",
			"type":"next"
		},
		{
			"fromNodeId":"owN2S",
			"priority":0,
			"skip":false,
			"toNodeId":"OwvK7",
			"type":"next"
		},
		{
			"fromNodeId":"64H4Z",
			"priority":0,
			"skip":false,
			"toNodeId":"OwvK7",
			"type":"next"
		},
		{
			"fromNodeId":"OwvK7",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"5twvC",
			"type":"if"
		},
		{
			"fromNodeId":"5twvC",
			"priority":0,
			"skip":false,
			"toNodeId":"G1A8k",
			"type":"next"
		},
		{
			"fromNodeId":"6fclT",
			"priority":0,
			"skip":false,
			"toNodeId":"G1A8k",
			"type":"next"
		},
		{
			"fromNodeId":"OwvK7",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"G1A8k",
			"type":"next"
		},
		{
			"fromNodeId":"G1A8k",
			"priority":0,
			"skip":false,
			"toNodeId":"6fclT",
			"type":"loop"
		},
		{
			"fromNodeId":"G1A8k",
			"priority":0,
			"skip":false,
			"toNodeId":"ly2fz",
			"type":"next"
		}
	],
	"grants":{
		"configs":[
			{
				"permissions":[
					"V"
				],
				"principalType":"GLOBAL"
			}
		]
	},
	"id":"68061d3e9fe68756bec65c0f",
	"lastModifiedBy":0,
	"lcName":"upsert topic advanced agent",
	"modifiedTime":1761722885212,
	"name":"Upsert Topic Advanced Agent",
	"nodes":[
		{
			"additional":{
				"xsdSchemaConfig":{}
			},
			"context":{
				"appName":"callables",
				"resourceVersion":10,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6M0vc-1",
			"id":"xGoqE",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"id":{
							"type":"string",
							"title":"Id"
						}
					},
					"additionalProperties":false,
					"required":[
						"id"
					]
				},
				"setup":{
					"type":"object",
					"properties":{
						"topicPayload":{
							"type":"object",
							"properties":{
								"instructions":{
									"type":"array",
									"items":{
										"type":"string"
									},
									"title":"instructions"
								},
								"modelSelectionConfig":{
									"type":"object",
									"properties":{
										"cost":{
											"type":"string",
											"title":"cost"
										},
										"latency":{
											"type":"string",
											"title":"latency"
										},
										"quality":{
											"type":"string",
											"title":"quality"
										}
									},
									"title":"modelSelectionConfig",
									"additionalProperties":false
								},
								"name":{
									"type":"string",
									"title":"name"
								},
								"description":{
									"type":"string",
									"title":"description"
								},
								"aiAgentId":{
									"type":"string",
									"title":"aiAgentId"
								}
							},
							"title":"topicPayload",
							"additionalProperties":false
						},
						"toolIds":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"toolIds"
						},
						"topicId":{
							"type":"string",
							"title":"topicId"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						}
					},
					"additionalProperties":false,
					"$comment":"upsertTopic",
					"required":[
						"aiAgentId"
					]
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Trigger via automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":10,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6M0vc-1",
			"id":"jgSZH",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"toolsIds":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Tools Ids"
						},
						"topicId":{
							"type":"string",
							"title":"Topic Id"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						}
					},
					"required":[]
				}
			},
			"inputs":{
				"toolsIds":{
					"source":"{{ xGoqE.outputs.toolIds }}",
					"ua:type":"mappedArray",
					"items":"{{ xGoqE.outputs.toolIds[0] }}"
				},
				"topicId":"{{ xGoqE.outputs.topicId }}",
				"aiAgentId":"{{ xGoqE.outputs.topicPayload.aiAgentId }}"
			},
			"outputSchema":{
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"toolsIds":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{},
								"additionalProperties":false
							},
							"title":"Tools Ids"
						},
						"topicId":{
							"type":"string",
							"title":"Topic Id"
						},
						"aiAgentId":{
							"type":"string",
							"title":"Ai Agent Id"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":253,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6M0vc-1",
			"id":"yIICZ",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ jgSZH.outputs.topicId }}",
						"filter":{
							"operator":"EXISTS"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.instructions.items",
					"root.record.modelSelectionConfig.quality",
					"root.record.modelSelectionConfig.latency",
					"root.record.modelSelectionConfig.cost",
					"root.record.associatedAgentIds.items"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":145,
				"resourceName":"storage_by_unifyapps_upsert_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"yIICZ@6M0vc-1@y",
			"id":"owN2S",
			"index":0,
			"inputs":{
				"object_type":"e_topic_ai_agent",
				"updateFields":[
					{
						"fieldName":"properties.aiAgentId",
						"actionType":"SET",
						"setValue":"{{ jgSZH.outputs.aiAgentId }}"
					},
					{
						"fieldName":"properties.name",
						"actionType":"SET",
						"setValue":"{{ xGoqE.outputs.topicPayload.name }}"
					},
					{
						"fieldName":"properties.description",
						"actionType":"SET",
						"setValue":"{{ xGoqE.outputs.topicPayload.description }}"
					},
					{
						"fieldName":"properties.instructions",
						"actionType":"SET",
						"setValue":"{{ xGoqE.outputs.topicPayload.instructions }}"
					},
					{
						"fieldName":"properties.modelSelectionConfig",
						"actionType":"SET",
						"setValue":"{{ xGoqE.outputs.topicPayload.modelSelectionConfig }}"
					}
				],
				"id":"{{ xGoqE.outputs.topicId }}"
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Upsert Record",
			"type":"ACTION"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.record.instructions.items",
					"root.record.modelSelectionConfig.quality",
					"root.record.modelSelectionConfig.latency",
					"root.record.modelSelectionConfig.cost",
					"root.record.associatedAgentIds.items"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":259,
				"resourceName":"storage_by_unifyapps_create_record",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"yIICZ@6M0vc-1@n",
			"id":"w0WY1",
			"index":0,
			"inputs":{
				"object_type":"e_topic_ai_agent",
				"record":{
					"name":"{{ xGoqE.outputs.topicPayload.name }}",
					"description":"{{ xGoqE.outputs.topicPayload.description }}",
					"aiAgentId":"{{ xGoqE.outputs.topicPayload.aiAgentId }}",
					"instructions":{
						"source":"{{ xGoqE.outputs.topicPayload.instructions }}",
						"ua:type":"mappedArray",
						"items":"{{ xGoqE.outputs.topicPayload.instructions[0] }}"
					},
					"modelSelectionConfig":{
						"quality":"{{ xGoqE.outputs.topicPayload.modelSelectionConfig.quality }}",
						"latency":"{{ xGoqE.outputs.topicPayload.modelSelectionConfig.latency }}",
						"cost":"{{ xGoqE.outputs.topicPayload.modelSelectionConfig.cost }}"
					}
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Create record",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":258,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"yIICZ@6M0vc-1@n",
			"id":"64H4Z",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ jgSZH.outputs.topicId }}",
						"value":"{{ w0WY1.outputs.id }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":329,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6M0vc-1",
			"id":"OwvK7",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ jgSZH.outputs.topicId }}",
						"filter":{
							"operator":"EXISTS"
						}
					},
					{
						"property":"{{ jgSZH.outputs.topicId }}",
						"filter":{
							"operator":"NOT_EQUAL",
							"value":"GLOBAL"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":2189,
				"resourceName":"storage_by_unifyapps_delete_records",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"OwvK7@6M0vc-1@y",
			"id":"5twvC",
			"index":0,
			"inputs":{
				"triggerInputCondition":{
					"filters":[
						{
							"property":"id",
							"filter":{
								"operator":"NOT_IN",
								"value":"{{ jgSZH.outputs.toolsIds }}"
							}
						},
						{
							"property":"properties_topicId",
							"filter":{
								"operator":"EQUAL",
								"value":"{{ jgSZH.outputs.topicId }}"
							}
						}
					],
					"operator":"AND"
				},
				"object_type":"e_action_ai_agent",
				"numberOfRecordsToDelete":"MULTIPLE",
				"page":{
					"limit":20,
					"offset":0
				}
			},
			"skip":false,
			"subTitle":"Storage by UnifyApps",
			"title":"Delete records",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":238,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6M0vc-1",
			"id":"G1A8k",
			"index":0,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ jgSZH.outputs.toolsIds }}",
				"captureIterations":false
			},
			"skip":false,
			"subTitle":"Loop on tools",
			"title":"For loop",
			"type":"LOOP"
		},
		{
			"additional":{
				"visibleOptionalFields":[
					"root.updateFields.items.fieldName",
					"root.updateFields.items.actionType"
				]
			},
			"context":{
				"appName":"storage_by_unifyapps",
				"resourceVersion":127,
				"resourceName":"storage_by_unifyapps_update_record_fields_by_id",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"G1A8k@6M0vc-1@l",
			"id":"6fclT",
			"index":0,
			"inputs":{
				"recordId":"{{ G1A8k.outputs.item }}",
				"object_type":"e_action_ai_agent",
				"skipPermissionCheck":false,
				"updateFields":[
					{
						"fieldName":"properties.topicId",
						"actionType":"SET",
						"setValue":"{{ jgSZH.outputs.topicId }}"
					},
					{
						"fieldName":"properties.aiAgentId",
						"actionType":"SET",
						"setValue":"{{ jgSZH.outputs.aiAgentId }}"
					}
				]
			},
			"skip":false,
			"subTitle":"make accessible",
			"title":"Update an existing record's fields",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":190,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"6M0vc-1",
			"id":"ly2fz",
			"index":0,
			"inputs":{
				"result":{
					"id":"{{ jgSZH.outputs.aiAgentId }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Respond to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":-1,
	"schemaReferences":[
		"entity|e_code_snippet|e_68077774405c1a2720ee14af",
		"entity|e_code_snippet|e_6807783f4545cd5df990733b"
	],
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true,
		"route":{
			"default":false,
			"tierName":"global"
		}
	},
	"standard":true,
	"tags":[
		
	],
	"version":78
}